"Issue ID","Work Item ID","Project Key","Issue Type","Summary","Description","Parent ID","Labels","External Link","Acceptance Criteria"
"gh-101-epic","gh-101-epic","AUTO","Epic","[GH#101] Expand E2E Test Coverage","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/101
Labels: [object Object], [object Object], [object Object]

# Expand E2E Test Coverage

**Priority:** Low  
**Type:** Testing  
**Component:** Playwright Tests  
**Effort:** Medium (2-3 days)

## Problem

E2E test coverage is limited, with only basic scenarios tested:

### Current Issues

- Only 2 E2E test files (app.spec.ts, accessibility.spec.ts)
- Missing tests for critical user workflows
- No visual regression testing
- CSV upload edge cases not tested
- Filter combinations not thoroughly tested
- Mobile-specific scenarios untested

### User Impact

- **Low:** Does not affect users directly
- Increased risk of bugs in production
- Regressions may go undetected
- Manual testing burden on developers
- Lower confidence in releases

## Proposed Solution

### Comprehensive E2E Test Suite

Add thorough E2E tests covering all user workflows:

```typescript
// tests/e2e/commander-search.spec.ts
import { test, expect } from ""@playwright/test"";

describe(""Commander Search"", () => {
  test(""searches and selects commander"", async ({ page }) => {
    await page.goto(""/"");

    // Type commander name
    await page.fill('input[placeholder*=""Search""]', ""Atraxa"");

    // Wait for autocomplete
    await page.waitForSelector("".autocomplete-results"");

    // Select first result
    await page.click("".autocomplete-results >> nth=0"");

    // Verify commander displayed
    await expect(page.locator("".commander-display"")).toBeVisible();
    await expect(page.locator("".commander-name"")).toContainText(""Atraxa"");
  });

  test(""handles partner commanders"", async ({ page }) => {
    await page.goto(""/"");

    // Search for partner commander
    await page.fill('input[placeholder*=""Search""]', ""Tymna"");
    await page.click("".autocomplete-results >> text=Tymna the Weaver"");

    // Should show partner selection
    await expect(page.locator("".partner-search"")).toBeVisible();

    // Select second partner
    await page.fill("".partner-search input"", ""Thrasios"");
    await page.click("".autocomplete-results >> text=Thrasios"");

    // Verify both partners
    await expect(page.locator("".commander-display"")).toContainText(""Tymna"");
    await expect(page.locator("".commander-display"")).toContainText(""Thrasios"");
  });

  test(""handles typos with fuzzy search"", async ({ page }) => {
    await page.goto(""/"");

    // Search with typo
    await page.fill('input[placeholder*=""Search""]', ""Atraxxa"");

    // Should still find Atraxa
    await expect(page.locator("".autocomplete-results"")).toContainText(""Atraxa"");
  });
});
```

### CSV Upload Workflow Tests

```typescript
// tests/e2e/csv-upload.spec.ts
import { test, expect } from ""@playwright/test"";

describe(""CSV Upload"", () => {
  test(""uploads valid CSV file"", async ({ page }) => {
    await page.goto(""/"");

    // Open upload modal
    await page.click('[data-testid=""upload-csv-button""]');
    await expect(page.locator("".csv-upload-modal"")).toBeVisible();

    // Upload file
    await page.setInputFiles('input[type=""file""]', ""tests/fixtures/inventory-valid.csv"");

    // Verify success
    await expect(page.locator("".upload-success"")).toBeVisible();
    await expect(page.locator("".csv-stats"")).toContainText(""150 cards"");
  });

  test(""validates CSV headers"", async ({ page }) => {
    await page.goto(""/"");
    await page.click('[data-testid=""upload-csv-button""]');

    // Upload CSV without Name column
    await page.setInputFiles('input[type=""file""]', ""tests/fixtures/inventory-no-name.csv"");

    // Should show error
    await expect(page.locator("".error-message"")).toContainText(""Name column"");
  });

  test(""handles large CSV files"", async ({ page }) => {
    await page.goto(""/"");
    await page.click('[data-testid=""upload-csv-button""]');

    // Upload 10k card CSV
    await page.setInputFiles('input[type=""file""]', ""tests/fixtures/inventory-large.csv"");

    // Should show progress
    await expect(page.locator("".upload-progress"")).toBeVisible();

    // Eventually succeed
    await expect(page.locator("".upload-success"")).toBeVisible({
      timeout: 10000,
    });
  });

  test(""clears previous CSV data"", async ({ page }) => {
    await page.goto(""/"");

    // Upload first CSV
    await uploadCSV(page, ""tests/fixtures/inventory-1.csv"");
    const firstCount = await page.locator("".csv-stats"").textContent();

    // Upload second CSV
    await uploadCSV(page, ""tests/fixtures/inventory-2.csv"");
    const secondCount = await page.locator("".csv-stats"").textContent();

    // Counts should be different
    expect(firstCount).not.toBe(secondCount);
  });
});
```

### Filter and Export Tests

```typescript
// tests/e2e/filters-export.spec.ts
import { test, expect } from ""@playwright/test"";

describe(""Filters and Export"", () => {
  test(""applies bracket filter"", async ({ page }) => {
    await page.goto(""/"");
    await selectCommander(page, ""Atraxa, Praetors' Voice"");

    // Select bracket
    await page.selectOption('[data-testid=""bracket-filter""]', ""cedh"");

    // Wait for data reload
    await page.waitForResponse(/json\.edhrec\.com/);

    // Verify URL includes bracket
    expect(page.url()).toContain(""cedh"");
  });

  test(""combines multiple filters"", async ({ page }) => {
    await page.goto(""/"");
    await selectCommander(page, ""Atraxa, Praetors' Voice"");

    // Apply multiple filters
    await page.selectOption('[data-testid=""bracket-filter""]', ""core"");
    await page.selectOption('[data-testid=""modifier-filter""]', ""budget"");
    await page.selectOption('[data-testid=""page-type""]', ""average-decks"");

    // Verify all filters reflected
    await page.waitForResponse(/json\.edhrec\.com.*core.*budget/);
  });

  test(""exports decklist"", async ({ page }) => {
    await page.goto(""/"");
    await selectCommander(page, ""Atraxa, Praetors' Voice"");

    // Wait for cards to load
    await page.waitForSelector("".card-table"");

    // Click export
    const downloadPromise = page.waitForEvent(""download"");
    await page.click('[data-testid=""export-decklist""]');
    const download = await downloadPromise;

    // Verify filename
    expect(download.suggestedFilename()).toContain(""atraxa"");
    expect(download.suggestedFilename()).toContain("".txt"");
  });

  test(""copies decklist to clipboard"", async ({ page }) => {
    await page.goto(""/"");
    await selectCommander(page, ""Atraxa, Praetors' Voice"");
    await page.waitForSelector("".card-table"");

    // Click copy
    await page.click('[data-testid=""copy-decklist""]');

    // Verify success notification
    await expect(page.locator("".notice"")).toContainText(""Copied"");

    // Verify clipboard (requires clipboard permissions)
    const clipboardText = await page.evaluate(() => navigator.clipboard.readText());
    expect(clipboardText).toContain(""Sol Ring"");
  });
});
```

### Mobile-Specific Tests

```typescript
// tests/e2e/mobile.spec.ts
import { test, expect, devices } from ""@playwright/test"";

test.use(devices[""iPhone 13""]);

describe(""Mobile Experience"", () => {
  test(""toolbar is accessible on mobile"", async ({ page }) => {
    await page.goto(""/"");

    // Toolbar should be visible
    await expect(page.locator("".toolkit-header"")).toBeVisible();

    // Buttons should be tappable (44x44px minimum)
    const buttons = page.locator("".toolkit-header button"");
    const count = await buttons.count();

    for (let i = 0; i < count; i++) {
      const box = await buttons.nth(i).boundingBox();
      expect(box.width).toBeGreaterThanOrEqual(44);
      expect(box.height).toBeGreaterThanOrEqual(44);
    }
  });

  test(""card table scrollable on mobile"", async ({ page }) => {
    await page.goto(""/"");
    await selectCommander(page, ""Atraxa, Praetors' Voice"");

    // Wait for table
    await page.waitForSelector("".card-table"");

    // Should be scrollable
    const isScrollable = await page.evaluate(() => {
      const table = document.querySelector("".card-table"");
      return table.scrollHeight > table.clientHeight;
    });

    expect(isScrollable).toBe(true);
  });
});
```

### Visual Regression Tests

```typescript
// tests/e2e/visual-regression.spec.ts
import { test, expect } from ""@playwright/test"";

test(""homepage matches snapshot"", async ({ page }) => {
  await page.goto(""/"");
  await expect(page).toHaveScreenshot(""homepage.png"");
});

test(""commander display matches snapshot"", async ({ page }) => {
  await page.goto(""/"");
  await selectCommander(page, ""Atraxa, Praetors' Voice"");
  await page.waitForSelector("".commander-display"");

  await expect(page.locator("".commander-display"")).toHaveScreenshot(""commander-display.png"");
});

test(""card table matches snapshot"", async ({ page }) => {
  await page.goto(""/"");
  await selectCommander(page, ""Atraxa, Praetors' Voice"");
  await page.waitForSelector("".card-table"");

  await expect(page.locator("".card-table"")).toHaveScreenshot(
    ""card-table.png"",
    { maxDiffPixels: 100 } // Allow minor rendering differences
  );
});
```

## Technical Considerations

### Files to Create

- `tests/e2e/commander-search.spec.ts` - Search workflows
- `tests/e2e/csv-upload.spec.ts` - CSV upload scenarios
- `tests/e2e/filters-export.spec.ts` - Filters and export
- `tests/e2e/mobile.spec.ts` - Mobile-specific tests
- `tests/e2e/visual-regression.spec.ts` - Screenshot comparisons
- `tests/fixtures/` - Test data files

### Test Data Fixtures

```csv
<!-- tests/fixtures/inventory-valid.csv -->
Name,Quantity,Foil,Set
Sol Ring,1,No,C21
Command Tower,1,No,C21
Arcane Signet,1,No,C21
```

### Playwright Configuration Updates

```typescript
// playwright.config.ts
export default defineConfig({
  testDir: ""./tests/e2e"",
  fullyParallel: true,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,

  use: {
    baseURL: ""http://localhost:5173"",
    trace: ""on-first-retry"",
    screenshot: ""only-on-failure"",
    video: ""retain-on-failure"",
  },

  projects: [
    { name: ""chromium"", use: devices[""Desktop Chrome""] },
    { name: ""firefox"", use: devices[""Desktop Firefox""] },
    { name: ""webkit"", use: devices[""Desktop Safari""] },
    { name: ""mobile-chrome"", use: devices[""Pixel 5""] },
    { name: ""mobile-safari"", use: devices[""iPhone 13""] },
  ],
});
```

## Implementation Plan

### Phase 1: Core Workflows (Day 1)

1. Commander search tests
2. CSV upload tests
3. Filter application tests

### Phase 2: Edge Cases (Day 2)

1. Error scenarios
2. Mobile-specific tests
3. Large dataset tests

### Phase 3: Visual Regression (Day 3)

1. Screenshot baselines
2. Component snapshots
3. Cross-browser testing

## Acceptance Criteria

- [ ] 80%+ coverage of user workflows
- [ ] All critical paths tested
- [ ] Mobile-specific tests pass
- [ ] Visual regression tests baseline created
- [ ] CI runs all E2E tests
- [ ] Tests run in < 5 minutes
- [ ] Flaky tests identified and fixed

## Related Issues

- Testing infrastructure
- CI/CD improvements
- Quality assurance

## References

- [Playwright Best Practices](https://playwright.dev/docs/best-practices)
- [Visual Testing - Playwright](https://playwright.dev/docs/test-snapshots)
- [Mobile Testing - Playwright](https://playwright.dev/docs/emulation)


Acceptance Criteria:
  1. 80%+ coverage of user workflows
  2. All critical paths tested
  3. Mobile-specific tests pass
  4. Visual regression tests baseline created
  5. CI runs all E2E tests
  6. Tests run in < 5 minutes
  7. Flaky tests identified and fixed","","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/101","1. 80%+ coverage of user workflows | 2. All critical paths tested | 3. Mobile-specific tests pass | 4. Visual regression tests baseline created | 5. CI runs all E2E tests | 6. Tests run in < 5 minutes | 7. Flaky tests identified and fixed"
"gh-101-epic-story-1","gh-101-epic-story-1","AUTO","Story","Phase 1: Core Workflows (Day 1) - Expand E2E Test Coverage","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/101

1. Commander search tests
2. CSV upload tests
3. Filter application tests","gh-101-epic","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/101","1. 80%+ coverage of user workflows | 2. All critical paths tested | 3. Mobile-specific tests pass | 4. Visual regression tests baseline created | 5. CI runs all E2E tests | 6. Tests run in < 5 minutes | 7. Flaky tests identified and fixed"
"gh-101-epic-story-1-task-1","gh-101-epic-story-1-task-1","AUTO","Sub-task","Commander search tests","Derived from Phase 1: Core Workflows (Day 1)","gh-101-epic-story-1","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/101",""
"gh-101-epic-story-1-task-2","gh-101-epic-story-1-task-2","AUTO","Sub-task","CSV upload tests","Derived from Phase 1: Core Workflows (Day 1)","gh-101-epic-story-1","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/101",""
"gh-101-epic-story-1-task-3","gh-101-epic-story-1-task-3","AUTO","Sub-task","Filter application tests","Derived from Phase 1: Core Workflows (Day 1)","gh-101-epic-story-1","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/101",""
"gh-101-epic-story-2","gh-101-epic-story-2","AUTO","Story","Phase 2: Edge Cases (Day 2) - Expand E2E Test Coverage","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/101

1. Error scenarios
2. Mobile-specific tests
3. Large dataset tests","gh-101-epic","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/101","1. 80%+ coverage of user workflows | 2. All critical paths tested | 3. Mobile-specific tests pass | 4. Visual regression tests baseline created | 5. CI runs all E2E tests | 6. Tests run in < 5 minutes | 7. Flaky tests identified and fixed"
"gh-101-epic-story-2-task-1","gh-101-epic-story-2-task-1","AUTO","Sub-task","Error scenarios","Derived from Phase 2: Edge Cases (Day 2)","gh-101-epic-story-2","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/101",""
"gh-101-epic-story-2-task-2","gh-101-epic-story-2-task-2","AUTO","Sub-task","Mobile-specific tests","Derived from Phase 2: Edge Cases (Day 2)","gh-101-epic-story-2","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/101",""
"gh-101-epic-story-2-task-3","gh-101-epic-story-2-task-3","AUTO","Sub-task","Large dataset tests","Derived from Phase 2: Edge Cases (Day 2)","gh-101-epic-story-2","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/101",""
"gh-101-epic-story-3","gh-101-epic-story-3","AUTO","Story","Phase 3: Visual Regression (Day 3) - Expand E2E Test Coverage","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/101

1. Screenshot baselines
2. Component snapshots
3. Cross-browser testing","gh-101-epic","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/101","1. 80%+ coverage of user workflows | 2. All critical paths tested | 3. Mobile-specific tests pass | 4. Visual regression tests baseline created | 5. CI runs all E2E tests | 6. Tests run in < 5 minutes | 7. Flaky tests identified and fixed"
"gh-101-epic-story-3-task-1","gh-101-epic-story-3-task-1","AUTO","Sub-task","Screenshot baselines","Derived from Phase 3: Visual Regression (Day 3)","gh-101-epic-story-3","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/101",""
"gh-101-epic-story-3-task-2","gh-101-epic-story-3-task-2","AUTO","Sub-task","Component snapshots","Derived from Phase 3: Visual Regression (Day 3)","gh-101-epic-story-3","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/101",""
"gh-101-epic-story-3-task-3","gh-101-epic-story-3-task-3","AUTO","Sub-task","Cross-browser testing","Derived from Phase 3: Visual Regression (Day 3)","gh-101-epic-story-3","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/101",""
"gh-100-epic","gh-100-epic","AUTO","Epic","[GH#100] Set Up Automated Dependency Updates","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/100
Labels: [object Object], [object Object], [object Object]

# Set Up Automated Dependency Updates

**Priority:** Low  
**Type:** DevOps / Maintenance  
**Component:** CI/CD, Dependencies  
**Effort:** Small (1 day)

## Problem

Dependencies are not automatically updated, leading to security vulnerabilities and outdated packages:

### Current Issues

- Manual dependency updates are time-consuming
- Security vulnerabilities may go unnoticed
- Missing out on bug fixes and performance improvements
- No automated testing of dependency updates
- Breaking changes discovered too late

### User Impact

- **Low:** Does not directly affect users immediately
- Security vulnerabilities in dependencies pose risk
- Missing performance improvements
- Technical debt accumulates over time

## Proposed Solution

### Dependabot Configuration

Enable GitHub Dependabot for automated dependency updates:

```yaml
# .github/dependabot.yml
version: 2
updates:
  # npm dependencies
  - package-ecosystem: ""npm""
    directory: ""/""
    schedule:
      interval: ""weekly""
      day: ""monday""
      time: ""09:00""
    open-pull-requests-limit: 5
    reviewers:
      - ""kmcgarry1""
    assignees:
      - ""kmcgarry1""
    commit-message:
      prefix: ""chore""
      include: ""scope""
    labels:
      - ""dependencies""
      - ""automated""

    # Group minor/patch updates
    groups:
      development-dependencies:
        dependency-type: ""development""
        update-types:
          - ""minor""
          - ""patch""
      production-dependencies:
        dependency-type: ""production""
        update-types:
          - ""minor""
          - ""patch""

    # Ignore specific packages
    ignore:
      # Wait for stable releases
      - dependency-name: ""vue""
        update-types: [""version-update:semver-major""]
      - dependency-name: ""vite""
        update-types: [""version-update:semver-major""]

  # GitHub Actions
  - package-ecosystem: ""github-actions""
    directory: ""/""
    schedule:
      interval: ""weekly""
    labels:
      - ""ci""
      - ""automated""
```

### Renovate Bot Alternative

More powerful than Dependabot with better configuration:

```json
// renovate.json
{
  ""extends"": [""config:base""],
  ""schedule"": [""before 10am on monday""],
  ""labels"": [""dependencies""],
  ""assignees"": [""kmcgarry1""],
  ""packageRules"": [
    {
      ""matchUpdateTypes"": [""minor"", ""patch""],
      ""groupName"": ""all non-major dependencies"",
      ""groupSlug"": ""all-minor-patch"",
      ""automerge"": true
    },
    {
      ""matchDepTypes"": [""devDependencies""],
      ""matchUpdateTypes"": [""minor"", ""patch""],
      ""automerge"": true
    },
    {
      ""matchPackagePatterns"": [""^eslint"", ""^prettier""],
      ""groupName"": ""linters"",
      ""automerge"": true
    },
    {
      ""matchPackagePatterns"": [""^@types/""],
      ""groupName"": ""TypeScript types"",
      ""automerge"": true
    }
  ],
  ""vulnerabilityAlerts"": {
    ""enabled"": true,
    ""labels"": [""security""],
    ""assignees"": [""kmcgarry1""]
  },
  ""prCreation"": ""not-pending"",
  ""prConcurrentLimit"": 5,
  ""prHourlyLimit"": 0
}
```

### CI Pipeline for Dependency PRs

```yaml
# .github/workflows/dependency-test.yml
name: Test Dependency Updates

on:
  pull_request:
    types: [opened, synchronize]
    paths:
      - ""package.json""
      - ""package-lock.json""

jobs:
  test-dependencies:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ""18""
          cache: ""npm""

      - name: Install dependencies
        run: npm ci

      - name: Run linter
        run: npm run lint

      - name: Run type check
        run: npm run build

      - name: Run unit tests
        run: npm run test:unit:coverage

      - name: Run E2E tests
        run: npm run test:e2e

      - name: Check bundle size
        run: npm run size

      - name: Comment on PR
        if: always()
        uses: actions/github-script@v7
        with:
          script: |
            const fs = require('fs');
            const coverage = fs.readFileSync('coverage/coverage-summary.json', 'utf8');
            const { total } = JSON.parse(coverage);

            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `## Dependency Update Test Results
              
              âœ… All tests passed
              ðŸ“Š Coverage: ${total.lines.pct}%
              ðŸ“¦ Bundle size: within limits
              `
            });
```

### Auto-merge for Safe Updates

```yaml
# .github/workflows/auto-merge-dependabot.yml
name: Auto-merge Dependabot PRs

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  auto-merge:
    runs-on: ubuntu-latest
    if: github.actor == 'dependabot[bot]'

    steps:
      - name: Check PR labels
        id: check-labels
        uses: actions/github-script@v7
        with:
          script: |
            const labels = context.payload.pull_request.labels.map(l => l.name);
            const isMinorOrPatch = labels.includes('dependencies') && 
                                   !context.payload.pull_request.title.includes('major');
            return isMinorOrPatch;

      - name: Auto-approve PR
        if: steps.check-labels.outputs.result == 'true'
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.pulls.createReview({
              owner: context.repo.owner,
              repo: context.repo.repo,
              pull_number: context.payload.pull_request.number,
              event: 'APPROVE'
            });

      - name: Enable auto-merge
        if: steps.check-labels.outputs.result == 'true'
        run: gh pr merge --auto --squash ""${{ github.event.pull_request.number }}""
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

## Technical Considerations

### Files to Create

- `.github/dependabot.yml` - Dependabot configuration
- `renovate.json` - Renovate configuration (alternative)
- `.github/workflows/dependency-test.yml` - Test pipeline
- `.github/workflows/auto-merge-dependabot.yml` - Auto-merge workflow

### Update Strategy

**Auto-merge (Safe):**

- Patch updates (1.0.x â†’ 1.0.y)
- Minor updates for dev dependencies
- Type definition updates

**Manual Review (Risky):**

- Major version bumps
- Production dependency minors
- Framework updates (Vue, Vite)

**Security Alerts:**

- Always create immediate PR
- High priority review
- Auto-merge after CI passes

## Implementation Plan

### Phase 1: Dependabot Setup (Day 1)

1. Create `.github/dependabot.yml`
2. Configure update schedule
3. Set up grouping rules
4. Test with a few dependencies

### Phase 2: CI Integration (Day 1)

1. Create dependency-test workflow
2. Add bundle size checks
3. Configure auto-merge for safe updates
4. Test auto-merge pipeline

### Phase 3: Monitoring (Ongoing)

1. Review weekly dependency PRs
2. Monitor for breaking changes
3. Adjust ignore rules as needed
4. Update docs with process

## Acceptance Criteria

- [ ] Dependabot creates weekly PRs
- [ ] CI runs on all dependency PRs
- [ ] Minor/patch updates auto-merge
- [ ] Security alerts create urgent PRs
- [ ] Bundle size verified in CI
- [ ] Breaking changes detected before merge
- [ ] Documentation updated

## Benefits

**Security:**

- Automatic security patch updates
- Faster response to CVEs
- Reduced attack surface

**Maintenance:**

- Less manual work
- Stay current with ecosystem
- Catch breaking changes early

**Performance:**

- Access to latest optimizations
- Bug fixes automatically applied
- Framework improvements

## Related Issues

- Security improvements
- Developer experience
- CI/CD enhancements

## References

- [Dependabot - GitHub](https://docs.github.com/en/code-security/dependabot)
- [Renovate Bot](https://docs.renovatebot.com/)
- [npm Audit](https://docs.npmjs.com/cli/v8/commands/npm-audit)


Acceptance Criteria:
  1. Dependabot creates weekly PRs
  2. CI runs on all dependency PRs
  3. Minor/patch updates auto-merge
  4. Security alerts create urgent PRs
  5. Bundle size verified in CI
  6. Breaking changes detected before merge
  7. Documentation updated","","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100","1. Dependabot creates weekly PRs | 2. CI runs on all dependency PRs | 3. Minor/patch updates auto-merge | 4. Security alerts create urgent PRs | 5. Bundle size verified in CI | 6. Breaking changes detected before merge | 7. Documentation updated"
"gh-100-epic-story-1","gh-100-epic-story-1","AUTO","Story","Phase 1: Dependabot Setup (Day 1) - Set Up Automated Dependency Updates","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/100

1. Create `.github/dependabot.yml`
2. Configure update schedule
3. Set up grouping rules
4. Test with a few dependencies","gh-100-epic","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100","1. Dependabot creates weekly PRs | 2. CI runs on all dependency PRs | 3. Minor/patch updates auto-merge | 4. Security alerts create urgent PRs | 5. Bundle size verified in CI | 6. Breaking changes detected before merge | 7. Documentation updated"
"gh-100-epic-story-1-task-1","gh-100-epic-story-1-task-1","AUTO","Sub-task","Create `.github/dependabot.yml`","Derived from Phase 1: Dependabot Setup (Day 1)","gh-100-epic-story-1","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100",""
"gh-100-epic-story-1-task-2","gh-100-epic-story-1-task-2","AUTO","Sub-task","Configure update schedule","Derived from Phase 1: Dependabot Setup (Day 1)","gh-100-epic-story-1","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100",""
"gh-100-epic-story-1-task-3","gh-100-epic-story-1-task-3","AUTO","Sub-task","Set up grouping rules","Derived from Phase 1: Dependabot Setup (Day 1)","gh-100-epic-story-1","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100",""
"gh-100-epic-story-1-task-4","gh-100-epic-story-1-task-4","AUTO","Sub-task","Test with a few dependencies","Derived from Phase 1: Dependabot Setup (Day 1)","gh-100-epic-story-1","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100",""
"gh-100-epic-story-2","gh-100-epic-story-2","AUTO","Story","Phase 2: CI Integration (Day 1) - Set Up Automated Dependency Updates","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/100

1. Create dependency-test workflow
2. Add bundle size checks
3. Configure auto-merge for safe updates
4. Test auto-merge pipeline","gh-100-epic","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100","1. Dependabot creates weekly PRs | 2. CI runs on all dependency PRs | 3. Minor/patch updates auto-merge | 4. Security alerts create urgent PRs | 5. Bundle size verified in CI | 6. Breaking changes detected before merge | 7. Documentation updated"
"gh-100-epic-story-2-task-1","gh-100-epic-story-2-task-1","AUTO","Sub-task","Create dependency-test workflow","Derived from Phase 2: CI Integration (Day 1)","gh-100-epic-story-2","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100",""
"gh-100-epic-story-2-task-2","gh-100-epic-story-2-task-2","AUTO","Sub-task","Add bundle size checks","Derived from Phase 2: CI Integration (Day 1)","gh-100-epic-story-2","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100",""
"gh-100-epic-story-2-task-3","gh-100-epic-story-2-task-3","AUTO","Sub-task","Configure auto-merge for safe updates","Derived from Phase 2: CI Integration (Day 1)","gh-100-epic-story-2","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100",""
"gh-100-epic-story-2-task-4","gh-100-epic-story-2-task-4","AUTO","Sub-task","Test auto-merge pipeline","Derived from Phase 2: CI Integration (Day 1)","gh-100-epic-story-2","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100",""
"gh-100-epic-story-3","gh-100-epic-story-3","AUTO","Story","Phase 3: Monitoring (Ongoing) - Set Up Automated Dependency Updates","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/100

1. Review weekly dependency PRs
2. Monitor for breaking changes
3. Adjust ignore rules as needed
4. Update docs with process","gh-100-epic","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100","1. Dependabot creates weekly PRs | 2. CI runs on all dependency PRs | 3. Minor/patch updates auto-merge | 4. Security alerts create urgent PRs | 5. Bundle size verified in CI | 6. Breaking changes detected before merge | 7. Documentation updated"
"gh-100-epic-story-3-task-1","gh-100-epic-story-3-task-1","AUTO","Sub-task","Review weekly dependency PRs","Derived from Phase 3: Monitoring (Ongoing)","gh-100-epic-story-3","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100",""
"gh-100-epic-story-3-task-2","gh-100-epic-story-3-task-2","AUTO","Sub-task","Monitor for breaking changes","Derived from Phase 3: Monitoring (Ongoing)","gh-100-epic-story-3","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100",""
"gh-100-epic-story-3-task-3","gh-100-epic-story-3-task-3","AUTO","Sub-task","Adjust ignore rules as needed","Derived from Phase 3: Monitoring (Ongoing)","gh-100-epic-story-3","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100",""
"gh-100-epic-story-3-task-4","gh-100-epic-story-3-task-4","AUTO","Sub-task","Update docs with process","Derived from Phase 3: Monitoring (Ongoing)","gh-100-epic-story-3","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/100",""
"gh-99-epic","gh-99-epic","AUTO","Epic","[GH#99] Add Comprehensive Component Documentation","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/99
Labels: [object Object], [object Object], [object Object]

# Add Comprehensive Component Documentation

**Priority:** Low  
**Type:** Documentation  
**Component:** All Components  
**Effort:** Medium (2-3 days)

## Problem

Components lack comprehensive documentation, making it difficult for new contributors to understand usage and maintain code:

### Current Issues

- No JSDoc comments on props and emits
- Missing component usage examples
- Unclear component responsibilities
- No documentation for complex composables
- Difficult for new contributors to onboard
- No Storybook or component playground

### User Impact

- **Low:** Does not affect end users directly
- Longer onboarding time for contributors
- Increased maintenance difficulty
- Higher chance of breaking changes
- Reduced code discoverability

## Proposed Solution

### Component Documentation Standards

Add comprehensive JSDoc documentation to all components:

````vue
<!-- src/components/Card.vue -->
<script setup lang=""ts"">
/**
 * Card component - Reusable container with consistent styling
 *
 * @example
 * ```vue
 * <Card padding=""p-6"" rounded=""rounded-xl"">
 *   <h2>Title</h2>
 *   <p>Content</p>
 * </Card>
 * ```
 */

/**
 * Component props
 */
interface Props {
  /**
   * Padding classes (Tailwind)
   * @default ""p-4""
   * @example ""p-6"" | ""px-4 py-2""
   */
  padding?: string;

  /**
   * Border radius classes (Tailwind)
   * @default ""rounded-lg""
   * @example ""rounded-xl"" | ""rounded-2xl""
   */
  rounded?: string;

  /**
   * Box shadow classes (Tailwind)
   * @default ""shadow""
   * @example ""shadow-lg"" | ""shadow-2xl""
   */
  shadow?: string;

  /**
   * Border classes (Tailwind)
   * @default """"
   * @example ""border border-slate-200""
   */
  border?: string;

  /**
   * Background classes (Tailwind)
   * @default ""bg-white dark:bg-slate-800""
   */
  background?: string;
}

const props = withDefaults(defineProps<Props>(), {
  padding: ""p-4"",
  rounded: ""rounded-lg"",
  shadow: ""shadow"",
  border: """",
  background: ""bg-white dark:bg-slate-800"",
});
</script>
````

### Composable Documentation

````typescript
// src/composables/useGlobalNotices.ts
/**
 * Global toast notification system
 *
 * Manages a queue of user-facing notifications that appear
 * at the top-right of the screen. Supports info, success,
 * error, and warning variants with auto-dismiss.
 *
 * @example
 * ```typescript
 * const { notifySuccess, notifyError } = useGlobalNotices();
 *
 * // Show success message
 * notifySuccess('Settings saved!');
 *
 * // Show error with custom duration
 * notifyError('Failed to load data', 'API Error', {
 *   duration: 5000,
 * });
 * ```
 */
export const useGlobalNotices = () => {
  /**
   * Show an informational notice
   *
   * @param message - Main message text
   * @param title - Optional title (shown above message)
   * @param options - Additional options
   * @param options.duration - Auto-dismiss duration in ms (default: 3000)
   * @param options.action - Optional action callback
   * @param options.actionLabel - Optional action button label
   */
  const notifyInfo = (message: string, title?: string, options?: NoticeOptions): void => {
    // Implementation
  };

  // ... other methods
};
````

### API Documentation

````typescript
// src/api/scryfallApi.ts
/**
 * Fetch a single card by name from Scryfall API
 *
 * Uses fuzzy matching to find cards even with typos or
 * partial names. Handles double-faced cards by stripping
 * the back face name.
 *
 * @param name - Card name (can include // for double-faced)
 * @returns Promise resolving to card data or null if not found
 * @throws {AppError} If API request fails
 *
 * @example
 * ```typescript
 * const card = await getCardByName('Lightning Bolt');
 * if (card) {
 *   console.log(card.name, card.prices.usd);
 * }
 * ```
 */
export async function getCardByName(name: string): Promise<ScryfallCard | null> {
  // Implementation
}

/**
 * Fetch multiple cards in batches from Scryfall API
 *
 * Batches requests into groups of 75 cards (API limit) with
 * 300ms delay between batches to respect rate limiting.
 *
 * @param names - Array of card names to fetch
 * @returns Promise resolving to Map of name â†’ card data
 *
 * @example
 * ```typescript
 * const cards = await getCardsByNames([
 *   'Sol Ring',
 *   'Command Tower',
 *   'Arcane Signet',
 * ]);
 *
 * for (const [name, card] of cards) {
 *   console.log(`${name}: $${card.prices.usd}`);
 * }
 * ```
 */
export async function getCardsByNames(names: string[]): Promise<Map<string, ScryfallCard>> {
  // Implementation
}
````

## Technical Considerations

### Files to Document

**High Priority**

- All composables (8 files)
- Core components (CButton, CText, Card)
- API files (scryfallApi.ts, errorHandler.ts)
- Main components (EdhrecReader, CommanderSearch, CardTable)

**Medium Priority**

- Helper utilities (slugifyCommander, csvValidator)
- Type definitions (cards.ts, enums)
- Minor components

**Low Priority**

- Test files (add describe blocks)
- Configuration files

### Documentation Tools

**Option 1: JSDoc + TypeDoc**

```bash
npm install -D typedoc
```

```json
// package.json
{
  ""scripts"": {
    ""docs"": ""typedoc --out docs/api src""
  }
}
```

**Option 2: VitePress Component Docs**

```bash
npm install -D vitepress
```

**Option 3: Storybook (Future)**

- Full component playground
- Interactive examples
- Visual regression testing

### README per Directory

````markdown
<!-- src/components/README.md -->

# Components

This directory contains all Vue components used in Commander Scout.

## Organization

- `/core` - Reusable UI primitives (buttons, text, cards)
- `/helpers` - Utility files and type definitions
- Root - Feature components

## Core Components

### Card.vue

Reusable container component with customizable styling.

**Props:**

- `padding` (string) - Tailwind padding classes
- `rounded` (string) - Tailwind border radius
- ...

**Usage:**

```vue
<Card padding=""p-6"">
  <h2>Title</h2>
</Card>
```
````

### CButton.vue

Accessible button component with variants.

...

```

## Implementation Plan

### Phase 1: Core Documentation (Day 1)

1. Add JSDoc to composables
2. Document API functions
3. Add README to composables/
4. Add README to api/

### Phase 2: Component Documentation (Day 2)

1. Add JSDoc to core components
2. Document main feature components
3. Add examples to complex components
4. Add README to components/

### Phase 3: Automated Documentation (Day 3)

1. Set up TypeDoc
2. Generate API documentation
3. Add docs npm script
4. Update CONTRIBUTING.md

## Acceptance Criteria

- [ ] All composables have JSDoc comments
- [ ] All public API functions documented
- [ ] Core components have usage examples
- [ ] Each directory has README
- [ ] TypeDoc generates clean API docs
- [ ] npm run docs works without errors
- [ ] CONTRIBUTING.md references documentation

## Example Output

### Generated TypeDoc Site

```

docs/api/
â”œâ”€â”€ index.html
â”œâ”€â”€ modules.html
â”œâ”€â”€ composables/
â”‚ â”œâ”€â”€ useTheme.html
â”‚ â”œâ”€â”€ useGlobalNotices.html
â”‚ â””â”€â”€ ...
â”œâ”€â”€ api/
â”‚ â”œâ”€â”€ scryfallApi.html
â”‚ â””â”€â”€ errorHandler.html
â””â”€â”€ components/
â””â”€â”€ ...

```

## Related Issues

- Developer experience improvements
- Onboarding documentation

## References

- [JSDoc - Documentation](https://jsdoc.app/)
- [TypeDoc - API Documentation](https://typedoc.org/)
- [VitePress - Vue Documentation](https://vitepress.dev/)
- [TSDoc - TypeScript Standard](https://tsdoc.org/)
```


Acceptance Criteria:
  1. All composables have JSDoc comments
  2. All public API functions documented
  3. Core components have usage examples
  4. Each directory has README
  5. TypeDoc generates clean API docs
  6. npm run docs works without errors
  7. CONTRIBUTING.md references documentation","","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99","1. All composables have JSDoc comments | 2. All public API functions documented | 3. Core components have usage examples | 4. Each directory has README | 5. TypeDoc generates clean API docs | 6. npm run docs works without errors | 7. CONTRIBUTING.md references documentation"
"gh-99-epic-story-1","gh-99-epic-story-1","AUTO","Story","Phase 1: Core Documentation (Day 1) - Add Comprehensive Component Documentation","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/99

1. Add JSDoc to composables
2. Document API functions
3. Add README to composables/
4. Add README to api/","gh-99-epic","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99","1. All composables have JSDoc comments | 2. All public API functions documented | 3. Core components have usage examples | 4. Each directory has README | 5. TypeDoc generates clean API docs | 6. npm run docs works without errors | 7. CONTRIBUTING.md references documentation"
"gh-99-epic-story-1-task-1","gh-99-epic-story-1-task-1","AUTO","Sub-task","Add JSDoc to composables","Derived from Phase 1: Core Documentation (Day 1)","gh-99-epic-story-1","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99",""
"gh-99-epic-story-1-task-2","gh-99-epic-story-1-task-2","AUTO","Sub-task","Document API functions","Derived from Phase 1: Core Documentation (Day 1)","gh-99-epic-story-1","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99",""
"gh-99-epic-story-1-task-3","gh-99-epic-story-1-task-3","AUTO","Sub-task","Add README to composables/","Derived from Phase 1: Core Documentation (Day 1)","gh-99-epic-story-1","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99",""
"gh-99-epic-story-1-task-4","gh-99-epic-story-1-task-4","AUTO","Sub-task","Add README to api/","Derived from Phase 1: Core Documentation (Day 1)","gh-99-epic-story-1","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99",""
"gh-99-epic-story-2","gh-99-epic-story-2","AUTO","Story","Phase 2: Component Documentation (Day 2) - Add Comprehensive Component Documentation","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/99

1. Add JSDoc to core components
2. Document main feature components
3. Add examples to complex components
4. Add README to components/","gh-99-epic","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99","1. All composables have JSDoc comments | 2. All public API functions documented | 3. Core components have usage examples | 4. Each directory has README | 5. TypeDoc generates clean API docs | 6. npm run docs works without errors | 7. CONTRIBUTING.md references documentation"
"gh-99-epic-story-2-task-1","gh-99-epic-story-2-task-1","AUTO","Sub-task","Add JSDoc to core components","Derived from Phase 2: Component Documentation (Day 2)","gh-99-epic-story-2","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99",""
"gh-99-epic-story-2-task-2","gh-99-epic-story-2-task-2","AUTO","Sub-task","Document main feature components","Derived from Phase 2: Component Documentation (Day 2)","gh-99-epic-story-2","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99",""
"gh-99-epic-story-2-task-3","gh-99-epic-story-2-task-3","AUTO","Sub-task","Add examples to complex components","Derived from Phase 2: Component Documentation (Day 2)","gh-99-epic-story-2","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99",""
"gh-99-epic-story-2-task-4","gh-99-epic-story-2-task-4","AUTO","Sub-task","Add README to components/","Derived from Phase 2: Component Documentation (Day 2)","gh-99-epic-story-2","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99",""
"gh-99-epic-story-3","gh-99-epic-story-3","AUTO","Story","Phase 3: Automated Documentation (Day 3) - Add Comprehensive Component Documentation","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/99

1. Set up TypeDoc
2. Generate API documentation
3. Add docs npm script
4. Update CONTRIBUTING.md","gh-99-epic","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99","1. All composables have JSDoc comments | 2. All public API functions documented | 3. Core components have usage examples | 4. Each directory has README | 5. TypeDoc generates clean API docs | 6. npm run docs works without errors | 7. CONTRIBUTING.md references documentation"
"gh-99-epic-story-3-task-1","gh-99-epic-story-3-task-1","AUTO","Sub-task","Set up TypeDoc","Derived from Phase 3: Automated Documentation (Day 3)","gh-99-epic-story-3","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99",""
"gh-99-epic-story-3-task-2","gh-99-epic-story-3-task-2","AUTO","Sub-task","Generate API documentation","Derived from Phase 3: Automated Documentation (Day 3)","gh-99-epic-story-3","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99",""
"gh-99-epic-story-3-task-3","gh-99-epic-story-3-task-3","AUTO","Sub-task","Add docs npm script","Derived from Phase 3: Automated Documentation (Day 3)","gh-99-epic-story-3","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99",""
"gh-99-epic-story-3-task-4","gh-99-epic-story-3-task-4","AUTO","Sub-task","Update CONTRIBUTING.md","Derived from Phase 3: Automated Documentation (Day 3)","gh-99-epic-story-3","low-priority;maintenance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/99",""
"gh-98-epic","gh-98-epic","AUTO","Epic","[GH#98] Loading State Visibility Enhancement","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/98
Labels: [object Object], [object Object], [object Object]

# Loading State Visibility Enhancement

**Priority:** Medium  
**Type:** UX Enhancement  
**Component:** GlobalLoadingBanner, EdhrecReader, CardTable  
**Effort:** Low (< 1 day)

## Problem

While a global loading banner exists, it may not be prominent enough during long API operations (bulk Scryfall requests, EDHREC data fetching). Users might think the application has frozen, leading to confusion and repeated actions.

### Current Issues

- Loading banner may be subtle or easily overlooked
- No progress indication for multi-step operations
- Bulk Scryfall requests (75 cards per batch) lack progress feedback
- No skeleton screens showing where content will appear
- Users uncertain about wait time or current status

### User Impact

- **Medium:** Users unsure if app is working during data fetch
- May click buttons multiple times
- May refresh browser thinking app is broken
- Poor perceived performance even if actual speed is good
- Increased support inquiries

## Current Implementation

```vue
<template>
  <div v-if=""isLoading"" class=""loading-banner"">Loading...</div>
</template>
```

## Proposed Solutions

### 1. Prominent Global Loading Banner

Make loading banner more noticeable:

```vue
<template>
  <Transition name=""slide-down"">
    <div v-if=""hasActiveLoading"" class=""fixed top-0 left-0 right-0 z-50"">
      <div class=""bg-emerald-600 text-white px-6 py-3 shadow-lg"">
        <div class=""flex items-center justify-between max-w-6xl mx-auto"">
          <div class=""flex items-center gap-3"">
            <svg class=""animate-spin h-5 w-5"">
              <!-- Spinner icon -->
            </svg>

            <span class=""font-medium"">
              {{ loadingMessage }}
            </span>
          </div>

          <div v-if=""progress"" class=""text-sm"">{{ progress.current }} / {{ progress.total }}</div>
        </div>

        <div v-if=""progress"" class=""mt-2"">
          <div class=""bg-emerald-700 rounded-full h-1"">
            <div
              class=""bg-white rounded-full h-1 transition-all""
              :style=""{ width: `${(progress.current / progress.total) * 100}%` }""
            />
          </div>
        </div>
      </div>
    </div>
  </Transition>
</template>
```

### 2. Skeleton Screens

Show placeholder content while loading:

```vue
<template>
  <div class=""skeleton-card"">
    <div class=""skeleton-image"" />

    <div class=""skeleton-content"">
      <div class=""skeleton-line w-3/4"" />
      <div class=""skeleton-line w-1/2"" />
      <div class=""skeleton-line w-full"" />
    </div>
  </div>
</template>

<style>
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.skeleton-line {
  height: 1rem;
  background: linear-gradient(90deg, #e2e8f0 0%, #cbd5e1 50%, #e2e8f0 100%);
  background-size: 1000px 100%;
  animation: shimmer 2s infinite linear;
  border-radius: 0.25rem;
}
</style>
```

Usage:

```vue
<template>
  <div v-if=""isLoading"">
    <SkeletonCard v-for=""i in 3"" :key=""i"" />
  </div>
  <div v-else>
    <Card v-for=""card in cards"" :key=""card.id"" :card=""card"" />
  </div>
</template>
```

### 3. Enhanced useGlobalLoading Composable

Add progress tracking:

```typescript
// src/composables/useGlobalLoading.ts
interface LoadingState {
  id: string;
  message: string;
  progress?: {
    current: number;
    total: number;
  };
}

const loadingStates = ref<Map<string, LoadingState>>(new Map());

export const useGlobalLoading = () => {
  const startLoading = (id: string, message: string = ""Loading..."", total?: number) => {
    loadingStates.value.set(id, {
      id,
      message,
      progress: total ? { current: 0, total } : undefined,
    });
  };

  const updateProgress = (id: string, current: number) => {
    const state = loadingStates.value.get(id);
    if (state?.progress) {
      state.progress.current = current;
    }
  };

  const stopLoading = (id: string) => {
    loadingStates.value.delete(id);
  };

  return {
    loadingStates,
    startLoading,
    updateProgress,
    stopLoading,
  };
};
```

### 4. Scryfall Progress Tracking

Update API calls to show progress:

```typescript
// src/api/scryfallApi.ts
export const fetchBulkCardData = async (
  cardNames: string[],
  onProgress?: (current: number, total: number) => void
) => {
  const batches = chunk(cardNames, 75);
  const { startLoading, updateProgress, stopLoading } = useGlobalLoading();

  startLoading(""scryfall-bulk"", ""Loading card data..."", batches.length);

  for (let i = 0; i < batches.length; i++) {
    await fetchBatch(batches[i]);
    updateProgress(""scryfall-bulk"", i + 1);
    onProgress?.(i + 1, batches.length);

    if (i < batches.length - 1) {
      await delay(300); // Rate limit respect
    }
  }

  stopLoading(""scryfall-bulk"");
};
```

## Implementation Plan

### Phase 1: Enhanced Banner (2 hours)

1. Make banner full-width and fixed top
2. Add animated spinner icon
3. Improve colors and contrast
4. Add slide-down transition

### Phase 2: Progress Tracking (3 hours)

1. Update useGlobalLoading with progress support
2. Modify Scryfall API to report progress
3. Show progress bar in banner
4. Display current/total counts

### Phase 3: Skeleton Screens (3 hours)

1. Create reusable skeleton components
2. Add to card list, search results
3. Implement shimmer animation
4. Match actual content layout

### Phase 4: Contextual Messages (1 hour)

1. Add specific loading messages per operation
2. Show estimated time for known operations
3. Add cancel button for long operations

## Technical Details

### Files to Modify

- `src/components/GlobalLoadingBanner.vue` - Enhanced banner
- `src/composables/useGlobalLoading.ts` - Progress tracking
- `src/api/scryfallApi.ts` - Report progress
- `src/components/SkeletonCard.vue` - New component
- `src/components/CardTable.vue` - Use skeleton while loading

### Animation Styles

```css
/* Shimmer effect */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    theme(""colors.slate.200"") 0%,
    theme(""colors.slate.300"") 50%,
    theme(""colors.slate.200"") 100%
  );
  background-size: 1000px 100%;
  animation: shimmer 2s infinite linear;
}
```

## Acceptance Criteria

- [ ] Loading banner is immediately visible when loading starts
- [ ] Progress shown for operations with known length
- [ ] Skeleton screens appear for card lists
- [ ] Loading messages are descriptive and contextual
- [ ] Smooth transitions when content appears
- [ ] Banner auto-dismisses when loading completes
- [ ] Multiple simultaneous loaders handled correctly
- [ ] Accessible to screen readers (aria-live)
- [ ] No layout shift when banner appears/disappears
- [ ] Cancel button works for long operations

## User Experience Improvements

**Before:**

- User clicks search
- Screen appears frozen
- No feedback for 3-5 seconds
- Cards suddenly appear

**After:**

- User clicks search
- Banner slides down immediately
- ""Fetching EDHREC recommendations..."" shown
- Progress: ""Loading 2 of 5 batches...""
- Skeleton cards appear
- Real cards fade in smoothly

## Performance Considerations

- Skeleton screens should be lightweight (CSS-only)
- Avoid re-rendering banner on every progress update
- Debounce progress updates if too frequent
- Use CSS animations over JavaScript

## Related Issues

- #72 - Empty states (showing initial state)
- #71 - Information density (affects toolbar density)

## References

- [Skeleton Screens Best Practices](https://www.nngroup.com/articles/skeleton-screens/)
- [Progress Indicators](https://www.nngroup.com/articles/progress-indicators/)
- [Material Design Progress Indicators](https://material.io/components/progress-indicators)
- [ARIA Live Regions](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions)


Acceptance Criteria:
  1. Loading banner is immediately visible when loading starts
  2. Progress shown for operations with known length
  3. Skeleton screens appear for card lists
  4. Loading messages are descriptive and contextual
  5. Smooth transitions when content appears
  6. Banner auto-dismisses when loading completes
  7. Multiple simultaneous loaders handled correctly
  8. Accessible to screen readers (aria-live)
  9. No layout shift when banner appears/disappears
  10. Cancel button works for long operations","","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-98-epic-story-1","gh-98-epic-story-1","AUTO","Story","Phase 1: Enhanced Banner (2 hours) - Loading State Visibility Enhancement","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/98

1. Make banner full-width and fixed top
2. Add animated spinner icon
3. Improve colors and contrast
4. Add slide-down transition","gh-98-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-98-epic-story-1-task-1","gh-98-epic-story-1-task-1","AUTO","Sub-task","Make banner full-width and fixed top","Derived from Phase 1: Enhanced Banner (2 hours)","gh-98-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-98-epic-story-1-task-2","gh-98-epic-story-1-task-2","AUTO","Sub-task","Add animated spinner icon","Derived from Phase 1: Enhanced Banner (2 hours)","gh-98-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-98-epic-story-1-task-3","gh-98-epic-story-1-task-3","AUTO","Sub-task","Improve colors and contrast","Derived from Phase 1: Enhanced Banner (2 hours)","gh-98-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-98-epic-story-1-task-4","gh-98-epic-story-1-task-4","AUTO","Sub-task","Add slide-down transition","Derived from Phase 1: Enhanced Banner (2 hours)","gh-98-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-98-epic-story-2","gh-98-epic-story-2","AUTO","Story","Phase 2: Progress Tracking (3 hours) - Loading State Visibility Enhancement","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/98

1. Update useGlobalLoading with progress support
2. Modify Scryfall API to report progress
3. Show progress bar in banner
4. Display current/total counts","gh-98-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-98-epic-story-2-task-1","gh-98-epic-story-2-task-1","AUTO","Sub-task","Update useGlobalLoading with progress support","Derived from Phase 2: Progress Tracking (3 hours)","gh-98-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-98-epic-story-2-task-2","gh-98-epic-story-2-task-2","AUTO","Sub-task","Modify Scryfall API to report progress","Derived from Phase 2: Progress Tracking (3 hours)","gh-98-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-98-epic-story-2-task-3","gh-98-epic-story-2-task-3","AUTO","Sub-task","Show progress bar in banner","Derived from Phase 2: Progress Tracking (3 hours)","gh-98-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-98-epic-story-2-task-4","gh-98-epic-story-2-task-4","AUTO","Sub-task","Display current/total counts","Derived from Phase 2: Progress Tracking (3 hours)","gh-98-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-98-epic-story-3","gh-98-epic-story-3","AUTO","Story","Phase 3: Skeleton Screens (3 hours) - Loading State Visibility Enhancement","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/98

1. Create reusable skeleton components
2. Add to card list, search results
3. Implement shimmer animation
4. Match actual content layout","gh-98-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-98-epic-story-3-task-1","gh-98-epic-story-3-task-1","AUTO","Sub-task","Create reusable skeleton components","Derived from Phase 3: Skeleton Screens (3 hours)","gh-98-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-98-epic-story-3-task-2","gh-98-epic-story-3-task-2","AUTO","Sub-task","Add to card list, search results","Derived from Phase 3: Skeleton Screens (3 hours)","gh-98-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-98-epic-story-3-task-3","gh-98-epic-story-3-task-3","AUTO","Sub-task","Implement shimmer animation","Derived from Phase 3: Skeleton Screens (3 hours)","gh-98-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-98-epic-story-3-task-4","gh-98-epic-story-3-task-4","AUTO","Sub-task","Match actual content layout","Derived from Phase 3: Skeleton Screens (3 hours)","gh-98-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-98-epic-story-4","gh-98-epic-story-4","AUTO","Story","Phase 4: Contextual Messages (1 hour) - Loading State Visibility Enhancement","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/98

1. Add specific loading messages per operation
2. Show estimated time for known operations
3. Add cancel button for long operations","gh-98-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-98-epic-story-4-task-1","gh-98-epic-story-4-task-1","AUTO","Sub-task","Add specific loading messages per operation","Derived from Phase 4: Contextual Messages (1 hour)","gh-98-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-98-epic-story-4-task-2","gh-98-epic-story-4-task-2","AUTO","Sub-task","Show estimated time for known operations","Derived from Phase 4: Contextual Messages (1 hour)","gh-98-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-98-epic-story-4-task-3","gh-98-epic-story-4-task-3","AUTO","Sub-task","Add cancel button for long operations","Derived from Phase 4: Contextual Messages (1 hour)","gh-98-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/98",""
"gh-97-epic","gh-97-epic","AUTO","Epic","[GH#97] Form Input Accessibility Improvements","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/97
Labels: [object Object], [object Object], [object Object]

# Form Input Accessibility Improvements

**Priority:** Medium  
**Type:** Accessibility Enhancement  
**Component:** CommanderSearch, CSVUpload  
**Effort:** Low (< 1 day)

## Problem

Form inputs rely on placeholder text and `aria-label` attributes without visible labels. While this works for screen readers, it's not optimal for all users, especially those with cognitive disabilities or low vision who benefit from persistent visible labels.

### Current Issues

- Primary commander search uses placeholder text that disappears on focus
- No persistent label visible to sighted users
- Search icon positioned inside input may reduce text space
- No clear/reset button visible when input has text
- Missing validation feedback or character limits

### Accessibility Impact

- **WCAG 2.1 Level AA:** Partially fails 3.3.2 (Labels or Instructions)
- Screen reader users: âœ… Works (aria-label present)
- Low vision users: âš ï¸ Suboptimal (no persistent label)
- Cognitive disabilities: âš ï¸ Context lost when placeholder disappears

## Screenshots

- [Commander search input](https://github.com/user-attachments/assets/45f1f1e9-f478-4aa9-a40f-083ef4c8b453)

## Current Implementation

```vue
<input type=""text"" placeholder=""Search for a commander..."" aria-label=""Commander search"" />
```

## Proposed Solution

### Floating Label Pattern

Implement Material Design-style floating labels that:

1. Start as placeholder text when empty
2. Float above input on focus or when filled
3. Remain visible at all times after first interaction
4. Provide visual hierarchy and context

```vue
<template>
  <div class=""form-field"">
    <input v-model=""searchTerm"" type=""text"" id=""commander-search"" class=""peer"" placeholder="" "" />
    <label for=""commander-search"" class=""floating-label""> Primary Commander </label>
    <button v-if=""searchTerm"" @click=""clear"" class=""clear-btn"">âœ•</button>
  </div>
</template>

<style>
.floating-label {
  position: absolute;
  transition: all 0.2s;
  pointer-events: none;
}

.peer:focus ~ .floating-label,
.peer:not(:placeholder-shown) ~ .floating-label {
  transform: translateY(-1.5rem) scale(0.85);
  color: theme(""colors.emerald.600"");
}
</style>
```

### Alternative: Visible Label Above Input

Simpler approach if floating labels seem too complex:

```vue
<template>
  <div class=""form-field"">
    <label for=""commander-search"" class=""block text-sm font-medium mb-2""> Primary Commander </label>
    <input
      v-model=""searchTerm""
      type=""text""
      id=""commander-search""
      placeholder=""Search for a commander...""
    />
  </div>
  <p class=""help-text"">Select the main deck commander.</p>
</template>
```

### Additional Enhancements

#### 1. Clear Button

```vue
<button
  v-if=""searchTerm""
  @click=""clear""
  class=""absolute right-2 top-1/2 -translate-y-1/2""
  aria-label=""Clear search""
>
  âœ•
</button>
```

#### 2. Search Suggestions Dropdown

```vue
<ul v-if=""suggestions.length"" role=""listbox"">
  <li
    v-for=""suggestion in suggestions""
    :key=""suggestion.id""
    role=""option""
    @click=""selectCommander(suggestion)""
  >
    {{ suggestion.name }}
  </li>
</ul>
```

#### 3. Validation Feedback

```vue
<p v-if=""error"" role=""alert"" class=""error-message"">
  {{ error }}
</p>

<p v-if=""success"" role=""status"" class=""success-message"">
  {{ success }}
</p>
```

## Implementation Plan

### Phase 1: Visible Labels

1. Add visible labels above all inputs
2. Keep aria-labels for redundancy
3. Style labels consistently

### Phase 2: Clear Buttons

1. Add clear button to search inputs
2. Show only when input has value
3. Ensure keyboard accessible

### Phase 3: Floating Labels (Optional)

1. Implement CSS-only floating label
2. Add smooth transitions
3. Test across browsers

### Phase 4: Enhanced Feedback

1. Add validation messages
2. Implement inline help text
3. Show character counts where relevant

## Technical Details

### Files to Modify

- `src/components/CommanderSearch.vue` - Primary search input
- `src/components/CSVUpload.vue` - File input label
- Create shared `FormField.vue` component for consistency

### Reusable Component

```vue
<script setup lang=""ts"">
import { computed } from ""vue"";

interface Props {
  label: string;
  modelValue: string;
  placeholder?: string;
  helpText?: string;
  error?: string;
  type?: ""text"" | ""email"" | ""password"";
}

const props = withDefaults(defineProps<Props>(), {
  type: ""text"",
});

const emit = defineEmits<{
  ""update:modelValue"": [value: string];
  clear: [];
}>();

const hasValue = computed(() => props.modelValue.length > 0);
</script>

<template>
  <div class=""form-field"">
    <label :for=""label"" class=""block text-sm font-medium mb-2"">
      {{ label }}
    </label>

    <div class=""relative"">
      <input
        :value=""modelValue""
        @input=""emit('update:modelValue', ($event.target as HTMLInputElement).value)""
        :type=""type""
        :id=""label""
        :placeholder=""placeholder""
        class=""w-full px-4 py-2 pr-10""
      />

      <button
        v-if=""hasValue""
        @click=""emit('clear')""
        class=""absolute right-2 top-1/2 -translate-y-1/2""
        aria-label=""Clear input""
      >
        âœ•
      </button>
    </div>

    <p v-if=""helpText"" class=""text-xs text-slate-600 mt-1"">
      {{ helpText }}
    </p>

    <p v-if=""error"" role=""alert"" class=""text-xs text-red-600 mt-1"">
      {{ error }}
    </p>
  </div>
</template>
```

### Usage Example

```vue
<template>
  <FormField
    v-model=""commanderName""
    label=""Primary Commander""
    placeholder=""Search for a commander...""
    help-text=""Enter the name of your deck commander""
    :error=""validationError""
    @clear=""commanderName = ''""
  />
</template>
```

## Acceptance Criteria

- [ ] All form inputs have visible labels
- [ ] Labels persist when input is focused or filled
- [ ] Clear buttons appear on all text inputs when filled
- [ ] Labels maintain contrast ratio of 4.5:1 minimum
- [ ] Labels properly associated with inputs (for/id)
- [ ] Screen reader announces label, value, and validation
- [ ] Keyboard navigation works for all interactions
- [ ] Help text provides additional context where needed
- [ ] Error messages are accessible (role=""alert"")
- [ ] Passes axe-core accessibility audit

## Testing Checklist

- [ ] Test with NVDA screen reader (Windows)
- [ ] Test with VoiceOver (macOS/iOS)
- [ ] Verify keyboard-only navigation
- [ ] Check color contrast with tools
- [ ] Test with 200% zoom
- [ ] Verify in high contrast mode
- [ ] Test with forms auto-fill

## WCAG Success Criteria

This enhancement addresses:

- **3.3.2 Labels or Instructions (Level A)** - Visible labels provided
- **2.4.6 Headings and Labels (Level AA)** - Descriptive labels
- **1.3.1 Info and Relationships (Level A)** - Proper form structure
- **4.1.2 Name, Role, Value (Level A)** - Semantic HTML

## Related Issues

- #69 - Mobile toolbar (touch targets)

## References

- [WCAG 3.3.2 Labels or Instructions](https://www.w3.org/WAI/WCAG21/Understanding/labels-or-instructions.html)
- [Material Design Text Fields](https://material.io/components/text-fields)
- [Floating Labels Are Problematic](https://medium.com/simple-human/floating-labels-are-a-bad-idea-82edb64220f6)
- [Placeholders in Form Fields Are Harmful](https://www.nngroup.com/articles/form-design-placeholders/)


Acceptance Criteria:
  1. All form inputs have visible labels
  2. Labels persist when input is focused or filled
  3. Clear buttons appear on all text inputs when filled
  4. Labels maintain contrast ratio of 4.5:1 minimum
  5. Labels properly associated with inputs (for/id)
  6. Screen reader announces label, value, and validation
  7. Keyboard navigation works for all interactions
  8. Help text provides additional context where needed
  9. Error messages are accessible (role=""alert"")
  10. Passes axe-core accessibility audit","","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-97-epic-story-1","gh-97-epic-story-1","AUTO","Story","Phase 1: Visible Labels - Form Input Accessibility Improvements","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/97

1. Add visible labels above all inputs
2. Keep aria-labels for redundancy
3. Style labels consistently","gh-97-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-97-epic-story-1-task-1","gh-97-epic-story-1-task-1","AUTO","Sub-task","Add visible labels above all inputs","Derived from Phase 1: Visible Labels","gh-97-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97",""
"gh-97-epic-story-1-task-2","gh-97-epic-story-1-task-2","AUTO","Sub-task","Keep aria-labels for redundancy","Derived from Phase 1: Visible Labels","gh-97-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97",""
"gh-97-epic-story-1-task-3","gh-97-epic-story-1-task-3","AUTO","Sub-task","Style labels consistently","Derived from Phase 1: Visible Labels","gh-97-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97",""
"gh-97-epic-story-2","gh-97-epic-story-2","AUTO","Story","Phase 2: Clear Buttons - Form Input Accessibility Improvements","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/97

1. Add clear button to search inputs
2. Show only when input has value
3. Ensure keyboard accessible","gh-97-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-97-epic-story-2-task-1","gh-97-epic-story-2-task-1","AUTO","Sub-task","Add clear button to search inputs","Derived from Phase 2: Clear Buttons","gh-97-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97",""
"gh-97-epic-story-2-task-2","gh-97-epic-story-2-task-2","AUTO","Sub-task","Show only when input has value","Derived from Phase 2: Clear Buttons","gh-97-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97",""
"gh-97-epic-story-2-task-3","gh-97-epic-story-2-task-3","AUTO","Sub-task","Ensure keyboard accessible","Derived from Phase 2: Clear Buttons","gh-97-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97",""
"gh-97-epic-story-3","gh-97-epic-story-3","AUTO","Story","Phase 3: Floating Labels (Optional) - Form Input Accessibility Improvements","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/97

1. Implement CSS-only floating label
2. Add smooth transitions
3. Test across browsers","gh-97-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-97-epic-story-3-task-1","gh-97-epic-story-3-task-1","AUTO","Sub-task","Implement CSS-only floating label","Derived from Phase 3: Floating Labels (Optional)","gh-97-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97",""
"gh-97-epic-story-3-task-2","gh-97-epic-story-3-task-2","AUTO","Sub-task","Add smooth transitions","Derived from Phase 3: Floating Labels (Optional)","gh-97-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97",""
"gh-97-epic-story-3-task-3","gh-97-epic-story-3-task-3","AUTO","Sub-task","Test across browsers","Derived from Phase 3: Floating Labels (Optional)","gh-97-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97",""
"gh-97-epic-story-4","gh-97-epic-story-4","AUTO","Story","Phase 4: Enhanced Feedback - Form Input Accessibility Improvements","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/97

1. Add validation messages
2. Implement inline help text
3. Show character counts where relevant","gh-97-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-97-epic-story-4-task-1","gh-97-epic-story-4-task-1","AUTO","Sub-task","Add validation messages","Derived from Phase 4: Enhanced Feedback","gh-97-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97",""
"gh-97-epic-story-4-task-2","gh-97-epic-story-4-task-2","AUTO","Sub-task","Implement inline help text","Derived from Phase 4: Enhanced Feedback","gh-97-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97",""
"gh-97-epic-story-4-task-3","gh-97-epic-story-4-task-3","AUTO","Sub-task","Show character counts where relevant","Derived from Phase 4: Enhanced Feedback","gh-97-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/97",""
"gh-96-epic","gh-96-epic","AUTO","Epic","[GH#96] Empty State Design","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/96
Labels: [object Object], [object Object], [object Object]

# Empty State Design

**Priority:** Medium  
**Type:** UX Enhancement  
**Component:** EdhrecReader, Dashboard  
**Effort:** Low (< 1 day)

## Problem

When no commander is selected, the interface shows filters and instructions but no visual placeholder for where results will appear. This leaves users uncertain about what to expect and doesn't communicate the value proposition effectively.

### Current Issues

- No indication of where commander data will appear
- Missing visual feedback about expected outcome
- Empty space below filters looks unfinished
- No guidance on popular commanders or next steps
- Opportunity to educate users about features

### User Impact

- **Medium:** New users unsure what the interface will show
- Reduced confidence in using the tool
- Missed opportunity to guide user behavior
- No examples of tool value until after first search

## Screenshots

- [Current empty state](https://github.com/user-attachments/assets/45f1f1e9-f478-4aa9-a40f-083ef4c8b453)

## Proposed Solution

### Empty State Component

Create visually appealing placeholder that:

1. Shows where content will appear
2. Provides helpful guidance
3. Suggests popular commanders
4. Illustrates the value proposition

### Design Options

#### Option A: Illustrated Placeholder

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚        [Magic Wand Icon]            â”‚
â”‚                                     â”‚
â”‚   Search for a commander above      â”‚
â”‚   to see EDHREC recommendations     â”‚
â”‚                                     â”‚
â”‚   Popular commanders:               â”‚
â”‚   â€¢ Atraxa, Grand Unifier          â”‚
â”‚   â€¢ The Ur-Dragon                   â”‚
â”‚   â€¢ Miirym, Sentinel Wyrm          â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Option B: Preview Cards (Skeleton)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [------] â”‚  â”‚ [------] â”‚  â”‚ [------] â”‚
â”‚ [------] â”‚  â”‚ [------] â”‚  â”‚ [------] â”‚
â”‚ [------] â”‚  â”‚ [------] â”‚  â”‚ [------] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     Results will appear here
```

#### Option C: Feature Showcase

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ¨ Compare EDHREC recommendations  â”‚
â”‚     with your personal collection   â”‚
â”‚                                     â”‚
â”‚  ðŸ“Š View card prices from Scryfall â”‚
â”‚                                     â”‚
â”‚  ðŸŽ¯ Filter by owned/unowned cards  â”‚
â”‚                                     â”‚
â”‚  Start by searching a commander â†‘  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Recommended Approach (Hybrid)

Combine elements from all options:

```vue
<template>
  <div class=""empty-state"">
    <div class=""icon-wrapper"">
      <svg><!-- Card icon --></svg>
    </div>

    <h3>Find Your Next Commander Deck</h3>

    <p>
      Search for a commander above to see EDHREC recommendations, Scryfall pricing, and highlight
      cards you already own.
    </p>

    <div class=""popular-commanders"">
      <h4>Popular Commanders</h4>
      <ul>
        <li>Atraxa, Grand Unifier</li>
        <li>The Ur-Dragon</li>
        <li>Miirym, Sentinel Wyrm</li>
        <!-- Clickable suggestions -->
      </ul>
    </div>

    <p class=""tip"">ðŸ’¡ Tip: Upload a CSV to highlight owned cards</p>
  </div>
</template>
```

### Visual Design

**Colors:**

- Use muted slate tones (not distracting)
- Accent with emerald for interactive elements
- Subtle gradients for depth

**Typography:**

- Large heading (text-xl or text-2xl)
- Medium description (text-sm)
- Small hints (text-xs)

**Spacing:**

- Generous padding (p-12)
- Centered layout
- Adequate breathing room

**Iconography:**

- Stylized card deck illustration
- SVG icons for features
- Avoid generic ""no data"" icons

## Implementation Details

### New Component

```typescript
// src/components/EdhrecEmptyState.vue
<script setup lang=""ts"">
import { ref } from 'vue';

const popularCommanders = ref([
  'Atraxa, Grand Unifier',
  'The Ur-Dragon',
  'Miirym, Sentinel Wyrm',
]);

const emit = defineEmits<{
  selectCommander: [name: string];
}>();
</script>

<template>
  <div class=""flex flex-col items-center justify-center min-h-[400px] text-center p-12"">
    <div class=""mb-6"">
      <svg class=""w-24 h-24 text-slate-300"">
        <!-- Card icon -->
      </svg>
    </div>

    <h3 class=""text-2xl font-bold text-slate-700 dark:text-slate-200 mb-4"">
      Find Your Next Commander Deck
    </h3>
    <p class=""text-sm text-slate-600 dark:text-slate-400 max-w-md mb-8"">
      Search for a commander above to see EDHREC recommendations,
      live Scryfall pricing, and highlight cards you already own.
    </p>

    <div class=""mb-6"">
      <p class=""text-xs font-semibold text-slate-500 mb-3"">
        Popular Commanders
      </p>
      <div class=""flex flex-col gap-2"">
        <button
          v-for=""commander in popularCommanders""
          :key=""commander""
          @click=""emit('selectCommander', commander)""
          class=""text-sm text-emerald-600 hover:text-emerald-700""
        >
          {{ commander }}
        </button>
      </div>
    </div>

    <p class=""text-xs text-slate-500 flex items-center gap-2"">
      <svg class=""w-4 h-4"">ðŸ’¡</svg>
      Tip: Upload a CSV to automatically highlight cards you own
    </p>
  </div>
</template>
```

### Integration in EdhrecReader

```vue
<template>
  <div>
    <CommanderSearch />
    <CommanderFilters />

    <EdhrecEmptyState v-if=""!selectedCommander"" @select-commander=""handleCommanderSelection"" />

    <CardList v-else :cards=""cards"" />
  </div>
</template>
```

## Acceptance Criteria

- [ ] Empty state shown when no commander selected
- [ ] Illustration is visually appealing and on-brand
- [ ] Popular commander suggestions are clickable
- [ ] Clicking suggestion auto-fills search and triggers query
- [ ] Empty state hidden once commander data loads
- [ ] Works in both light and dark modes
- [ ] Responsive on mobile (stacked layout)
- [ ] Smooth transition when data loads
- [ ] Copy is clear and helpful
- [ ] No layout shift when transitioning to results

## Variations for Different States

### No Commander Selected (Initial)

Show full empty state with suggestions

### Loading Commander Data

Show skeleton cards or loading spinner

### No Results Found

Show different message: ""No recommendations found for this commander""

### API Error

Show error state with retry button

## Related Issues

- #74 - Loading states (skeleton screens)
- #71 - Information density (affects layout)

## Inspiration Examples

- GitHub's empty repository state
- Notion's empty page illustrations
- Vercel's project empty state
- Linear's empty views

## References

- [Empty States - Laws of UX](https://lawsofux.com/empty-state/)
- [Material Design Empty States](https://material.io/design/communication/empty-states.html)
- [Empty State Best Practices](https://www.nngroup.com/articles/empty-state/)


Acceptance Criteria:
  1. Empty state shown when no commander selected
  2. Illustration is visually appealing and on-brand
  3. Popular commander suggestions are clickable
  4. Clicking suggestion auto-fills search and triggers query
  5. Empty state hidden once commander data loads
  6. Works in both light and dark modes
  7. Responsive on mobile (stacked layout)
  8. Smooth transition when data loads
  9. Copy is clear and helpful
  10. No layout shift when transitioning to results","","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/96","1. Empty state shown when no commander selected | 2. Illustration is visually appealing and on-brand | 3. Popular commander suggestions are clickable | 4. Clicking suggestion auto-fills search and triggers query | 5. Empty state hidden once commander data loads | 6. Works in both light and dark modes | 7. Responsive on mobile (stacked layout) | 8. Smooth transition when data loads | 9. Copy is clear and helpful | 10. No layout shift when transitioning to results"
"gh-95-epic","gh-95-epic","AUTO","Epic","[GH#95] Implement API Request Deduplication","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/95
Labels: [object Object], [object Object]

# Implement API Request Deduplication

**Priority:** Medium  
**Type:** Performance Enhancement  
**Component:** API Layer  
**Effort:** Small (1-2 days)

## Problem

The application can make duplicate simultaneous API requests when multiple components request the same data:

### Current Issues

- Multiple components may fetch the same Scryfall card simultaneously
- Rapid filter changes trigger duplicate EDHREC requests
- No request deduplication mechanism
- Wasted bandwidth and API quota
- Increased Scryfall API load
- Race conditions with concurrent requests

### User Impact

- **Medium:** Slower loading due to unnecessary duplicate requests
- Inconsistent data if requests complete in different order
- Potential API rate limiting from excessive requests
- Wasted mobile data on duplicate fetches
- Server load on Scryfall's public API

## Proposed Solution

### Request Deduplication Pattern

Implement a request cache that deduplicates in-flight requests:

```typescript
// src/api/requestCache.ts
type PendingRequest<T> = Promise<T>;
type RequestKey = string;

class RequestCache {
  private pending = new Map<RequestKey, PendingRequest<any>>();

  async dedupe<T>(key: RequestKey, fetcher: () => Promise<T>): Promise<T> {
    // Return existing pending request if found
    if (this.pending.has(key)) {
      return this.pending.get(key) as Promise<T>;
    }

    // Create new request
    const request = fetcher().finally(() => {
      // Clean up after completion
      this.pending.delete(key);
    });

    this.pending.set(key, request);
    return request;
  }

  clear(): void {
    this.pending.clear();
  }

  has(key: RequestKey): boolean {
    return this.pending.has(key);
  }
}

export const requestCache = new RequestCache();
```

### Scryfall API Integration

```typescript
// src/api/scryfallApi.ts
import { requestCache } from ""./requestCache"";

export async function getCardByName(name: string): Promise<ScryfallCard | null> {
  const cacheKey = `scryfall:card:${name.toLowerCase()}`;

  return requestCache.dedupe(cacheKey, async () => {
    const sanitized = sanitizeCardName(name);
    const url = `https://api.scryfall.com/cards/named?fuzzy=${encodeURIComponent(sanitized)}`;

    return apiCall(
      async () => {
        const response = await fetch(url);
        if (!response.ok) {
          if (response.status === 404) return null;
          throw new Error(`Scryfall API error: ${response.status}`);
        }
        return response.json();
      },
      `Failed to fetch card: ${name}`,
      { context: ""getCardByName"" }
    );
  });
}

export async function getCardsByNames(names: string[]): Promise<Map<string, ScryfallCard>> {
  // Deduplicate the input names first
  const uniqueNames = [...new Set(names)];

  // Batch processing with deduplication
  const batchKey = uniqueNames.sort().join("","");
  const cacheKey = `scryfall:batch:${batchKey}`;

  return requestCache.dedupe(cacheKey, async () => {
    // ... existing batch logic
  });
}
```

### EDHREC API Deduplication

```typescript
// src/components/EdhrecReader.vue
import { requestCache } from ""../api/requestCache"";

const fetchEdhrecData = async (commander: string, filters: EdhrecFilters): Promise<EdhrecData> => {
  const cacheKey = `edhrec:${commander}:${JSON.stringify(filters)}`;

  return requestCache.dedupe(cacheKey, async () => {
    const url = constructEdhrecUrl(commander, filters);
    const response = await fetch(url);

    if (!response.ok) {
      throw new Error(`EDHREC API error: ${response.status}`);
    }

    return response.json();
  });
};
```

### Debounced Requests

```typescript
// src/composables/useDebouncedRequest.ts
import { ref } from ""vue"";
import { useDebounceFn } from ""@vueuse/core"";

export const useDebouncedRequest = <T>(fetcher: () => Promise<T>, delay: number = 300) => {
  const data = ref<T | null>(null);
  const loading = ref(false);
  const error = ref<Error | null>(null);

  const debouncedFetch = useDebounceFn(async () => {
    loading.value = true;
    error.value = null;

    try {
      data.value = await fetcher();
    } catch (err) {
      error.value = err as Error;
    } finally {
      loading.value = false;
    }
  }, delay);

  return { data, loading, error, execute: debouncedFetch };
};
```

### Request Cancellation

```typescript
// src/api/cancellableRequest.ts
export class CancellableRequest<T> {
  private controller: AbortController;

  constructor(private fetcher: (signal: AbortSignal) => Promise<T>) {
    this.controller = new AbortController();
  }

  async execute(): Promise<T> {
    return this.fetcher(this.controller.signal);
  }

  cancel(): void {
    this.controller.abort();
  }
}

// Usage in components
const cancelRef = ref<CancellableRequest<any> | null>(null);

const searchCommander = async (query: string) => {
  // Cancel previous request
  cancelRef.value?.cancel();

  // Create new cancellable request
  cancelRef.value = new CancellableRequest(async (signal) => {
    const response = await fetch(url, { signal });
    return response.json();
  });

  try {
    const results = await cancelRef.value.execute();
    // Process results
  } catch (err) {
    if (err.name === ""AbortError"") {
      console.log(""Request cancelled"");
      return;
    }
    throw err;
  }
};
```

## Technical Considerations

### Files to Create

- `src/api/requestCache.ts` - Request deduplication cache
- `src/api/cancellableRequest.ts` - Request cancellation utility
- `src/composables/useDebouncedRequest.ts` - Debounced request composable
- `tests/unit/api/requestCache.spec.ts` - Unit tests

### Files to Modify

- `src/api/scryfallApi.ts` - Add deduplication
- `src/components/EdhrecReader.vue` - Use debounced requests
- `src/components/CommanderSearch.vue` - Cancel on new input

### Memory Management

```typescript
// Add TTL to request cache to prevent memory leaks
class RequestCache {
  private pending = new Map<
    RequestKey,
    {
      promise: PendingRequest<any>;
      timestamp: number;
    }
  >();

  private readonly TTL = 30000; // 30 seconds

  async dedupe<T>(key: RequestKey, fetcher: () => Promise<T>): Promise<T> {
    const cached = this.pending.get(key);

    // Return if still pending and not expired
    if (cached && Date.now() - cached.timestamp < this.TTL) {
      return cached.promise;
    }

    // Create new request
    const promise = fetcher().finally(() => {
      // Clean up after delay to allow sharing
      setTimeout(() => this.pending.delete(key), 1000);
    });

    this.pending.set(key, { promise, timestamp: Date.now() });
    return promise;
  }

  // Periodic cleanup of expired entries
  startCleanup(): void {
    setInterval(() => {
      const now = Date.now();
      for (const [key, { timestamp }] of this.pending) {
        if (now - timestamp > this.TTL) {
          this.pending.delete(key);
        }
      }
    }, 60000); // Every minute
  }
}
```

## Implementation Plan

### Phase 1: Core Deduplication (Day 1)

1. Create RequestCache class
2. Add tests for deduplication logic
3. Integrate with Scryfall API
4. Test with concurrent requests

### Phase 2: Cancellation & Debouncing (Day 2)

1. Implement CancellableRequest utility
2. Add request cancellation to search
3. Integrate debounced requests
4. Test rapid filter changes

## Acceptance Criteria

- [ ] Duplicate simultaneous requests deduplicated
- [ ] Memory usage stable (no leaks from pending requests)
- [ ] Rapid filter changes don't create duplicate requests
- [ ] Request cancellation works for search
- [ ] Unit tests for request cache (80%+ coverage)
- [ ] No regression in functionality
- [ ] Network tab shows reduced duplicate requests

## Performance Targets

### Before Deduplication

- Commander search (typing ""Atraxa""): 6 requests (one per letter)
- Filter toggle: 2-3 duplicate EDHREC requests
- Card fetch: 5-10% duplicate Scryfall requests

### After Deduplication

- Commander search (typing ""Atraxa""): 1 request (debounced + cancelled)
- Filter toggle: 1 EDHREC request (deduplicated)
- Card fetch: 0% duplicate Scryfall requests

## Testing Strategy

### Unit Tests

```typescript
// tests/unit/api/requestCache.spec.ts
import { requestCache } from ""@/api/requestCache"";

describe(""RequestCache"", () => {
  it(""deduplicates concurrent requests"", async () => {
    let callCount = 0;
    const fetcher = async () => {
      callCount++;
      await delay(100);
      return ""result"";
    };

    // Make 5 concurrent requests
    const results = await Promise.all([
      requestCache.dedupe(""key"", fetcher),
      requestCache.dedupe(""key"", fetcher),
      requestCache.dedupe(""key"", fetcher),
      requestCache.dedupe(""key"", fetcher),
      requestCache.dedupe(""key"", fetcher),
    ]);

    // Should only call fetcher once
    expect(callCount).toBe(1);
    expect(results).toEqual([""result"", ""result"", ""result"", ""result"", ""result""]);
  });

  it(""cleans up after request completion"", async () => {
    await requestCache.dedupe(""key"", async () => ""result"");

    // Wait for cleanup
    await delay(1100);

    expect(requestCache.has(""key"")).toBe(false);
  });
});
```

### E2E Tests

```typescript
// tests/e2e/request-deduplication.spec.ts
test(""deduplicates rapid filter changes"", async ({ page }) => {
  const requests: string[] = [];

  // Track network requests
  page.on(""request"", (req) => {
    if (req.url().includes(""json.edhrec.com"")) {
      requests.push(req.url());
    }
  });

  await page.goto(""/"");
  await selectCommander(page, ""Atraxa"");

  // Rapidly toggle filters
  for (let i = 0; i < 5; i++) {
    await page.click('[data-testid=""bracket-filter""]');
    await delay(50);
  }

  // Should only make 1-2 requests, not 5
  expect(requests.length).toBeLessThan(3);
});
```

## Related Issues

- #01 - IndexedDB caching (complementary optimization)
- Performance optimization overall
- API rate limiting prevention

## References

- [Request Deduplication Pattern](https://kentcdodds.com/blog/optimize-react-re-renders)
- [AbortController - MDN](https://developer.mozilla.org/en-US/docs/Web/API/AbortController)
- [Debouncing - lodash](https://lodash.com/docs/4.17.15#debounce)


Acceptance Criteria:
  1. Duplicate simultaneous requests deduplicated
  2. Memory usage stable (no leaks from pending requests)
  3. Rapid filter changes don't create duplicate requests
  4. Request cancellation works for search
  5. Unit tests for request cache (80%+ coverage)
  6. No regression in functionality
  7. Network tab shows reduced duplicate requests","","medium-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/95","1. Duplicate simultaneous requests deduplicated | 2. Memory usage stable (no leaks from pending requests) | 3. Rapid filter changes don't create duplicate requests | 4. Request cancellation works for search | 5. Unit tests for request cache (80%+ coverage) | 6. No regression in functionality | 7. Network tab shows reduced duplicate requests"
"gh-95-epic-story-1","gh-95-epic-story-1","AUTO","Story","Phase 1: Core Deduplication (Day 1) - Implement API Request Deduplication","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/95

1. Create RequestCache class
2. Add tests for deduplication logic
3. Integrate with Scryfall API
4. Test with concurrent requests","gh-95-epic","medium-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/95","1. Duplicate simultaneous requests deduplicated | 2. Memory usage stable (no leaks from pending requests) | 3. Rapid filter changes don't create duplicate requests | 4. Request cancellation works for search | 5. Unit tests for request cache (80%+ coverage) | 6. No regression in functionality | 7. Network tab shows reduced duplicate requests"
"gh-95-epic-story-1-task-1","gh-95-epic-story-1-task-1","AUTO","Sub-task","Create RequestCache class","Derived from Phase 1: Core Deduplication (Day 1)","gh-95-epic-story-1","medium-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/95",""
"gh-95-epic-story-1-task-2","gh-95-epic-story-1-task-2","AUTO","Sub-task","Add tests for deduplication logic","Derived from Phase 1: Core Deduplication (Day 1)","gh-95-epic-story-1","medium-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/95",""
"gh-95-epic-story-1-task-3","gh-95-epic-story-1-task-3","AUTO","Sub-task","Integrate with Scryfall API","Derived from Phase 1: Core Deduplication (Day 1)","gh-95-epic-story-1","medium-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/95",""
"gh-95-epic-story-1-task-4","gh-95-epic-story-1-task-4","AUTO","Sub-task","Test with concurrent requests","Derived from Phase 1: Core Deduplication (Day 1)","gh-95-epic-story-1","medium-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/95",""
"gh-95-epic-story-2","gh-95-epic-story-2","AUTO","Story","Phase 2: Cancellation & Debouncing (Day 2) - Implement API Request Deduplication","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/95

1. Implement CancellableRequest utility
2. Add request cancellation to search
3. Integrate debounced requests
4. Test rapid filter changes","gh-95-epic","medium-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/95","1. Duplicate simultaneous requests deduplicated | 2. Memory usage stable (no leaks from pending requests) | 3. Rapid filter changes don't create duplicate requests | 4. Request cancellation works for search | 5. Unit tests for request cache (80%+ coverage) | 6. No regression in functionality | 7. Network tab shows reduced duplicate requests"
"gh-95-epic-story-2-task-1","gh-95-epic-story-2-task-1","AUTO","Sub-task","Implement CancellableRequest utility","Derived from Phase 2: Cancellation & Debouncing (Day 2)","gh-95-epic-story-2","medium-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/95",""
"gh-95-epic-story-2-task-2","gh-95-epic-story-2-task-2","AUTO","Sub-task","Add request cancellation to search","Derived from Phase 2: Cancellation & Debouncing (Day 2)","gh-95-epic-story-2","medium-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/95",""
"gh-95-epic-story-2-task-3","gh-95-epic-story-2-task-3","AUTO","Sub-task","Integrate debounced requests","Derived from Phase 2: Cancellation & Debouncing (Day 2)","gh-95-epic-story-2","medium-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/95",""
"gh-95-epic-story-2-task-4","gh-95-epic-story-2-task-4","AUTO","Sub-task","Test rapid filter changes","Derived from Phase 2: Cancellation & Debouncing (Day 2)","gh-95-epic-story-2","medium-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/95",""
"gh-91-epic","gh-91-epic","AUTO","Epic","[GH#91] Implement Code Splitting and Lazy Loading","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/91
Labels: [object Object], [object Object], [object Object]

# Implement Code Splitting and Lazy Loading

**Priority:** High  
**Type:** Performance Enhancement  
**Component:** Build Configuration, Component Loading  
**Effort:** Medium (2-3 days)

## Problem

The entire application bundle (201 KB JS + 74 KB CSS) loads upfront, even though users don't need all features immediately:

### Current Issues

- Full 275 KB bundle downloads before any interaction
- CSV upload modal loads even if user never uploads CSV
- All components bundled together (no code splitting)
- Slower time-to-interactive (TTI) on slow connections
- Mobile users wait longer for initial load
- Unused features bloat the initial bundle

### User Impact

- **High:** 2-4 second wait on 3G connections before app interactive
- Poor first impression (blank screen while loading)
- Wasted bandwidth for users who don't use all features
- Lower Core Web Vitals scores (LCP, TTI)
- Reduced SEO ranking due to slow page speed

## Proposed Solution

### Code Splitting Strategy

Implement strategic code splitting to reduce initial bundle size by 40-50%:

1. **Route-based Splitting** (Not applicable - no routing)
2. **Component-based Splitting** âœ“
3. **Vendor Splitting** âœ“
4. **Feature-based Splitting** âœ“

### Components to Lazy Load

**High Priority (Large, Optional)**

- `CSVUpload.vue` + `CsvUploadModal.vue` (~15 KB)
- `DecklistExport.vue` (~8 KB)
- `NebulaBackground.vue` (~10 KB, can defer)
- `FloatingCardlistNav.vue` (~8 KB, shows after search)

**Medium Priority**

- Card table components (after virtualization)
- Onboarding modal (first-time users only)

**Low Priority**

- Icon components (can stay in main bundle)
- Core UI components (CButton, CText)

### Implementation Approach

```typescript
// src/components/Dashboard.vue - Lazy load modals
<script setup lang=""ts"">
import { defineAsyncComponent } from 'vue';

// Eagerly loaded (needed immediately)
import CommanderSearch from './CommanderSearch.vue';
import EdhrecReader from './EdhrecReader.vue';
import ToolkitHeader from './ToolkitHeader.vue';

// Lazy loaded (optional features)
const CsvUploadModal = defineAsyncComponent(
  () => import('./CsvUploadModal.vue')
);

const DecklistExport = defineAsyncComponent(
  () => import('./DecklistExport.vue')
);

const NebulaBackground = defineAsyncComponent({
  loader: () => import('./NebulaBackground.vue'),
  // Show nothing while loading (transparent)
  loadingComponent: () => null,
  delay: 200, // Wait 200ms before showing loading
});

// Only load onboarding for first-time users
const OnboardingModal = defineAsyncComponent({
  loader: () => import('./OnboardingModal.vue'),
  delay: 1000, // Wait 1s before showing
});
</script>
```

### Vendor Splitting Configuration

```typescript
// vite.config.ts - Optimize chunk splitting
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          // Vue framework separate chunk
          ""vue-vendor"": [""vue""],

          // VueUse composables (used throughout)
          ""vueuse-vendor"": [""@vueuse/core""],

          // Large third-party libraries
          ""vendor-icons"": [""@mdi/js""],

          // Analytics separate (non-critical)
          ""vendor-analytics"": [""@vercel/analytics"", ""@vercel/speed-insights"", ""@sentry/vue""],
        },
      },
    },
  },
});
```

### Dynamic Import for Features

```typescript
// src/composables/useCsvUpload.ts
// Defer parsing logic until CSV uploaded
const parseCsvContent = async (content: string) => {
  // Dynamically import CSV validator when needed
  const { validateCsv } = await import(""../utils/csvValidator"");
  return validateCsv(content);
};
```

### Prefetch Strategy

```typescript
// Prefetch likely-needed chunks
// src/main.ts
if (""requestIdleCallback"" in window) {
  requestIdleCallback(() => {
    // Prefetch CSV upload modal after 2s idle
    setTimeout(() => {
      import(""./components/CsvUploadModal.vue"");
    }, 2000);
  });
}
```

## Technical Considerations

### Files to Modify

- `vite.config.ts` - Add manual chunks configuration
- `src/components/Dashboard.vue` - Lazy load modals
- `src/components/ToolkitHeader.vue` - Defer non-critical features
- `src/main.ts` - Add prefetch logic
- `package.json` - Configure build script

### Bundle Size Targets

**Current Bundle (Production)**

- Main JS: 201 KB (68 KB gzipped)
- Main CSS: 74 KB (12 KB gzipped)
- Total: 275 KB (80 KB gzipped)

**After Code Splitting**

- Main JS: 110-120 KB (40-45 KB gzipped) âœ“ 40% reduction
- Vue vendor: 45 KB (15 KB gzipped)
- VueUse vendor: 15 KB (5 KB gzipped)
- Analytics vendor: 20 KB (7 KB gzipped)
- CSV modal chunk: 15 KB (5 KB gzipped)
- Total: ~205 KB (67 KB gzipped)
- **Initial load: 110-120 KB vs 201 KB** âœ“ 40% faster

### Loading States

```vue
<!-- Show skeleton while lazy loading -->
<Suspense>
  <template #default>
    <CsvUploadModal />
  </template>
  <template #fallback>
    <SkeletonCard />
  </template>
</Suspense>
```

### Error Handling

```typescript
// Handle chunk loading failures
const CsvUploadModal = defineAsyncComponent({
  loader: () => import(""./CsvUploadModal.vue""),
  onError(error, retry, fail) {
    console.error(""Failed to load CSV modal:"", error);
    // Retry once
    if (retryCount < 1) {
      retryCount++;
      retry();
    } else {
      notifyError(""Failed to load component. Please refresh the page."");
      fail();
    }
  },
});
```

## Implementation Plan

### Phase 1: Vendor Splitting (Day 1)

1. Configure manual chunks in vite.config.ts
2. Split Vue, VueUse, MDI icons, analytics
3. Test bundle sizes
4. Ensure all chunks load correctly

### Phase 2: Component Lazy Loading (Day 2)

1. Convert CSV modal to lazy load
2. Convert export modal to lazy load
3. Convert background to lazy load
4. Add loading states (Suspense)
5. Test user flows (upload CSV, export)

### Phase 3: Optimization (Day 3)

1. Add prefetch for frequently used chunks
2. Optimize chunk sizes (combine small chunks)
3. Test on slow 3G connection
4. Measure Core Web Vitals improvements
5. Update bundle analysis

## Acceptance Criteria

- [ ] Initial JS bundle reduced to 110-120 KB (from 201 KB)
- [ ] Time to Interactive (TTI) reduced by 30%+
- [ ] Largest Contentful Paint (LCP) < 2.5s on 3G
- [ ] All lazy-loaded components work correctly
- [ ] No regression in user experience
- [ ] Loading states shown for slow connections
- [ ] Chunk loading errors handled gracefully
- [ ] Bundle analysis shows optimal chunk sizes

## Performance Targets

### Before Code Splitting

- Initial bundle: 201 KB JS + 74 KB CSS = 275 KB
- TTI on 3G: ~4.5 seconds
- LCP: ~3.2 seconds
- Bundle requests: 2 (JS + CSS)

### After Code Splitting

- Initial bundle: 110 KB JS + 74 KB CSS = 184 KB
- TTI on 3G: ~2.8 seconds (38% faster)
- LCP: ~2.3 seconds (28% faster)
- Bundle requests: 4-5 (main + vendors)

## Testing Strategy

### Bundle Size Testing

```bash
# Before changes
npm run build
# Main JS: 201 KB

# After changes
npm run build
# Main JS: 110-120 KB
# Vendor chunks: 45 KB + 15 KB + 20 KB
# Feature chunks: 15 KB (CSV modal)

# Analyze bundle
npm run build:analyze
# Verify no duplicate code between chunks
```

### E2E Testing

```typescript
// Test lazy loading doesn't break functionality
test(""CSV upload works with lazy loading"", async ({ page }) => {
  await page.goto(""/"");

  // Click upload button (triggers lazy load)
  await page.click('[data-testid=""upload-csv""]');

  // Wait for modal to load
  await page.waitForSelector('[data-testid=""csv-modal""]');

  // Upload CSV
  await page.setInputFiles('input[type=""file""]', ""test.csv"");

  // Verify CSV processed
  await expect(page.locator("".csv-success"")).toBeVisible();
});
```

### Performance Testing

```typescript
// Measure TTI improvement
import { performance } from ""perf_hooks"";

test(""TTI improved with code splitting"", async ({ page }) => {
  const start = performance.now();

  await page.goto(""/"");
  await page.waitForLoadState(""networkidle"");

  const tti = performance.now() - start;

  // Should be < 3000ms on simulated 3G
  expect(tti).toBeLessThan(3000);
});
```

## Monitoring & Rollout

### Gradual Rollout

1. **Week 1:** Deploy to staging, test thoroughly
2. **Week 2:** Deploy to 10% of users (feature flag)
3. **Week 3:** Deploy to 50% of users
4. **Week 4:** Deploy to 100% of users

### Monitoring Metrics

```typescript
// Track chunk loading performance
if (import.meta.env.PROD) {
  const observer = new PerformanceObserver((list) => {
    for (const entry of list.getEntries()) {
      if (entry.entryType === ""resource"" && entry.name.includes("".js"")) {
        analytics.track(""chunk_loaded"", {
          name: entry.name,
          duration: entry.duration,
          size: entry.transferSize,
        });
      }
    }
  });

  observer.observe({ entryTypes: [""resource""] });
}
```

## Alternative Approaches Considered

1. **HTTP/2 Server Push** - Considered: Complex server setup
2. **Preload directives** - Included: Used for critical chunks
3. **Service Worker precaching** - Future: Consider for PWA
4. **PRPL Pattern** - Considered: Overkill for SPA without routing
5. **Module preload** - Included: For immediate chunks

## Related Issues

- #01 - IndexedDB caching (reduces data fetching)
- #02 - Virtual scrolling (reduces render time)
- Bundle size optimization overall

## References

- [Code Splitting - Vite](https://vitejs.dev/guide/features.html#code-splitting)
- [Manual Chunks - Rollup](https://rollupjs.org/guide/en/#outputmanualchunks)
- [Dynamic Imports - Vue](https://vuejs.org/guide/components/async.html)
- [Web Vitals - Google](https://web.dev/vitals/)
- [Lighthouse Performance Scoring](https://web.dev/performance-scoring/)


Acceptance Criteria:
  1. Initial JS bundle reduced to 110-120 KB (from 201 KB)
  2. Time to Interactive (TTI) reduced by 30%+
  3. Largest Contentful Paint (LCP) < 2.5s on 3G
  4. All lazy-loaded components work correctly
  5. No regression in user experience
  6. Loading states shown for slow connections
  7. Chunk loading errors handled gracefully
  8. Bundle analysis shows optimal chunk sizes","","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91","1. Initial JS bundle reduced to 110-120 KB (from 201 KB) | 2. Time to Interactive (TTI) reduced by 30%+ | 3. Largest Contentful Paint (LCP) < 2.5s on 3G | 4. All lazy-loaded components work correctly | 5. No regression in user experience | 6. Loading states shown for slow connections | 7. Chunk loading errors handled gracefully | 8. Bundle analysis shows optimal chunk sizes"
"gh-91-epic-story-1","gh-91-epic-story-1","AUTO","Story","Phase 1: Vendor Splitting (Day 1) - Implement Code Splitting and Lazy Loading","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/91

1. Configure manual chunks in vite.config.ts
2. Split Vue, VueUse, MDI icons, analytics
3. Test bundle sizes
4. Ensure all chunks load correctly","gh-91-epic","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91","1. Initial JS bundle reduced to 110-120 KB (from 201 KB) | 2. Time to Interactive (TTI) reduced by 30%+ | 3. Largest Contentful Paint (LCP) < 2.5s on 3G | 4. All lazy-loaded components work correctly | 5. No regression in user experience | 6. Loading states shown for slow connections | 7. Chunk loading errors handled gracefully | 8. Bundle analysis shows optimal chunk sizes"
"gh-91-epic-story-1-task-1","gh-91-epic-story-1-task-1","AUTO","Sub-task","Configure manual chunks in vite.config.ts","Derived from Phase 1: Vendor Splitting (Day 1)","gh-91-epic-story-1","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91",""
"gh-91-epic-story-1-task-2","gh-91-epic-story-1-task-2","AUTO","Sub-task","Split Vue, VueUse, MDI icons, analytics","Derived from Phase 1: Vendor Splitting (Day 1)","gh-91-epic-story-1","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91",""
"gh-91-epic-story-1-task-3","gh-91-epic-story-1-task-3","AUTO","Sub-task","Test bundle sizes","Derived from Phase 1: Vendor Splitting (Day 1)","gh-91-epic-story-1","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91",""
"gh-91-epic-story-1-task-4","gh-91-epic-story-1-task-4","AUTO","Sub-task","Ensure all chunks load correctly","Derived from Phase 1: Vendor Splitting (Day 1)","gh-91-epic-story-1","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91",""
"gh-91-epic-story-2","gh-91-epic-story-2","AUTO","Story","Phase 2: Component Lazy Loading (Day 2) - Implement Code Splitting and Lazy Loading","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/91

1. Convert CSV modal to lazy load
2. Convert export modal to lazy load
3. Convert background to lazy load
4. Add loading states (Suspense)
5. Test user flows (upload CSV, export)","gh-91-epic","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91","1. Initial JS bundle reduced to 110-120 KB (from 201 KB) | 2. Time to Interactive (TTI) reduced by 30%+ | 3. Largest Contentful Paint (LCP) < 2.5s on 3G | 4. All lazy-loaded components work correctly | 5. No regression in user experience | 6. Loading states shown for slow connections | 7. Chunk loading errors handled gracefully | 8. Bundle analysis shows optimal chunk sizes"
"gh-91-epic-story-2-task-1","gh-91-epic-story-2-task-1","AUTO","Sub-task","Convert CSV modal to lazy load","Derived from Phase 2: Component Lazy Loading (Day 2)","gh-91-epic-story-2","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91",""
"gh-91-epic-story-2-task-2","gh-91-epic-story-2-task-2","AUTO","Sub-task","Convert export modal to lazy load","Derived from Phase 2: Component Lazy Loading (Day 2)","gh-91-epic-story-2","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91",""
"gh-91-epic-story-2-task-3","gh-91-epic-story-2-task-3","AUTO","Sub-task","Convert background to lazy load","Derived from Phase 2: Component Lazy Loading (Day 2)","gh-91-epic-story-2","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91",""
"gh-91-epic-story-2-task-4","gh-91-epic-story-2-task-4","AUTO","Sub-task","Add loading states (Suspense)","Derived from Phase 2: Component Lazy Loading (Day 2)","gh-91-epic-story-2","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91",""
"gh-91-epic-story-2-task-5","gh-91-epic-story-2-task-5","AUTO","Sub-task","Test user flows (upload CSV, export)","Derived from Phase 2: Component Lazy Loading (Day 2)","gh-91-epic-story-2","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91",""
"gh-91-epic-story-3","gh-91-epic-story-3","AUTO","Story","Phase 3: Optimization (Day 3) - Implement Code Splitting and Lazy Loading","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/91

1. Add prefetch for frequently used chunks
2. Optimize chunk sizes (combine small chunks)
3. Test on slow 3G connection
4. Measure Core Web Vitals improvements
5. Update bundle analysis","gh-91-epic","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91","1. Initial JS bundle reduced to 110-120 KB (from 201 KB) | 2. Time to Interactive (TTI) reduced by 30%+ | 3. Largest Contentful Paint (LCP) < 2.5s on 3G | 4. All lazy-loaded components work correctly | 5. No regression in user experience | 6. Loading states shown for slow connections | 7. Chunk loading errors handled gracefully | 8. Bundle analysis shows optimal chunk sizes"
"gh-91-epic-story-3-task-1","gh-91-epic-story-3-task-1","AUTO","Sub-task","Add prefetch for frequently used chunks","Derived from Phase 3: Optimization (Day 3)","gh-91-epic-story-3","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91",""
"gh-91-epic-story-3-task-2","gh-91-epic-story-3-task-2","AUTO","Sub-task","Optimize chunk sizes (combine small chunks)","Derived from Phase 3: Optimization (Day 3)","gh-91-epic-story-3","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91",""
"gh-91-epic-story-3-task-3","gh-91-epic-story-3-task-3","AUTO","Sub-task","Test on slow 3G connection","Derived from Phase 3: Optimization (Day 3)","gh-91-epic-story-3","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91",""
"gh-91-epic-story-3-task-4","gh-91-epic-story-3-task-4","AUTO","Sub-task","Measure Core Web Vitals improvements","Derived from Phase 3: Optimization (Day 3)","gh-91-epic-story-3","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91",""
"gh-91-epic-story-3-task-5","gh-91-epic-story-3-task-5","AUTO","Sub-task","Update bundle analysis","Derived from Phase 3: Optimization (Day 3)","gh-91-epic-story-3","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/91",""
"gh-90-epic","gh-90-epic","AUTO","Epic","[GH#90] Implement Virtual Scrolling for Card Tables","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/90
Labels: [object Object], [object Object], [object Object]

# Implement Virtual Scrolling for Card Tables

**Priority:** High  
**Type:** Performance Enhancement  
**Component:** CardTable.vue  
**Effort:** Medium (2-3 days)

## Problem

CardTable components render all rows at once, causing performance issues with large cardlists:

### Current Issues

- EDHREC cardlists can contain 100-500+ cards
- Rendering 500 DOM nodes causes visible jank and lag
- Scrolling performance degrades with list size
- Memory usage increases linearly with card count
- Mobile devices especially struggle with large lists
- Initial render blocks UI thread for 100-200ms

### User Impact

- **High:** Noticeable lag when scrolling through large cardlists
- Poor experience on mobile devices and low-end hardware
- Application feels sluggish with multiple expanded sections
- Memory pressure on devices with limited RAM
- Lower frame rates during scrolling (< 30 FPS)

## Proposed Solution

### Virtual Scrolling Implementation

Use `@tanstack/vue-virtual` (recommended) or `@vueuse/core` virtual scrolling to render only visible rows:

1. **Virtual List Component**
   - Render only ~20 visible rows at a time
   - Dynamically add/remove rows as user scrolls
   - Maintain scroll position accurately
   - Support variable row heights if needed

2. **Performance Benefits**
   - Constant DOM node count (~20-30 regardless of list size)
   - Smooth 60 FPS scrolling on all devices
   - Reduced memory footprint (10-20 MB savings)
   - Faster initial render (< 50ms vs 100-200ms)

3. **Preserve Functionality**
   - Maintain ownership highlighting
   - Keep hover effects and tooltips
   - Preserve keyboard navigation
   - Support filtering without breaking virtualization

### Implementation Approach

```typescript
// Install virtual scrolling library
npm install @tanstack/vue-virtual

// src/components/VirtualizedCardTable.vue
<script setup lang=""ts"">
import { useVirtualizer } from '@tanstack/vue-virtual';
import { ref, computed } from 'vue';
import type { CardTableRow } from '../types/cards';

interface Props {
  rows: CardTableRow[];
  columns: ColumnDefinition[];
}

const props = defineProps<Props>();
const parentRef = ref<HTMLElement>();

// Configure virtualizer
const virtualizer = useVirtualizer({
  count: props.rows.length,
  getScrollElement: () => parentRef.value,
  estimateSize: () => 60, // Fixed row height in pixels
  overscan: 5, // Render 5 extra rows above/below viewport
});

const virtualRows = computed(() => virtualizer.value.getVirtualItems());
const totalSize = computed(() => virtualizer.value.getTotalSize());
</script>

<template>
  <div ref=""parentRef"" class=""overflow-auto h-[600px]"">
    <div
      :style=""{
        height: `${totalSize}px`,
        position: 'relative',
      }""
    >
      <div
        v-for=""virtualRow in virtualRows""
        :key=""virtualRow.key""
        :style=""{
          position: 'absolute',
          top: 0,
          left: 0,
          width: '100%',
          height: `${virtualRow.size}px`,
          transform: `translateY(${virtualRow.start}px)`,
        }""
      >
        <ScryfallCardRow
          :card=""rows[virtualRow.index]""
          :columns=""columns""
        />
      </div>
    </div>
  </div>
</template>
```

### Fixed vs Dynamic Row Heights

**Option 1: Fixed Height (Recommended)**

- Simpler implementation
- Better performance
- Requires standardizing row height to 60-80px

**Option 2: Dynamic Height**

- Supports variable content
- More complex (need measuring)
- Slightly lower performance
- Use if row content varies significantly

```typescript
// Dynamic height example
estimateSize: (index) => {
  const row = props.rows[index];
  // Calculate based on content
  return row.hasLongText ? 80 : 60;
};
```

## Technical Considerations

### Files to Create

- `src/components/VirtualizedCardTable.vue` - New virtualized version
- `tests/unit/components/VirtualizedCardTable.spec.ts` - Unit tests

### Files to Modify

- `src/components/CardlistSection.vue` - Use VirtualizedCardTable
- `src/components/EdhrecReader.vue` - Pass virtualization props
- `package.json` - Add @tanstack/vue-virtual dependency

### Dependency Evaluation

**@tanstack/vue-virtual**

- Size: ~6 KB (gzipped)
- Mature, well-maintained
- Excellent Vue 3 support
- Flexible API

**@vueuse/core (useVirtualList)**

- Already a dependency (0 KB cost)
- Simpler API
- Sufficient for basic use case
- Less flexible than TanStack

**Recommendation:** Start with `@vueuse/core` to avoid new dependency. Migrate to TanStack if more features needed.

### Virtualization with @vueuse/core

```typescript
// Simpler approach using existing dependency
import { useVirtualList } from ""@vueuse/core"";

const { list, containerProps, wrapperProps } = useVirtualList(toRef(props, ""rows""), {
  itemHeight: 60, // Fixed height
  overscan: 5,
});
```

### Handling Dynamic Filters

```typescript
// Update virtual list when ownership filter changes
watch(
  () => props.rows,
  () => {
    // Virtualization library handles this automatically
    virtualizer.value?.measure();
  }
);
```

## Implementation Plan

### Phase 1: Prototype with @vueuse/core (Day 1)

1. Create VirtualizedCardTable component
2. Implement basic virtual scrolling with fixed heights
3. Test with 500+ card lists
4. Measure performance improvements

### Phase 2: Integration (Day 2)

1. Replace CardTable with VirtualizedCardTable in CardlistSection
2. Update styling to match current design
3. Ensure ownership filtering still works
4. Test keyboard navigation

### Phase 3: Polish & Optimization (Day 3)

1. Fine-tune overscan and item height
2. Add smooth scroll animations
3. Optimize re-renders (memo, shouldUpdate)
4. Performance test on mobile devices
5. Update documentation

### Phase 4: Testing (included in phases above)

1. Unit tests for virtual list logic
2. E2E tests for scrolling behavior
3. Performance benchmarks (before/after)
4. Cross-browser testing

## Acceptance Criteria

- [ ] Card tables with 500+ rows render in < 50ms
- [ ] Scrolling maintains 60 FPS on desktop
- [ ] Scrolling maintains 30+ FPS on mobile
- [ ] Ownership highlighting works in virtualized lists
- [ ] Keyboard navigation (arrow keys) works
- [ ] No visual glitches during fast scrolling
- [ ] Memory usage reduced by 50%+ for large lists
- [ ] Bundle size increase < 10 KB (if new dependency)

## Performance Targets

### Before Virtualization

- 100 cards: ~50ms render, smooth scrolling
- 300 cards: ~150ms render, slight jank
- 500 cards: ~250ms render, noticeable lag
- Memory: ~50 MB for 3 large cardlists

### After Virtualization

- 100 cards: ~30ms render, smooth
- 300 cards: ~35ms render, smooth
- 500 cards: ~40ms render, smooth
- Memory: ~20 MB for 3 large cardlists

## Testing Strategy

### Performance Testing

```typescript
// tests/e2e/performance.spec.ts
test(""virtual scrolling maintains 60 FPS"", async ({ page }) => {
  await page.goto(""/"");

  // Select commander with 500+ card list
  await selectCommander(page, ""Atraxa, Praetors' Voice"");

  // Measure FPS during scroll
  const fps = await measureScrollFPS(page, "".card-table-container"");

  expect(fps).toBeGreaterThan(55); // Allow 5 FPS margin
});
```

### Visual Regression

```typescript
// Ensure virtualization doesn't break layout
test(""virtualized table matches non-virtual layout"", async ({ page }) => {
  await page.goto(""/"");
  await selectCommander(page, ""Atraxa, Praetors' Voice"");

  const screenshot = await page.screenshot();
  expect(screenshot).toMatchSnapshot(""virtual-card-table.png"");
});
```

## Migration Path

### Phase 1: Opt-in (Recommended)

- Add feature flag: `VITE_ENABLE_VIRTUAL_SCROLL`
- Test thoroughly with real users
- Gather feedback before full rollout

### Phase 2: Default Enabled

- Enable by default after 1-2 weeks
- Keep fallback for edge cases
- Monitor error reports

### Phase 3: Remove Old Implementation

- After 1 month, remove non-virtual CardTable
- Clean up feature flag code

## Alternative Approaches Considered

1. **CSS `content-visibility: auto`** - Dismissed: Limited browser support
2. **Intersection Observer lazy rendering** - Considered: More complex, similar benefits
3. **Pagination** - Dismissed: Breaks user flow, poor UX
4. **Load on scroll (infinite scroll)** - Dismissed: Doesn't fit card table UX
5. **DOM recycling** - Considered: Virtual scrolling does this internally

## Related Issues

- #71 - Information density (virtualization enables showing more)
- Performance optimization overall
- Mobile experience improvements

## References

- [TanStack Virtual - Docs](https://tanstack.com/virtual/latest)
- [VueUse - useVirtualList](https://vueuse.org/core/useVirtualList/)
- [Virtual Scrolling - Web.dev](https://web.dev/virtualize-long-lists-react-window/)
- [Measuring Rendering Performance](https://web.dev/rendering-performance/)


Acceptance Criteria:
  1. Card tables with 500+ rows render in < 50ms
  2. Scrolling maintains 60 FPS on desktop
  3. Scrolling maintains 30+ FPS on mobile
  4. Ownership highlighting works in virtualized lists
  5. Keyboard navigation (arrow keys) works
  6. No visual glitches during fast scrolling
  7. Memory usage reduced by 50%+ for large lists
  8. Bundle size increase < 10 KB (if new dependency)","","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90","1. Card tables with 500+ rows render in < 50ms | 2. Scrolling maintains 60 FPS on desktop | 3. Scrolling maintains 30+ FPS on mobile | 4. Ownership highlighting works in virtualized lists | 5. Keyboard navigation (arrow keys) works | 6. No visual glitches during fast scrolling | 7. Memory usage reduced by 50%+ for large lists | 8. Bundle size increase < 10 KB (if new dependency)"
"gh-90-epic-story-1","gh-90-epic-story-1","AUTO","Story","Phase 1: Prototype with @vueuse/core (Day 1) - Implement Virtual Scrolling for Card Tables","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/90

1. Create VirtualizedCardTable component
2. Implement basic virtual scrolling with fixed heights
3. Test with 500+ card lists
4. Measure performance improvements","gh-90-epic","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90","1. Card tables with 500+ rows render in < 50ms | 2. Scrolling maintains 60 FPS on desktop | 3. Scrolling maintains 30+ FPS on mobile | 4. Ownership highlighting works in virtualized lists | 5. Keyboard navigation (arrow keys) works | 6. No visual glitches during fast scrolling | 7. Memory usage reduced by 50%+ for large lists | 8. Bundle size increase < 10 KB (if new dependency)"
"gh-90-epic-story-1-task-1","gh-90-epic-story-1-task-1","AUTO","Sub-task","Create VirtualizedCardTable component","Derived from Phase 1: Prototype with @vueuse/core (Day 1)","gh-90-epic-story-1","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-1-task-2","gh-90-epic-story-1-task-2","AUTO","Sub-task","Implement basic virtual scrolling with fixed heights","Derived from Phase 1: Prototype with @vueuse/core (Day 1)","gh-90-epic-story-1","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-1-task-3","gh-90-epic-story-1-task-3","AUTO","Sub-task","Test with 500+ card lists","Derived from Phase 1: Prototype with @vueuse/core (Day 1)","gh-90-epic-story-1","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-1-task-4","gh-90-epic-story-1-task-4","AUTO","Sub-task","Measure performance improvements","Derived from Phase 1: Prototype with @vueuse/core (Day 1)","gh-90-epic-story-1","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-2","gh-90-epic-story-2","AUTO","Story","Phase 2: Integration (Day 2) - Implement Virtual Scrolling for Card Tables","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/90

1. Replace CardTable with VirtualizedCardTable in CardlistSection
2. Update styling to match current design
3. Ensure ownership filtering still works
4. Test keyboard navigation","gh-90-epic","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90","1. Card tables with 500+ rows render in < 50ms | 2. Scrolling maintains 60 FPS on desktop | 3. Scrolling maintains 30+ FPS on mobile | 4. Ownership highlighting works in virtualized lists | 5. Keyboard navigation (arrow keys) works | 6. No visual glitches during fast scrolling | 7. Memory usage reduced by 50%+ for large lists | 8. Bundle size increase < 10 KB (if new dependency)"
"gh-90-epic-story-2-task-1","gh-90-epic-story-2-task-1","AUTO","Sub-task","Replace CardTable with VirtualizedCardTable in CardlistSection","Derived from Phase 2: Integration (Day 2)","gh-90-epic-story-2","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-2-task-2","gh-90-epic-story-2-task-2","AUTO","Sub-task","Update styling to match current design","Derived from Phase 2: Integration (Day 2)","gh-90-epic-story-2","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-2-task-3","gh-90-epic-story-2-task-3","AUTO","Sub-task","Ensure ownership filtering still works","Derived from Phase 2: Integration (Day 2)","gh-90-epic-story-2","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-2-task-4","gh-90-epic-story-2-task-4","AUTO","Sub-task","Test keyboard navigation","Derived from Phase 2: Integration (Day 2)","gh-90-epic-story-2","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-3","gh-90-epic-story-3","AUTO","Story","Phase 3: Polish & Optimization (Day 3) - Implement Virtual Scrolling for Card Tables","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/90

1. Fine-tune overscan and item height
2. Add smooth scroll animations
3. Optimize re-renders (memo, shouldUpdate)
4. Performance test on mobile devices
5. Update documentation","gh-90-epic","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90","1. Card tables with 500+ rows render in < 50ms | 2. Scrolling maintains 60 FPS on desktop | 3. Scrolling maintains 30+ FPS on mobile | 4. Ownership highlighting works in virtualized lists | 5. Keyboard navigation (arrow keys) works | 6. No visual glitches during fast scrolling | 7. Memory usage reduced by 50%+ for large lists | 8. Bundle size increase < 10 KB (if new dependency)"
"gh-90-epic-story-3-task-1","gh-90-epic-story-3-task-1","AUTO","Sub-task","Fine-tune overscan and item height","Derived from Phase 3: Polish & Optimization (Day 3)","gh-90-epic-story-3","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-3-task-2","gh-90-epic-story-3-task-2","AUTO","Sub-task","Add smooth scroll animations","Derived from Phase 3: Polish & Optimization (Day 3)","gh-90-epic-story-3","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-3-task-3","gh-90-epic-story-3-task-3","AUTO","Sub-task","Optimize re-renders (memo, shouldUpdate)","Derived from Phase 3: Polish & Optimization (Day 3)","gh-90-epic-story-3","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-3-task-4","gh-90-epic-story-3-task-4","AUTO","Sub-task","Performance test on mobile devices","Derived from Phase 3: Polish & Optimization (Day 3)","gh-90-epic-story-3","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-3-task-5","gh-90-epic-story-3-task-5","AUTO","Sub-task","Update documentation","Derived from Phase 3: Polish & Optimization (Day 3)","gh-90-epic-story-3","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-4","gh-90-epic-story-4","AUTO","Story","Phase 4: Testing (included in phases above) - Implement Virtual Scrolling for Card Tables","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/90

1. Unit tests for virtual list logic
2. E2E tests for scrolling behavior
3. Performance benchmarks (before/after)
4. Cross-browser testing","gh-90-epic","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90","1. Card tables with 500+ rows render in < 50ms | 2. Scrolling maintains 60 FPS on desktop | 3. Scrolling maintains 30+ FPS on mobile | 4. Ownership highlighting works in virtualized lists | 5. Keyboard navigation (arrow keys) works | 6. No visual glitches during fast scrolling | 7. Memory usage reduced by 50%+ for large lists | 8. Bundle size increase < 10 KB (if new dependency)"
"gh-90-epic-story-4-task-1","gh-90-epic-story-4-task-1","AUTO","Sub-task","Unit tests for virtual list logic","Derived from Phase 4: Testing (included in phases above)","gh-90-epic-story-4","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-4-task-2","gh-90-epic-story-4-task-2","AUTO","Sub-task","E2E tests for scrolling behavior","Derived from Phase 4: Testing (included in phases above)","gh-90-epic-story-4","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-4-task-3","gh-90-epic-story-4-task-3","AUTO","Sub-task","Performance benchmarks (before/after)","Derived from Phase 4: Testing (included in phases above)","gh-90-epic-story-4","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-90-epic-story-4-task-4","gh-90-epic-story-4-task-4","AUTO","Sub-task","Cross-browser testing","Derived from Phase 4: Testing (included in phases above)","gh-90-epic-story-4","high-priority;performance;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/90",""
"gh-89-epic","gh-89-epic","AUTO","Epic","[GH#89] Implement IndexedDB Caching for Scryfall API","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/89
Assignees: kmcgarry1
Labels: [object Object], [object Object]

# Implement IndexedDB Caching for Scryfall API

**Priority:** High  
**Type:** Performance Enhancement  
**Component:** API Layer (scryfallApi.ts)  
**Effort:** Medium (2-4 days)

## Problem

Currently, the application fetches card data from Scryfall API on every commander search, resulting in:

### Current Issues

- Repeated API calls for frequently viewed cards (Sol Ring, Arcane Signet, etc.)
- 300ms delay between batches adds up over multiple searches
- No offline functionality - app completely breaks without internet
- Poor experience for users who frequently view the same commanders
- Unnecessary load on Scryfall's public API
- Slow data loading on subsequent visits to same commanders

### User Impact

- **High:** Users wait 1-5 seconds for card data they've already loaded before
- Poor user experience when switching between filters (bracket, modifier)
- Data usage concerns for mobile users on metered connections
- Application unusable offline or on slow/unreliable connections

## Proposed Solution

### IndexedDB Caching Strategy

Implement a multi-layer caching system using IndexedDB:

1. **Card Data Cache**
   - Store full Scryfall card objects by card ID
   - TTL: 7 days (cards rarely change)
   - Index by: card name, ID, and normalized name variants

2. **Symbol Cache**
   - Store mana symbol SVG URIs
   - TTL: 30 days (symbols never change)
   - Load once per session from cache

3. **EDHREC Data Cache** (Optional)
   - Cache EDHREC JSON responses by commander slug + filters
   - TTL: 24 hours (data updates daily)
   - Reduce repeated EDHREC API calls

4. **Cache Invalidation Strategy**
   - Background refresh for expired entries
   - Manual cache clear button in settings
   - Version-based invalidation for app updates

### Implementation Approach

```typescript
// src/api/indexedDbCache.ts
interface CachedCard {
  id: string;
  data: ScryfallCard;
  timestamp: number;
  expiresAt: number;
}

class CardCache {
  private db: IDBDatabase;
  private readonly DB_NAME = ""commander-scout-cache"";
  private readonly CARD_STORE = ""cards"";
  private readonly SYMBOL_STORE = ""symbols"";
  private readonly TTL = 7 * 24 * 60 * 60 * 1000; // 7 days

  async init(): Promise<void> {
    // Initialize IndexedDB with version migrations
  }

  async getCachedCard(name: string): Promise<ScryfallCard | null> {
    // Check cache first, return if valid
  }

  async setCachedCard(name: string, card: ScryfallCard): Promise<void> {
    // Store with expiration timestamp
  }

  async clearExpired(): Promise<void> {
    // Background cleanup of expired entries
  }

  async clearAll(): Promise<void> {
    // Manual cache clear
  }
}
```

### Cache-First API Pattern

```typescript
// Modified getCardsByNames in scryfallApi.ts
export async function getCardsByNames(names: string[]): Promise<Map<string, ScryfallCard>> {
  const cache = await getCardCache();
  const results = new Map<string, ScryfallCard>();
  const uncachedNames: string[] = [];

  // 1. Check cache first
  for (const name of names) {
    const cached = await cache.getCachedCard(name);
    if (cached) {
      results.set(name, cached);
    } else {
      uncachedNames.push(name);
    }
  }

  // 2. Fetch uncached from API
  if (uncachedNames.length > 0) {
    const freshCards = await fetchFromScryfall(uncachedNames);

    // 3. Store in cache for next time
    for (const [name, card] of freshCards) {
      await cache.setCachedCard(name, card);
      results.set(name, card);
    }
  }

  return results;
}
```

## Technical Considerations

### Files to Create

- `src/api/indexedDbCache.ts` - IndexedDB abstraction layer
- `src/composables/useCardCache.ts` - Vue composable for cache management
- `src/utils/cacheHelpers.ts` - TTL calculations, version management

### Files to Modify

- `src/api/scryfallApi.ts` - Add cache-first pattern
- `src/composables/useScryfallSymbols.ts` - Cache symbol URIs
- `src/components/ToolkitHeader.vue` - Add cache clear button (optional)

### IndexedDB Schema

```typescript
// Database: commander-scout-cache v1
{
  cards: {
    keyPath: 'id',
    indexes: [
      { name: 'name', keyPath: 'name', unique: false },
      { name: 'expiresAt', keyPath: 'expiresAt', unique: false }
    ]
  },
  symbols: {
    keyPath: 'symbol',
    indexes: [
      { name: 'expiresAt', keyPath: 'expiresAt', unique: false }
    ]
  },
  metadata: {
    keyPath: 'key'
  }
}
```

### Cache Size Management

```typescript
// Limit cache to reasonable size
const MAX_CACHE_SIZE = 50 * 1024 * 1024; // 50 MB
const MAX_CARDS = 5000; // ~5000 unique cards typical

// LRU eviction if limits exceeded
async evictLeastRecentlyUsed(count: number): Promise<void>
```

### Progressive Enhancement

```typescript
// Gracefully degrade if IndexedDB unavailable
let cacheAvailable = false;

try {
  await openDatabase();
  cacheAvailable = true;
} catch (err) {
  console.warn(""IndexedDB unavailable, using direct API calls"");
  // Fall back to current behavior
}
```

## Implementation Plan

### Phase 1: Core Cache Infrastructure (Day 1-2)

1. Create IndexedDB wrapper with async/await API
2. Implement basic get/set operations with TTL
3. Add database versioning and migrations
4. Unit test cache operations

### Phase 2: Scryfall Integration (Day 2-3)

1. Modify `getCardsByNames` to check cache first
2. Add background cache population on app load
3. Test with various commander scenarios
4. Measure performance improvements

### Phase 3: Symbol Caching (Day 3)

1. Cache mana symbols on first load
2. Persist symbol SVG URIs in IndexedDB
3. Reduce symbol API calls to zero after first load

### Phase 4: Cache Management (Day 4)

1. Add cache statistics to dev console
2. Implement manual cache clear
3. Add background cleanup of expired entries
4. Document cache behavior in README

## Acceptance Criteria

- [ ] Scryfall API calls reduced by 80%+ for repeat commander views
- [ ] Cache hit rate > 70% for active users
- [ ] Loading time reduced from 2-5s to < 500ms for cached commanders
- [ ] Cache size stays under 50 MB for typical usage
- [ ] Graceful fallback if IndexedDB unavailable (Safari private mode)
- [ ] Expired entries automatically cleaned up
- [ ] Unit tests for cache operations (get, set, evict, expire)
- [ ] E2E test: view commander, reload page, verify cached load

## Performance Targets

### Before Caching

- First commander load: 2-5 seconds (API fetch + processing)
- Repeat commander load: 2-5 seconds (no caching)
- Data transfer: 500 KB - 2 MB per search

### After Caching

- First commander load: 2-5 seconds (unchanged, must fetch)
- Repeat commander load: < 500ms (cache hit)
- Data transfer: Near-zero for cached commanders
- Cache hit rate: 70%+ for active users

## Security & Privacy Considerations

- IndexedDB is origin-isolated (secure)
- No personal data stored (only public card data)
- Cache cleared on browser cache clear
- Respect user privacy settings
- No cross-origin data leakage

## Alternative Approaches Considered

1. **LocalStorage Cache** - Dismissed: 5-10 MB limit too small
2. **Service Worker Cache** - Considered: More complex, less flexible
3. **In-Memory Cache Only** - Dismissed: Lost on page refresh
4. **Dexie.js Library** - Considered: Adds 15 KB, could simplify code

## Related Issues

- #72 - Empty state design (show cache stats)
- #74 - Loading state visibility (differentiate cached vs API loads)
- Performance optimization overall

## References

- [IndexedDB API - MDN](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API)
- [Dexie.js - IndexedDB Wrapper](https://dexie.org/)
- [Workbox - Service Worker Libraries](https://developers.google.com/web/tools/workbox)
- [Cache Strategies - Web.dev](https://web.dev/offline-cookbook/)


Acceptance Criteria:
  1. Scryfall API calls reduced by 80%+ for repeat commander views
  2. Cache hit rate > 70% for active users
  3. Loading time reduced from 2-5s to < 500ms for cached commanders
  4. Cache size stays under 50 MB for typical usage
  5. Graceful fallback if IndexedDB unavailable (Safari private mode)
  6. Expired entries automatically cleaned up
  7. Unit tests for cache operations (get, set, evict, expire)
  8. E2E test: view commander, reload page, verify cached load","","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89","1. Scryfall API calls reduced by 80%+ for repeat commander views | 2. Cache hit rate > 70% for active users | 3. Loading time reduced from 2-5s to < 500ms for cached commanders | 4. Cache size stays under 50 MB for typical usage | 5. Graceful fallback if IndexedDB unavailable (Safari private mode) | 6. Expired entries automatically cleaned up | 7. Unit tests for cache operations (get, set, evict, expire) | 8. E2E test: view commander, reload page, verify cached load"
"gh-89-epic-story-1","gh-89-epic-story-1","AUTO","Story","Phase 1: Core Cache Infrastructure (Day 1-2) - Implement IndexedDB Caching for Scryfall API","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/89

1. Create IndexedDB wrapper with async/await API
2. Implement basic get/set operations with TTL
3. Add database versioning and migrations
4. Unit test cache operations","gh-89-epic","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89","1. Scryfall API calls reduced by 80%+ for repeat commander views | 2. Cache hit rate > 70% for active users | 3. Loading time reduced from 2-5s to < 500ms for cached commanders | 4. Cache size stays under 50 MB for typical usage | 5. Graceful fallback if IndexedDB unavailable (Safari private mode) | 6. Expired entries automatically cleaned up | 7. Unit tests for cache operations (get, set, evict, expire) | 8. E2E test: view commander, reload page, verify cached load"
"gh-89-epic-story-1-task-1","gh-89-epic-story-1-task-1","AUTO","Sub-task","Create IndexedDB wrapper with async/await API","Derived from Phase 1: Core Cache Infrastructure (Day 1-2)","gh-89-epic-story-1","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-89-epic-story-1-task-2","gh-89-epic-story-1-task-2","AUTO","Sub-task","Implement basic get/set operations with TTL","Derived from Phase 1: Core Cache Infrastructure (Day 1-2)","gh-89-epic-story-1","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-89-epic-story-1-task-3","gh-89-epic-story-1-task-3","AUTO","Sub-task","Add database versioning and migrations","Derived from Phase 1: Core Cache Infrastructure (Day 1-2)","gh-89-epic-story-1","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-89-epic-story-1-task-4","gh-89-epic-story-1-task-4","AUTO","Sub-task","Unit test cache operations","Derived from Phase 1: Core Cache Infrastructure (Day 1-2)","gh-89-epic-story-1","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-89-epic-story-2","gh-89-epic-story-2","AUTO","Story","Phase 2: Scryfall Integration (Day 2-3) - Implement IndexedDB Caching for Scryfall API","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/89

1. Modify `getCardsByNames` to check cache first
2. Add background cache population on app load
3. Test with various commander scenarios
4. Measure performance improvements","gh-89-epic","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89","1. Scryfall API calls reduced by 80%+ for repeat commander views | 2. Cache hit rate > 70% for active users | 3. Loading time reduced from 2-5s to < 500ms for cached commanders | 4. Cache size stays under 50 MB for typical usage | 5. Graceful fallback if IndexedDB unavailable (Safari private mode) | 6. Expired entries automatically cleaned up | 7. Unit tests for cache operations (get, set, evict, expire) | 8. E2E test: view commander, reload page, verify cached load"
"gh-89-epic-story-2-task-1","gh-89-epic-story-2-task-1","AUTO","Sub-task","Modify `getCardsByNames` to check cache first","Derived from Phase 2: Scryfall Integration (Day 2-3)","gh-89-epic-story-2","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-89-epic-story-2-task-2","gh-89-epic-story-2-task-2","AUTO","Sub-task","Add background cache population on app load","Derived from Phase 2: Scryfall Integration (Day 2-3)","gh-89-epic-story-2","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-89-epic-story-2-task-3","gh-89-epic-story-2-task-3","AUTO","Sub-task","Test with various commander scenarios","Derived from Phase 2: Scryfall Integration (Day 2-3)","gh-89-epic-story-2","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-89-epic-story-2-task-4","gh-89-epic-story-2-task-4","AUTO","Sub-task","Measure performance improvements","Derived from Phase 2: Scryfall Integration (Day 2-3)","gh-89-epic-story-2","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-89-epic-story-3","gh-89-epic-story-3","AUTO","Story","Phase 3: Symbol Caching (Day 3) - Implement IndexedDB Caching for Scryfall API","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/89

1. Cache mana symbols on first load
2. Persist symbol SVG URIs in IndexedDB
3. Reduce symbol API calls to zero after first load","gh-89-epic","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89","1. Scryfall API calls reduced by 80%+ for repeat commander views | 2. Cache hit rate > 70% for active users | 3. Loading time reduced from 2-5s to < 500ms for cached commanders | 4. Cache size stays under 50 MB for typical usage | 5. Graceful fallback if IndexedDB unavailable (Safari private mode) | 6. Expired entries automatically cleaned up | 7. Unit tests for cache operations (get, set, evict, expire) | 8. E2E test: view commander, reload page, verify cached load"
"gh-89-epic-story-3-task-1","gh-89-epic-story-3-task-1","AUTO","Sub-task","Cache mana symbols on first load","Derived from Phase 3: Symbol Caching (Day 3)","gh-89-epic-story-3","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-89-epic-story-3-task-2","gh-89-epic-story-3-task-2","AUTO","Sub-task","Persist symbol SVG URIs in IndexedDB","Derived from Phase 3: Symbol Caching (Day 3)","gh-89-epic-story-3","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-89-epic-story-3-task-3","gh-89-epic-story-3-task-3","AUTO","Sub-task","Reduce symbol API calls to zero after first load","Derived from Phase 3: Symbol Caching (Day 3)","gh-89-epic-story-3","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-89-epic-story-4","gh-89-epic-story-4","AUTO","Story","Phase 4: Cache Management (Day 4) - Implement IndexedDB Caching for Scryfall API","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/89

1. Add cache statistics to dev console
2. Implement manual cache clear
3. Add background cleanup of expired entries
4. Document cache behavior in README","gh-89-epic","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89","1. Scryfall API calls reduced by 80%+ for repeat commander views | 2. Cache hit rate > 70% for active users | 3. Loading time reduced from 2-5s to < 500ms for cached commanders | 4. Cache size stays under 50 MB for typical usage | 5. Graceful fallback if IndexedDB unavailable (Safari private mode) | 6. Expired entries automatically cleaned up | 7. Unit tests for cache operations (get, set, evict, expire) | 8. E2E test: view commander, reload page, verify cached load"
"gh-89-epic-story-4-task-1","gh-89-epic-story-4-task-1","AUTO","Sub-task","Add cache statistics to dev console","Derived from Phase 4: Cache Management (Day 4)","gh-89-epic-story-4","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-89-epic-story-4-task-2","gh-89-epic-story-4-task-2","AUTO","Sub-task","Implement manual cache clear","Derived from Phase 4: Cache Management (Day 4)","gh-89-epic-story-4","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-89-epic-story-4-task-3","gh-89-epic-story-4-task-3","AUTO","Sub-task","Add background cleanup of expired entries","Derived from Phase 4: Cache Management (Day 4)","gh-89-epic-story-4","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-89-epic-story-4-task-4","gh-89-epic-story-4-task-4","AUTO","Sub-task","Document cache behavior in README","Derived from Phase 4: Cache Management (Day 4)","gh-89-epic-story-4","high-priority;architecture","https://github.com/kmcgarry1/edhrec-compare/issues/89",""
"gh-87-epic","gh-87-epic","AUTO","Epic","[GH#87] Loading State Visibility Enhancement","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/87
Labels: [object Object], [object Object], [object Object]

# Loading State Visibility Enhancement

**Priority:** Medium  
**Type:** UX Enhancement  
**Component:** GlobalLoadingBanner, EdhrecReader, CardTable  
**Effort:** Low (< 1 day)

## Problem

While a global loading banner exists, it may not be prominent enough during long API operations (bulk Scryfall requests, EDHREC data fetching). Users might think the application has frozen, leading to confusion and repeated actions.

### Current Issues

- Loading banner may be subtle or easily overlooked
- No progress indication for multi-step operations
- Bulk Scryfall requests (75 cards per batch) lack progress feedback
- No skeleton screens showing where content will appear
- Users uncertain about wait time or current status

### User Impact

- **Medium:** Users unsure if app is working during data fetch
- May click buttons multiple times
- May refresh browser thinking app is broken
- Poor perceived performance even if actual speed is good
- Increased support inquiries

## Current Implementation

```vue
<template>
  <div v-if=""isLoading"" class=""loading-banner"">Loading...</div>
</template>
```

## Proposed Solutions

### 1. Prominent Global Loading Banner

Make loading banner more noticeable:

```vue
<template>
  <Transition name=""slide-down"">
    <div v-if=""hasActiveLoading"" class=""fixed top-0 left-0 right-0 z-50"">
      <div class=""bg-emerald-600 text-white px-6 py-3 shadow-lg"">
        <div class=""flex items-center justify-between max-w-6xl mx-auto"">
          <div class=""flex items-center gap-3"">
            <svg class=""animate-spin h-5 w-5"">
              <!-- Spinner icon -->
            </svg>

            <span class=""font-medium"">
              {{ loadingMessage }}
            </span>
          </div>

          <div v-if=""progress"" class=""text-sm"">{{ progress.current }} / {{ progress.total }}</div>
        </div>

        <div v-if=""progress"" class=""mt-2"">
          <div class=""bg-emerald-700 rounded-full h-1"">
            <div
              class=""bg-white rounded-full h-1 transition-all""
              :style=""{ width: `${(progress.current / progress.total) * 100}%` }""
            />
          </div>
        </div>
      </div>
    </div>
  </Transition>
</template>
```

### 2. Skeleton Screens

Show placeholder content while loading:

```vue
<template>
  <div class=""skeleton-card"">
    <div class=""skeleton-image"" />

    <div class=""skeleton-content"">
      <div class=""skeleton-line w-3/4"" />
      <div class=""skeleton-line w-1/2"" />
      <div class=""skeleton-line w-full"" />
    </div>
  </div>
</template>

<style>
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.skeleton-line {
  height: 1rem;
  background: linear-gradient(90deg, #e2e8f0 0%, #cbd5e1 50%, #e2e8f0 100%);
  background-size: 1000px 100%;
  animation: shimmer 2s infinite linear;
  border-radius: 0.25rem;
}
</style>
```

Usage:

```vue
<template>
  <div v-if=""isLoading"">
    <SkeletonCard v-for=""i in 3"" :key=""i"" />
  </div>
  <div v-else>
    <Card v-for=""card in cards"" :key=""card.id"" :card=""card"" />
  </div>
</template>
```

### 3. Enhanced useGlobalLoading Composable

Add progress tracking:

```typescript
// src/composables/useGlobalLoading.ts
interface LoadingState {
  id: string;
  message: string;
  progress?: {
    current: number;
    total: number;
  };
}

const loadingStates = ref<Map<string, LoadingState>>(new Map());

export const useGlobalLoading = () => {
  const startLoading = (id: string, message: string = ""Loading..."", total?: number) => {
    loadingStates.value.set(id, {
      id,
      message,
      progress: total ? { current: 0, total } : undefined,
    });
  };

  const updateProgress = (id: string, current: number) => {
    const state = loadingStates.value.get(id);
    if (state?.progress) {
      state.progress.current = current;
    }
  };

  const stopLoading = (id: string) => {
    loadingStates.value.delete(id);
  };

  return {
    loadingStates,
    startLoading,
    updateProgress,
    stopLoading,
  };
};
```

### 4. Scryfall Progress Tracking

Update API calls to show progress:

```typescript
// src/api/scryfallApi.ts
export const fetchBulkCardData = async (
  cardNames: string[],
  onProgress?: (current: number, total: number) => void
) => {
  const batches = chunk(cardNames, 75);
  const { startLoading, updateProgress, stopLoading } = useGlobalLoading();

  startLoading(""scryfall-bulk"", ""Loading card data..."", batches.length);

  for (let i = 0; i < batches.length; i++) {
    await fetchBatch(batches[i]);
    updateProgress(""scryfall-bulk"", i + 1);
    onProgress?.(i + 1, batches.length);

    if (i < batches.length - 1) {
      await delay(300); // Rate limit respect
    }
  }

  stopLoading(""scryfall-bulk"");
};
```

## Implementation Plan

### Phase 1: Enhanced Banner (2 hours)

1. Make banner full-width and fixed top
2. Add animated spinner icon
3. Improve colors and contrast
4. Add slide-down transition

### Phase 2: Progress Tracking (3 hours)

1. Update useGlobalLoading with progress support
2. Modify Scryfall API to report progress
3. Show progress bar in banner
4. Display current/total counts

### Phase 3: Skeleton Screens (3 hours)

1. Create reusable skeleton components
2. Add to card list, search results
3. Implement shimmer animation
4. Match actual content layout

### Phase 4: Contextual Messages (1 hour)

1. Add specific loading messages per operation
2. Show estimated time for known operations
3. Add cancel button for long operations

## Technical Details

### Files to Modify

- `src/components/GlobalLoadingBanner.vue` - Enhanced banner
- `src/composables/useGlobalLoading.ts` - Progress tracking
- `src/api/scryfallApi.ts` - Report progress
- `src/components/SkeletonCard.vue` - New component
- `src/components/CardTable.vue` - Use skeleton while loading

### Animation Styles

```css
/* Shimmer effect */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    theme(""colors.slate.200"") 0%,
    theme(""colors.slate.300"") 50%,
    theme(""colors.slate.200"") 100%
  );
  background-size: 1000px 100%;
  animation: shimmer 2s infinite linear;
}
```

## Acceptance Criteria

- [ ] Loading banner is immediately visible when loading starts
- [ ] Progress shown for operations with known length
- [ ] Skeleton screens appear for card lists
- [ ] Loading messages are descriptive and contextual
- [ ] Smooth transitions when content appears
- [ ] Banner auto-dismisses when loading completes
- [ ] Multiple simultaneous loaders handled correctly
- [ ] Accessible to screen readers (aria-live)
- [ ] No layout shift when banner appears/disappears
- [ ] Cancel button works for long operations

## User Experience Improvements

**Before:**

- User clicks search
- Screen appears frozen
- No feedback for 3-5 seconds
- Cards suddenly appear

**After:**

- User clicks search
- Banner slides down immediately
- ""Fetching EDHREC recommendations..."" shown
- Progress: ""Loading 2 of 5 batches...""
- Skeleton cards appear
- Real cards fade in smoothly

## Performance Considerations

- Skeleton screens should be lightweight (CSS-only)
- Avoid re-rendering banner on every progress update
- Debounce progress updates if too frequent
- Use CSS animations over JavaScript

## Related Issues

- #72 - Empty states (showing initial state)
- #71 - Information density (affects toolbar density)

## References

- [Skeleton Screens Best Practices](https://www.nngroup.com/articles/skeleton-screens/)
- [Progress Indicators](https://www.nngroup.com/articles/progress-indicators/)
- [Material Design Progress Indicators](https://material.io/components/progress-indicators)
- [ARIA Live Regions](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions)


Acceptance Criteria:
  1. Loading banner is immediately visible when loading starts
  2. Progress shown for operations with known length
  3. Skeleton screens appear for card lists
  4. Loading messages are descriptive and contextual
  5. Smooth transitions when content appears
  6. Banner auto-dismisses when loading completes
  7. Multiple simultaneous loaders handled correctly
  8. Accessible to screen readers (aria-live)
  9. No layout shift when banner appears/disappears
  10. Cancel button works for long operations","","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-87-epic-story-1","gh-87-epic-story-1","AUTO","Story","Phase 1: Enhanced Banner (2 hours) - Loading State Visibility Enhancement","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/87

1. Make banner full-width and fixed top
2. Add animated spinner icon
3. Improve colors and contrast
4. Add slide-down transition","gh-87-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-87-epic-story-1-task-1","gh-87-epic-story-1-task-1","AUTO","Sub-task","Make banner full-width and fixed top","Derived from Phase 1: Enhanced Banner (2 hours)","gh-87-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-87-epic-story-1-task-2","gh-87-epic-story-1-task-2","AUTO","Sub-task","Add animated spinner icon","Derived from Phase 1: Enhanced Banner (2 hours)","gh-87-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-87-epic-story-1-task-3","gh-87-epic-story-1-task-3","AUTO","Sub-task","Improve colors and contrast","Derived from Phase 1: Enhanced Banner (2 hours)","gh-87-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-87-epic-story-1-task-4","gh-87-epic-story-1-task-4","AUTO","Sub-task","Add slide-down transition","Derived from Phase 1: Enhanced Banner (2 hours)","gh-87-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-87-epic-story-2","gh-87-epic-story-2","AUTO","Story","Phase 2: Progress Tracking (3 hours) - Loading State Visibility Enhancement","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/87

1. Update useGlobalLoading with progress support
2. Modify Scryfall API to report progress
3. Show progress bar in banner
4. Display current/total counts","gh-87-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-87-epic-story-2-task-1","gh-87-epic-story-2-task-1","AUTO","Sub-task","Update useGlobalLoading with progress support","Derived from Phase 2: Progress Tracking (3 hours)","gh-87-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-87-epic-story-2-task-2","gh-87-epic-story-2-task-2","AUTO","Sub-task","Modify Scryfall API to report progress","Derived from Phase 2: Progress Tracking (3 hours)","gh-87-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-87-epic-story-2-task-3","gh-87-epic-story-2-task-3","AUTO","Sub-task","Show progress bar in banner","Derived from Phase 2: Progress Tracking (3 hours)","gh-87-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-87-epic-story-2-task-4","gh-87-epic-story-2-task-4","AUTO","Sub-task","Display current/total counts","Derived from Phase 2: Progress Tracking (3 hours)","gh-87-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-87-epic-story-3","gh-87-epic-story-3","AUTO","Story","Phase 3: Skeleton Screens (3 hours) - Loading State Visibility Enhancement","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/87

1. Create reusable skeleton components
2. Add to card list, search results
3. Implement shimmer animation
4. Match actual content layout","gh-87-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-87-epic-story-3-task-1","gh-87-epic-story-3-task-1","AUTO","Sub-task","Create reusable skeleton components","Derived from Phase 3: Skeleton Screens (3 hours)","gh-87-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-87-epic-story-3-task-2","gh-87-epic-story-3-task-2","AUTO","Sub-task","Add to card list, search results","Derived from Phase 3: Skeleton Screens (3 hours)","gh-87-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-87-epic-story-3-task-3","gh-87-epic-story-3-task-3","AUTO","Sub-task","Implement shimmer animation","Derived from Phase 3: Skeleton Screens (3 hours)","gh-87-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-87-epic-story-3-task-4","gh-87-epic-story-3-task-4","AUTO","Sub-task","Match actual content layout","Derived from Phase 3: Skeleton Screens (3 hours)","gh-87-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-87-epic-story-4","gh-87-epic-story-4","AUTO","Story","Phase 4: Contextual Messages (1 hour) - Loading State Visibility Enhancement","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/87

1. Add specific loading messages per operation
2. Show estimated time for known operations
3. Add cancel button for long operations","gh-87-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-87-epic-story-4-task-1","gh-87-epic-story-4-task-1","AUTO","Sub-task","Add specific loading messages per operation","Derived from Phase 4: Contextual Messages (1 hour)","gh-87-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-87-epic-story-4-task-2","gh-87-epic-story-4-task-2","AUTO","Sub-task","Show estimated time for known operations","Derived from Phase 4: Contextual Messages (1 hour)","gh-87-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-87-epic-story-4-task-3","gh-87-epic-story-4-task-3","AUTO","Sub-task","Add cancel button for long operations","Derived from Phase 4: Contextual Messages (1 hour)","gh-87-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/87",""
"gh-86-epic","gh-86-epic","AUTO","Epic","[GH#86] Form Input Accessibility Improvements","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/86
Labels: [object Object], [object Object], [object Object]

# Form Input Accessibility Improvements

**Priority:** Medium  
**Type:** Accessibility Enhancement  
**Component:** CommanderSearch, CSVUpload  
**Effort:** Low (< 1 day)

## Problem

Form inputs rely on placeholder text and `aria-label` attributes without visible labels. While this works for screen readers, it's not optimal for all users, especially those with cognitive disabilities or low vision who benefit from persistent visible labels.

### Current Issues

- Primary commander search uses placeholder text that disappears on focus
- No persistent label visible to sighted users
- Search icon positioned inside input may reduce text space
- No clear/reset button visible when input has text
- Missing validation feedback or character limits

### Accessibility Impact

- **WCAG 2.1 Level AA:** Partially fails 3.3.2 (Labels or Instructions)
- Screen reader users: âœ… Works (aria-label present)
- Low vision users: âš ï¸ Suboptimal (no persistent label)
- Cognitive disabilities: âš ï¸ Context lost when placeholder disappears

## Screenshots

- [Commander search input](https://github.com/user-attachments/assets/45f1f1e9-f478-4aa9-a40f-083ef4c8b453)

## Current Implementation

```vue
<input type=""text"" placeholder=""Search for a commander..."" aria-label=""Commander search"" />
```

## Proposed Solution

### Floating Label Pattern

Implement Material Design-style floating labels that:

1. Start as placeholder text when empty
2. Float above input on focus or when filled
3. Remain visible at all times after first interaction
4. Provide visual hierarchy and context

```vue
<template>
  <div class=""form-field"">
    <input v-model=""searchTerm"" type=""text"" id=""commander-search"" class=""peer"" placeholder="" "" />
    <label for=""commander-search"" class=""floating-label""> Primary Commander </label>
    <button v-if=""searchTerm"" @click=""clear"" class=""clear-btn"">âœ•</button>
  </div>
</template>

<style>
.floating-label {
  position: absolute;
  transition: all 0.2s;
  pointer-events: none;
}

.peer:focus ~ .floating-label,
.peer:not(:placeholder-shown) ~ .floating-label {
  transform: translateY(-1.5rem) scale(0.85);
  color: theme(""colors.emerald.600"");
}
</style>
```

### Alternative: Visible Label Above Input

Simpler approach if floating labels seem too complex:

```vue
<template>
  <div class=""form-field"">
    <label for=""commander-search"" class=""block text-sm font-medium mb-2""> Primary Commander </label>
    <input
      v-model=""searchTerm""
      type=""text""
      id=""commander-search""
      placeholder=""Search for a commander...""
    />
  </div>
  <p class=""help-text"">Select the main deck commander.</p>
</template>
```

### Additional Enhancements

#### 1. Clear Button

```vue
<button
  v-if=""searchTerm""
  @click=""clear""
  class=""absolute right-2 top-1/2 -translate-y-1/2""
  aria-label=""Clear search""
>
  âœ•
</button>
```

#### 2. Search Suggestions Dropdown

```vue
<ul v-if=""suggestions.length"" role=""listbox"">
  <li
    v-for=""suggestion in suggestions""
    :key=""suggestion.id""
    role=""option""
    @click=""selectCommander(suggestion)""
  >
    {{ suggestion.name }}
  </li>
</ul>
```

#### 3. Validation Feedback

```vue
<p v-if=""error"" role=""alert"" class=""error-message"">
  {{ error }}
</p>

<p v-if=""success"" role=""status"" class=""success-message"">
  {{ success }}
</p>
```

## Implementation Plan

### Phase 1: Visible Labels

1. Add visible labels above all inputs
2. Keep aria-labels for redundancy
3. Style labels consistently

### Phase 2: Clear Buttons

1. Add clear button to search inputs
2. Show only when input has value
3. Ensure keyboard accessible

### Phase 3: Floating Labels (Optional)

1. Implement CSS-only floating label
2. Add smooth transitions
3. Test across browsers

### Phase 4: Enhanced Feedback

1. Add validation messages
2. Implement inline help text
3. Show character counts where relevant

## Technical Details

### Files to Modify

- `src/components/CommanderSearch.vue` - Primary search input
- `src/components/CSVUpload.vue` - File input label
- Create shared `FormField.vue` component for consistency

### Reusable Component

```vue
<script setup lang=""ts"">
import { computed } from ""vue"";

interface Props {
  label: string;
  modelValue: string;
  placeholder?: string;
  helpText?: string;
  error?: string;
  type?: ""text"" | ""email"" | ""password"";
}

const props = withDefaults(defineProps<Props>(), {
  type: ""text"",
});

const emit = defineEmits<{
  ""update:modelValue"": [value: string];
  clear: [];
}>();

const hasValue = computed(() => props.modelValue.length > 0);
</script>

<template>
  <div class=""form-field"">
    <label :for=""label"" class=""block text-sm font-medium mb-2"">
      {{ label }}
    </label>

    <div class=""relative"">
      <input
        :value=""modelValue""
        @input=""emit('update:modelValue', ($event.target as HTMLInputElement).value)""
        :type=""type""
        :id=""label""
        :placeholder=""placeholder""
        class=""w-full px-4 py-2 pr-10""
      />

      <button
        v-if=""hasValue""
        @click=""emit('clear')""
        class=""absolute right-2 top-1/2 -translate-y-1/2""
        aria-label=""Clear input""
      >
        âœ•
      </button>
    </div>

    <p v-if=""helpText"" class=""text-xs text-slate-600 mt-1"">
      {{ helpText }}
    </p>

    <p v-if=""error"" role=""alert"" class=""text-xs text-red-600 mt-1"">
      {{ error }}
    </p>
  </div>
</template>
```

### Usage Example

```vue
<template>
  <FormField
    v-model=""commanderName""
    label=""Primary Commander""
    placeholder=""Search for a commander...""
    help-text=""Enter the name of your deck commander""
    :error=""validationError""
    @clear=""commanderName = ''""
  />
</template>
```

## Acceptance Criteria

- [ ] All form inputs have visible labels
- [ ] Labels persist when input is focused or filled
- [ ] Clear buttons appear on all text inputs when filled
- [ ] Labels maintain contrast ratio of 4.5:1 minimum
- [ ] Labels properly associated with inputs (for/id)
- [ ] Screen reader announces label, value, and validation
- [ ] Keyboard navigation works for all interactions
- [ ] Help text provides additional context where needed
- [ ] Error messages are accessible (role=""alert"")
- [ ] Passes axe-core accessibility audit

## Testing Checklist

- [ ] Test with NVDA screen reader (Windows)
- [ ] Test with VoiceOver (macOS/iOS)
- [ ] Verify keyboard-only navigation
- [ ] Check color contrast with tools
- [ ] Test with 200% zoom
- [ ] Verify in high contrast mode
- [ ] Test with forms auto-fill

## WCAG Success Criteria

This enhancement addresses:

- **3.3.2 Labels or Instructions (Level A)** - Visible labels provided
- **2.4.6 Headings and Labels (Level AA)** - Descriptive labels
- **1.3.1 Info and Relationships (Level A)** - Proper form structure
- **4.1.2 Name, Role, Value (Level A)** - Semantic HTML

## Related Issues

- #69 - Mobile toolbar (touch targets)

## References

- [WCAG 3.3.2 Labels or Instructions](https://www.w3.org/WAI/WCAG21/Understanding/labels-or-instructions.html)
- [Material Design Text Fields](https://material.io/components/text-fields)
- [Floating Labels Are Problematic](https://medium.com/simple-human/floating-labels-are-a-bad-idea-82edb64220f6)
- [Placeholders in Form Fields Are Harmful](https://www.nngroup.com/articles/form-design-placeholders/)


Acceptance Criteria:
  1. All form inputs have visible labels
  2. Labels persist when input is focused or filled
  3. Clear buttons appear on all text inputs when filled
  4. Labels maintain contrast ratio of 4.5:1 minimum
  5. Labels properly associated with inputs (for/id)
  6. Screen reader announces label, value, and validation
  7. Keyboard navigation works for all interactions
  8. Help text provides additional context where needed
  9. Error messages are accessible (role=""alert"")
  10. Passes axe-core accessibility audit","","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-86-epic-story-1","gh-86-epic-story-1","AUTO","Story","Phase 1: Visible Labels - Form Input Accessibility Improvements","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/86

1. Add visible labels above all inputs
2. Keep aria-labels for redundancy
3. Style labels consistently","gh-86-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-86-epic-story-1-task-1","gh-86-epic-story-1-task-1","AUTO","Sub-task","Add visible labels above all inputs","Derived from Phase 1: Visible Labels","gh-86-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86",""
"gh-86-epic-story-1-task-2","gh-86-epic-story-1-task-2","AUTO","Sub-task","Keep aria-labels for redundancy","Derived from Phase 1: Visible Labels","gh-86-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86",""
"gh-86-epic-story-1-task-3","gh-86-epic-story-1-task-3","AUTO","Sub-task","Style labels consistently","Derived from Phase 1: Visible Labels","gh-86-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86",""
"gh-86-epic-story-2","gh-86-epic-story-2","AUTO","Story","Phase 2: Clear Buttons - Form Input Accessibility Improvements","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/86

1. Add clear button to search inputs
2. Show only when input has value
3. Ensure keyboard accessible","gh-86-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-86-epic-story-2-task-1","gh-86-epic-story-2-task-1","AUTO","Sub-task","Add clear button to search inputs","Derived from Phase 2: Clear Buttons","gh-86-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86",""
"gh-86-epic-story-2-task-2","gh-86-epic-story-2-task-2","AUTO","Sub-task","Show only when input has value","Derived from Phase 2: Clear Buttons","gh-86-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86",""
"gh-86-epic-story-2-task-3","gh-86-epic-story-2-task-3","AUTO","Sub-task","Ensure keyboard accessible","Derived from Phase 2: Clear Buttons","gh-86-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86",""
"gh-86-epic-story-3","gh-86-epic-story-3","AUTO","Story","Phase 3: Floating Labels (Optional) - Form Input Accessibility Improvements","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/86

1. Implement CSS-only floating label
2. Add smooth transitions
3. Test across browsers","gh-86-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-86-epic-story-3-task-1","gh-86-epic-story-3-task-1","AUTO","Sub-task","Implement CSS-only floating label","Derived from Phase 3: Floating Labels (Optional)","gh-86-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86",""
"gh-86-epic-story-3-task-2","gh-86-epic-story-3-task-2","AUTO","Sub-task","Add smooth transitions","Derived from Phase 3: Floating Labels (Optional)","gh-86-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86",""
"gh-86-epic-story-3-task-3","gh-86-epic-story-3-task-3","AUTO","Sub-task","Test across browsers","Derived from Phase 3: Floating Labels (Optional)","gh-86-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86",""
"gh-86-epic-story-4","gh-86-epic-story-4","AUTO","Story","Phase 4: Enhanced Feedback - Form Input Accessibility Improvements","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/86

1. Add validation messages
2. Implement inline help text
3. Show character counts where relevant","gh-86-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-86-epic-story-4-task-1","gh-86-epic-story-4-task-1","AUTO","Sub-task","Add validation messages","Derived from Phase 4: Enhanced Feedback","gh-86-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86",""
"gh-86-epic-story-4-task-2","gh-86-epic-story-4-task-2","AUTO","Sub-task","Implement inline help text","Derived from Phase 4: Enhanced Feedback","gh-86-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86",""
"gh-86-epic-story-4-task-3","gh-86-epic-story-4-task-3","AUTO","Sub-task","Show character counts where relevant","Derived from Phase 4: Enhanced Feedback","gh-86-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/86",""
"gh-85-epic","gh-85-epic","AUTO","Epic","[GH#85] Empty State Design","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/85
Labels: [object Object], [object Object], [object Object]

# Empty State Design

**Priority:** Medium  
**Type:** UX Enhancement  
**Component:** EdhrecReader, Dashboard  
**Effort:** Low (< 1 day)

## Problem

When no commander is selected, the interface shows filters and instructions but no visual placeholder for where results will appear. This leaves users uncertain about what to expect and doesn't communicate the value proposition effectively.

### Current Issues

- No indication of where commander data will appear
- Missing visual feedback about expected outcome
- Empty space below filters looks unfinished
- No guidance on popular commanders or next steps
- Opportunity to educate users about features

### User Impact

- **Medium:** New users unsure what the interface will show
- Reduced confidence in using the tool
- Missed opportunity to guide user behavior
- No examples of tool value until after first search

## Screenshots

- [Current empty state](https://github.com/user-attachments/assets/45f1f1e9-f478-4aa9-a40f-083ef4c8b453)

## Proposed Solution

### Empty State Component

Create visually appealing placeholder that:

1. Shows where content will appear
2. Provides helpful guidance
3. Suggests popular commanders
4. Illustrates the value proposition

### Design Options

#### Option A: Illustrated Placeholder

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚        [Magic Wand Icon]            â”‚
â”‚                                     â”‚
â”‚   Search for a commander above      â”‚
â”‚   to see EDHREC recommendations     â”‚
â”‚                                     â”‚
â”‚   Popular commanders:               â”‚
â”‚   â€¢ Atraxa, Grand Unifier          â”‚
â”‚   â€¢ The Ur-Dragon                   â”‚
â”‚   â€¢ Miirym, Sentinel Wyrm          â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Option B: Preview Cards (Skeleton)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [------] â”‚  â”‚ [------] â”‚  â”‚ [------] â”‚
â”‚ [------] â”‚  â”‚ [------] â”‚  â”‚ [------] â”‚
â”‚ [------] â”‚  â”‚ [------] â”‚  â”‚ [------] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     Results will appear here
```

#### Option C: Feature Showcase

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ¨ Compare EDHREC recommendations  â”‚
â”‚     with your personal collection   â”‚
â”‚                                     â”‚
â”‚  ðŸ“Š View card prices from Scryfall â”‚
â”‚                                     â”‚
â”‚  ðŸŽ¯ Filter by owned/unowned cards  â”‚
â”‚                                     â”‚
â”‚  Start by searching a commander â†‘  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Recommended Approach (Hybrid)

Combine elements from all options:

```vue
<template>
  <div class=""empty-state"">
    <div class=""icon-wrapper"">
      <svg><!-- Card icon --></svg>
    </div>

    <h3>Find Your Next Commander Deck</h3>

    <p>
      Search for a commander above to see EDHREC recommendations, Scryfall pricing, and highlight
      cards you already own.
    </p>

    <div class=""popular-commanders"">
      <h4>Popular Commanders</h4>
      <ul>
        <li>Atraxa, Grand Unifier</li>
        <li>The Ur-Dragon</li>
        <li>Miirym, Sentinel Wyrm</li>
        <!-- Clickable suggestions -->
      </ul>
    </div>

    <p class=""tip"">ðŸ’¡ Tip: Upload a CSV to highlight owned cards</p>
  </div>
</template>
```

### Visual Design

**Colors:**

- Use muted slate tones (not distracting)
- Accent with emerald for interactive elements
- Subtle gradients for depth

**Typography:**

- Large heading (text-xl or text-2xl)
- Medium description (text-sm)
- Small hints (text-xs)

**Spacing:**

- Generous padding (p-12)
- Centered layout
- Adequate breathing room

**Iconography:**

- Stylized card deck illustration
- SVG icons for features
- Avoid generic ""no data"" icons

## Implementation Details

### New Component

```typescript
// src/components/EdhrecEmptyState.vue
<script setup lang=""ts"">
import { ref } from 'vue';

const popularCommanders = ref([
  'Atraxa, Grand Unifier',
  'The Ur-Dragon',
  'Miirym, Sentinel Wyrm',
]);

const emit = defineEmits<{
  selectCommander: [name: string];
}>();
</script>

<template>
  <div class=""flex flex-col items-center justify-center min-h-[400px] text-center p-12"">
    <div class=""mb-6"">
      <svg class=""w-24 h-24 text-slate-300"">
        <!-- Card icon -->
      </svg>
    </div>

    <h3 class=""text-2xl font-bold text-slate-700 dark:text-slate-200 mb-4"">
      Find Your Next Commander Deck
    </h3>
    <p class=""text-sm text-slate-600 dark:text-slate-400 max-w-md mb-8"">
      Search for a commander above to see EDHREC recommendations,
      live Scryfall pricing, and highlight cards you already own.
    </p>

    <div class=""mb-6"">
      <p class=""text-xs font-semibold text-slate-500 mb-3"">
        Popular Commanders
      </p>
      <div class=""flex flex-col gap-2"">
        <button
          v-for=""commander in popularCommanders""
          :key=""commander""
          @click=""emit('selectCommander', commander)""
          class=""text-sm text-emerald-600 hover:text-emerald-700""
        >
          {{ commander }}
        </button>
      </div>
    </div>

    <p class=""text-xs text-slate-500 flex items-center gap-2"">
      <svg class=""w-4 h-4"">ðŸ’¡</svg>
      Tip: Upload a CSV to automatically highlight cards you own
    </p>
  </div>
</template>
```

### Integration in EdhrecReader

```vue
<template>
  <div>
    <CommanderSearch />
    <CommanderFilters />

    <EdhrecEmptyState v-if=""!selectedCommander"" @select-commander=""handleCommanderSelection"" />

    <CardList v-else :cards=""cards"" />
  </div>
</template>
```

## Acceptance Criteria

- [ ] Empty state shown when no commander selected
- [ ] Illustration is visually appealing and on-brand
- [ ] Popular commander suggestions are clickable
- [ ] Clicking suggestion auto-fills search and triggers query
- [ ] Empty state hidden once commander data loads
- [ ] Works in both light and dark modes
- [ ] Responsive on mobile (stacked layout)
- [ ] Smooth transition when data loads
- [ ] Copy is clear and helpful
- [ ] No layout shift when transitioning to results

## Variations for Different States

### No Commander Selected (Initial)

Show full empty state with suggestions

### Loading Commander Data

Show skeleton cards or loading spinner

### No Results Found

Show different message: ""No recommendations found for this commander""

### API Error

Show error state with retry button

## Related Issues

- #74 - Loading states (skeleton screens)
- #71 - Information density (affects layout)

## Inspiration Examples

- GitHub's empty repository state
- Notion's empty page illustrations
- Vercel's project empty state
- Linear's empty views

## References

- [Empty States - Laws of UX](https://lawsofux.com/empty-state/)
- [Material Design Empty States](https://material.io/design/communication/empty-states.html)
- [Empty State Best Practices](https://www.nngroup.com/articles/empty-state/)


Acceptance Criteria:
  1. Empty state shown when no commander selected
  2. Illustration is visually appealing and on-brand
  3. Popular commander suggestions are clickable
  4. Clicking suggestion auto-fills search and triggers query
  5. Empty state hidden once commander data loads
  6. Works in both light and dark modes
  7. Responsive on mobile (stacked layout)
  8. Smooth transition when data loads
  9. Copy is clear and helpful
  10. No layout shift when transitioning to results","","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/85","1. Empty state shown when no commander selected | 2. Illustration is visually appealing and on-brand | 3. Popular commander suggestions are clickable | 4. Clicking suggestion auto-fills search and triggers query | 5. Empty state hidden once commander data loads | 6. Works in both light and dark modes | 7. Responsive on mobile (stacked layout) | 8. Smooth transition when data loads | 9. Copy is clear and helpful | 10. No layout shift when transitioning to results"
"gh-75-epic","gh-75-epic","AUTO","Epic","[GH#75] Micro-interactions & Visual Polish","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/75
Assignees: Copilot
Labels: [object Object], [object Object], [object Object]

# Micro-interactions & Visual Polish

**Priority:** Low  
**Type:** Enhancement  
**Component:** Global  
**Effort:** Low-Medium (1-3 days)

## Description

Add subtle animations and micro-interactions throughout the interface to enhance the premium feel, provide feedback, and delight users. These small touches improve perceived performance and make the application feel more responsive.

## Proposed Enhancements

### 1. Success Animation for CSV Upload

**Current:** File uploads, modal closes  
**Proposed:** Checkmark animation with scale bounce

```vue
<Transition name=""success-checkmark"">
  <div v-if=""uploadSuccess"" class=""success-indicator"">
    <svg class=""checkmark"" viewBox=""0 0 52 52"">
      <circle class=""checkmark-circle"" cx=""26"" cy=""26"" r=""25"" />
      <path class=""checkmark-check"" d=""M14 27l7.5 7.5L38 18"" />
    </svg>
  </div>
</Transition>

<style>
.checkmark-circle {
  stroke-dasharray: 166;
  stroke-dashoffset: 166;
  animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
}

.checkmark-check {
  stroke-dasharray: 48;
  stroke-dashoffset: 48;
  animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.5s forwards;
}

@keyframes stroke {
  100% {
    stroke-dashoffset: 0;
  }
}
</style>
```

### 2. Card Enter/Exit Transitions

**Current:** Cards appear instantly  
**Proposed:** Staggered fade-up animation

```vue
<TransitionGroup name=""card-list"" tag=""div"" @before-enter=""onBeforeEnter"" @enter=""onEnter"">
  <CardRow
    v-for=""(card, index) in cards""
    :key=""card.id""
    :data-index=""index""
  />
</TransitionGroup>

<script>
const onBeforeEnter = (el: Element) => {
  (el as HTMLElement).style.opacity = '0';
  (el as HTMLElement).style.transform = 'translateY(20px)';
};

const onEnter = (el: Element, done: () => void) => {
  const delay = (el as HTMLElement).dataset.index * 50;
  setTimeout(() => {
    (el as HTMLElement).style.transition = 'all 0.4s ease';
    (el as HTMLElement).style.opacity = '1';
    (el as HTMLElement).style.transform = 'translateY(0)';
    done();
  }, delay);
};
</script>
```

### 3. Card Hover Lift Effect

**Current:** Static cards  
**Proposed:** Subtle elevation on hover

```css
.card-hover {
  transition:
    transform 0.2s ease,
    box-shadow 0.2s ease;
}

.card-hover:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.15);
}
```

### 4. Button Click Ripple Effect

**Proposed:** Material Design-style ripple

```vue
<button @click=""handleClick"" class=""relative overflow-hidden"">
  <span class=""button-content"">Click me</span>
  <span 
    v-for=""ripple in ripples""
    :key=""ripple.id""
    class=""ripple""
    :style=""{
      left: ripple.x + 'px',
      top: ripple.y + 'px'
    }""
  />
</button>

<script>
const ripples = ref([]);

const handleClick = (event) => {
  const rect = event.currentTarget.getBoundingClientRect();
  const x = event.clientX - rect.left;
  const y = event.clientY - rect.top;

  const ripple = { id: Date.now(), x, y };
  ripples.value.push(ripple);

  setTimeout(() => {
    ripples.value = ripples.value.filter((r) => r.id !== ripple.id);
  }, 600);
};
</script>

<style>
.ripple {
  position: absolute;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.5);
  transform: translate(-50%, -50%) scale(0);
  animation: ripple-animation 0.6s ease-out;
}

@keyframes ripple-animation {
  to {
    transform: translate(-50%, -50%) scale(4);
    opacity: 0;
  }
}
</style>
```

### 5. Icon Transitions

**Proposed:** Smooth morphing between states

```vue
<!-- Theme toggle icon transition -->
<Transition name=""icon-flip"" mode=""out-in"">
  <SunIcon v-if=""theme === 'light'"" key=""sun"" />
  <MoonIcon v-else key=""moon"" />
</Transition>

<style>
.icon-flip-enter-active,
.icon-flip-leave-active {
  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.icon-flip-enter-from {
  transform: rotateY(90deg) scale(0.5);
  opacity: 0;
}

.icon-flip-leave-to {
  transform: rotateY(-90deg) scale(0.5);
  opacity: 0;
}
</style>
```

### 6. Loading Pulse Animation

**Proposed:** Breathing effect on loading elements

```css
@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.loading-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}
```

### 7. Smooth Scroll Behavior

```css
html {
  scroll-behavior: smooth;
}

/* Or with JavaScript for more control */
const scrollToTop = () => {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
};
```

### 8. Toast Notification Animation

**Proposed:** Slide in from right with bounce

```vue
<Transition name=""toast"" @enter=""onToastEnter"" @leave=""onToastLeave"">
  <div v-if=""visible"" class=""toast"">
    {{ message }}
  </div>
</Transition>

<style>
.toast-enter-active {
  animation: slide-in-bounce 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.toast-leave-active {
  animation: slide-out 0.3s ease-in;
}

@keyframes slide-in-bounce {
  0% {
    transform: translateX(100%);
  }
  60% {
    transform: translateX(-10px);
  }
  100% {
    transform: translateX(0);
  }
}

@keyframes slide-out {
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}
</style>
```

## Implementation Guidelines

### Performance Considerations

1. **Use CSS Transforms** (hardware accelerated)
   - `transform: translate()` over `left`/`top`
   - `opacity` for fades
   - Avoid animating `width`, `height`, `margin`, `padding`

2. **Will-change Hint**

   ```css
   .will-animate {
     will-change: transform, opacity;
   }
   ```

3. **Reduce Motion Preference**
   ```css
   @media (prefers-reduced-motion: reduce) {
     *,
     *::before,
     *::after {
       animation-duration: 0.01ms !important;
       animation-iteration-count: 1 !important;
       transition-duration: 0.01ms !important;
     }
   }
   ```

### Animation Timing

- **Instant:** < 100ms (feels immediate)
- **Quick:** 100-200ms (button feedback)
- **Standard:** 200-400ms (most transitions)
- **Emphasis:** 400-600ms (important changes)
- **Slow:** > 600ms (special effects only)

### Easing Functions

```css
/* Material Design easing */
--ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
--ease-decelerate: cubic-bezier(0, 0, 0.2, 1); /* Enter */
--ease-accelerate: cubic-bezier(0.4, 0, 1, 1); /* Exit */

/* Spring-like bounce */
--ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
```

## Acceptance Criteria

- [ ] CSV upload shows success animation
- [ ] Cards fade in with stagger effect
- [ ] Card hover shows lift effect
- [ ] Buttons have ripple or scale feedback
- [ ] Icon transitions are smooth
- [ ] Toast notifications slide in nicely
- [ ] All animations respect `prefers-reduced-motion`
- [ ] No jank or dropped frames (60fps)
- [ ] Animations feel purposeful, not gratuitous
- [ ] Total animation CSS < 5KB

## Files to Create/Modify

- `src/utils/animations.ts` - Reusable animation utilities
- `src/components/*.vue` - Add transitions to components
- `src/assets/animations.css` - Shared animation keyframes
- Update Tailwind config with custom animations

## Related Issues

- #TBD-button-states
- #TBD-loading-states
- docs/issues/medium-priority/09-accessibility-improvements.md (reduced motion)

## References

- [Material Design Motion](https://material.io/design/motion/)
- [Framer Motion Principles](https://www.framer.com/motion/)
- [CSS Easing Functions](https://easings.net/)
- [Reduced Motion Query](https://web.dev/prefers-reduced-motion/)


Acceptance Criteria:
  1. CSV upload shows success animation
  2. Cards fade in with stagger effect
  3. Card hover shows lift effect
  4. Buttons have ripple or scale feedback
  5. Icon transitions are smooth
  6. Toast notifications slide in nicely
  7. All animations respect `prefers-reduced-motion`
  8. No jank or dropped frames (60fps)
  9. Animations feel purposeful, not gratuitous
  10. Total animation CSS < 5KB","","low-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/75","1. CSV upload shows success animation | 2. Cards fade in with stagger effect | 3. Card hover shows lift effect | 4. Buttons have ripple or scale feedback | 5. Icon transitions are smooth | 6. Toast notifications slide in nicely | 7. All animations respect `prefers-reduced-motion` | 8. No jank or dropped frames (60fps) | 9. Animations feel purposeful, not gratuitous | 10. Total animation CSS < 5KB"
"gh-74-epic","gh-74-epic","AUTO","Epic","[GH#74] Loading State Visibility Enhancement","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/74
Assignees: Copilot
Labels: [object Object], [object Object], [object Object]

# Loading State Visibility Enhancement

**Priority:** Medium  
**Type:** UX Enhancement  
**Component:** GlobalLoadingBanner, EdhrecReader, CardTable  
**Effort:** Low (< 1 day)

## Problem

While a global loading banner exists, it may not be prominent enough during long API operations (bulk Scryfall requests, EDHREC data fetching). Users might think the application has frozen, leading to confusion and repeated actions.

### Current Issues

- Loading banner may be subtle or easily overlooked
- No progress indication for multi-step operations
- Bulk Scryfall requests (75 cards per batch) lack progress feedback
- No skeleton screens showing where content will appear
- Users uncertain about wait time or current status

### User Impact

- **Medium:** Users unsure if app is working during data fetch
- May click buttons multiple times
- May refresh browser thinking app is broken
- Poor perceived performance even if actual speed is good
- Increased support inquiries

## Current Implementation

```vue
<!-- GlobalLoadingBanner.vue -->
<div v-if=""isLoading"" class=""loading-banner"">
  Loading...
</div>
```

## Proposed Solutions

### 1. Prominent Global Loading Banner

Make loading banner more noticeable:

```vue
<template>
  <Transition name=""slide-down"">
    <div
      v-if=""hasActiveLoaders""
      class=""fixed top-0 left-0 right-0 z-50 bg-emerald-600 text-white shadow-lg""
      role=""status""
      aria-live=""polite""
    >
      <div class=""max-w-6xl mx-auto px-4 py-3 flex items-center justify-between"">
        <div class=""flex items-center gap-3"">
          <!-- Animated spinner -->
          <svg class=""animate-spin h-5 w-5"" viewBox=""0 0 24 24"">
            <circle
              class=""opacity-25""
              cx=""12""
              cy=""12""
              r=""10""
              stroke=""currentColor""
              stroke-width=""4""
              fill=""none""
            />
            <path
              class=""opacity-75""
              fill=""currentColor""
              d=""M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z""
            />
          </svg>

          <!-- Loading message -->
          <span class=""font-medium"">
            {{ loadingMessage }}
          </span>
        </div>

        <!-- Progress indicator -->
        <span v-if=""progress"" class=""text-sm opacity-90"">
          {{ progress.current }} / {{ progress.total }}
        </span>
      </div>

      <!-- Progress bar -->
      <div v-if=""progress"" class=""h-1 bg-emerald-700"">
        <div
          class=""h-full bg-white transition-all duration-300""
          :style=""{ width: `${progressPercent}%` }""
        />
      </div>
    </div>
  </Transition>
</template>

<script setup lang=""ts"">
import { computed } from ""vue"";
import { useGlobalLoading } from ""@/composables/useGlobalLoading"";

const { activeLoaders } = useGlobalLoading();

const hasActiveLoaders = computed(() => activeLoaders.value.size > 0);

const loadingMessage = computed(() => {
  if (activeLoaders.value.has(""scryfall-bulk"")) {
    return ""Loading card data from Scryfall..."";
  }
  if (activeLoaders.value.has(""edhrec-fetch"")) {
    return ""Fetching EDHREC recommendations..."";
  }
  if (activeLoaders.value.has(""csv-parse"")) {
    return ""Processing your CSV file..."";
  }
  return ""Loading..."";
});

const progress = computed(() => {
  // Extract from loader metadata if available
  return null; // Implement based on useGlobalLoading changes
});

const progressPercent = computed(() => {
  if (!progress.value) return 0;
  return (progress.value.current / progress.value.total) * 100;
});
</script>
```

### 2. Skeleton Screens

Show placeholder content while loading:

```vue
<!-- SkeletonCard.vue -->
<template>
  <div class=""skeleton-card animate-pulse"">
    <div class=""flex gap-4"">
      <!-- Card image placeholder -->
      <div class=""w-24 h-32 bg-slate-200 dark:bg-slate-700 rounded"" />

      <!-- Card details placeholder -->
      <div class=""flex-1 space-y-3"">
        <div class=""h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4"" />
        <div class=""h-3 bg-slate-200 dark:bg-slate-700 rounded w-1/2"" />
        <div class=""h-3 bg-slate-200 dark:bg-slate-700 rounded w-2/3"" />
      </div>
    </div>
  </div>
</template>
```

Usage:

```vue
<template>
  <div v-if=""loading"">
    <SkeletonCard v-for=""i in 10"" :key=""i"" />
  </div>
  <div v-else>
    <CardRow v-for=""card in cards"" :key=""card.id"" :card=""card"" />
  </div>
</template>
```

### 3. Enhanced useGlobalLoading Composable

Add progress tracking:

```typescript
// src/composables/useGlobalLoading.ts
interface LoadingState {
  id: string;
  message: string;
  progress?: {
    current: number;
    total: number;
  };
}

const loadingStates = ref<Map<string, LoadingState>>(new Map());

export const useGlobalLoading = () => {
  const startLoading = (id: string, message: string = ""Loading..."", total?: number) => {
    loadingStates.value.set(id, {
      id,
      message,
      progress: total ? { current: 0, total } : undefined,
    });
  };

  const updateProgress = (id: string, current: number) => {
    const state = loadingStates.value.get(id);
    if (state?.progress) {
      state.progress.current = current;
    }
  };

  const stopLoading = (id: string) => {
    loadingStates.value.delete(id);
  };

  return {
    loadingStates,
    startLoading,
    updateProgress,
    stopLoading,
  };
};
```

### 4. Scryfall Progress Tracking

Update API calls to show progress:

```typescript
// src/api/scryfallApi.ts
export const fetchBulkCardData = async (
  cardNames: string[],
  onProgress?: (current: number, total: number) => void
) => {
  const batches = chunk(cardNames, 75);
  const { startLoading, updateProgress, stopLoading } = useGlobalLoading();

  startLoading(""scryfall-bulk"", ""Loading card data..."", batches.length);

  for (let i = 0; i < batches.length; i++) {
    await fetchBatch(batches[i]);
    updateProgress(""scryfall-bulk"", i + 1);
    onProgress?.(i + 1, batches.length);

    if (i < batches.length - 1) {
      await delay(300); // Rate limit respect
    }
  }

  stopLoading(""scryfall-bulk"");
};
```

## Implementation Plan

### Phase 1: Enhanced Banner (2 hours)

1. Make banner full-width and fixed top
2. Add animated spinner icon
3. Improve colors and contrast
4. Add slide-down transition

### Phase 2: Progress Tracking (3 hours)

1. Update useGlobalLoading with progress support
2. Modify Scryfall API to report progress
3. Show progress bar in banner
4. Display current/total counts

### Phase 3: Skeleton Screens (3 hours)

1. Create reusable skeleton components
2. Add to card list, search results
3. Implement shimmer animation
4. Match actual content layout

### Phase 4: Contextual Messages (1 hour)

1. Add specific loading messages per operation
2. Show estimated time for known operations
3. Add cancel button for long operations

## Technical Details

### Files to Modify

- `src/components/GlobalLoadingBanner.vue` - Enhanced banner
- `src/composables/useGlobalLoading.ts` - Progress tracking
- `src/api/scryfallApi.ts` - Report progress
- `src/components/SkeletonCard.vue` - New component
- `src/components/CardTable.vue` - Use skeleton while loading

### Animation Styles

```css
/* Shimmer effect */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    theme(""colors.slate.200"") 0%,
    theme(""colors.slate.300"") 50%,
    theme(""colors.slate.200"") 100%
  );
  background-size: 1000px 100%;
  animation: shimmer 2s infinite linear;
}
```

## Acceptance Criteria

- [ ] Loading banner is immediately visible when loading starts
- [ ] Progress shown for operations with known length
- [ ] Skeleton screens appear for card lists
- [ ] Loading messages are descriptive and contextual
- [ ] Smooth transitions when content appears
- [ ] Banner auto-dismisses when loading completes
- [ ] Multiple simultaneous loaders handled correctly
- [ ] Accessible to screen readers (aria-live)
- [ ] No layout shift when banner appears/disappears
- [ ] Cancel button works for long operations

## User Experience Improvements

**Before:**

- User clicks search
- Screen appears frozen
- No feedback for 3-5 seconds
- Cards suddenly appear

**After:**

- User clicks search
- Banner slides down immediately
- ""Fetching EDHREC recommendations..."" shown
- Progress: ""Loading 2 of 5 batches...""
- Skeleton cards appear
- Real cards fade in smoothly

## Performance Considerations

- Skeleton screens should be lightweight (CSS-only)
- Avoid re-rendering banner on every progress update
- Debounce progress updates if too frequent
- Use CSS animations over JavaScript

## Related Issues

- #TBD-empty-states (showing initial state)
- docs/issues/medium-priority/03-standardize-error-handling.md
- docs/issues/high-priority/12-information-density-whitespace.md

## References

- [Skeleton Screens Best Practices](https://www.nngroup.com/articles/skeleton-screens/)
- [Progress Indicators](https://www.nngroup.com/articles/progress-indicators/)
- [Material Design Progress Indicators](https://material.io/components/progress-indicators)
- [ARIA Live Regions](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions)


Acceptance Criteria:
  1. Loading banner is immediately visible when loading starts
  2. Progress shown for operations with known length
  3. Skeleton screens appear for card lists
  4. Loading messages are descriptive and contextual
  5. Smooth transitions when content appears
  6. Banner auto-dismisses when loading completes
  7. Multiple simultaneous loaders handled correctly
  8. Accessible to screen readers (aria-live)
  9. No layout shift when banner appears/disappears
  10. Cancel button works for long operations","","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-74-epic-story-1","gh-74-epic-story-1","AUTO","Story","Phase 1: Enhanced Banner (2 hours) - Loading State Visibility Enhancement","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/74

1. Make banner full-width and fixed top
2. Add animated spinner icon
3. Improve colors and contrast
4. Add slide-down transition","gh-74-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-74-epic-story-1-task-1","gh-74-epic-story-1-task-1","AUTO","Sub-task","Make banner full-width and fixed top","Derived from Phase 1: Enhanced Banner (2 hours)","gh-74-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-74-epic-story-1-task-2","gh-74-epic-story-1-task-2","AUTO","Sub-task","Add animated spinner icon","Derived from Phase 1: Enhanced Banner (2 hours)","gh-74-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-74-epic-story-1-task-3","gh-74-epic-story-1-task-3","AUTO","Sub-task","Improve colors and contrast","Derived from Phase 1: Enhanced Banner (2 hours)","gh-74-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-74-epic-story-1-task-4","gh-74-epic-story-1-task-4","AUTO","Sub-task","Add slide-down transition","Derived from Phase 1: Enhanced Banner (2 hours)","gh-74-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-74-epic-story-2","gh-74-epic-story-2","AUTO","Story","Phase 2: Progress Tracking (3 hours) - Loading State Visibility Enhancement","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/74

1. Update useGlobalLoading with progress support
2. Modify Scryfall API to report progress
3. Show progress bar in banner
4. Display current/total counts","gh-74-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-74-epic-story-2-task-1","gh-74-epic-story-2-task-1","AUTO","Sub-task","Update useGlobalLoading with progress support","Derived from Phase 2: Progress Tracking (3 hours)","gh-74-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-74-epic-story-2-task-2","gh-74-epic-story-2-task-2","AUTO","Sub-task","Modify Scryfall API to report progress","Derived from Phase 2: Progress Tracking (3 hours)","gh-74-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-74-epic-story-2-task-3","gh-74-epic-story-2-task-3","AUTO","Sub-task","Show progress bar in banner","Derived from Phase 2: Progress Tracking (3 hours)","gh-74-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-74-epic-story-2-task-4","gh-74-epic-story-2-task-4","AUTO","Sub-task","Display current/total counts","Derived from Phase 2: Progress Tracking (3 hours)","gh-74-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-74-epic-story-3","gh-74-epic-story-3","AUTO","Story","Phase 3: Skeleton Screens (3 hours) - Loading State Visibility Enhancement","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/74

1. Create reusable skeleton components
2. Add to card list, search results
3. Implement shimmer animation
4. Match actual content layout","gh-74-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-74-epic-story-3-task-1","gh-74-epic-story-3-task-1","AUTO","Sub-task","Create reusable skeleton components","Derived from Phase 3: Skeleton Screens (3 hours)","gh-74-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-74-epic-story-3-task-2","gh-74-epic-story-3-task-2","AUTO","Sub-task","Add to card list, search results","Derived from Phase 3: Skeleton Screens (3 hours)","gh-74-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-74-epic-story-3-task-3","gh-74-epic-story-3-task-3","AUTO","Sub-task","Implement shimmer animation","Derived from Phase 3: Skeleton Screens (3 hours)","gh-74-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-74-epic-story-3-task-4","gh-74-epic-story-3-task-4","AUTO","Sub-task","Match actual content layout","Derived from Phase 3: Skeleton Screens (3 hours)","gh-74-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-74-epic-story-4","gh-74-epic-story-4","AUTO","Story","Phase 4: Contextual Messages (1 hour) - Loading State Visibility Enhancement","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/74

1. Add specific loading messages per operation
2. Show estimated time for known operations
3. Add cancel button for long operations","gh-74-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74","1. Loading banner is immediately visible when loading starts | 2. Progress shown for operations with known length | 3. Skeleton screens appear for card lists | 4. Loading messages are descriptive and contextual | 5. Smooth transitions when content appears | 6. Banner auto-dismisses when loading completes | 7. Multiple simultaneous loaders handled correctly | 8. Accessible to screen readers (aria-live) | 9. No layout shift when banner appears/disappears | 10. Cancel button works for long operations"
"gh-74-epic-story-4-task-1","gh-74-epic-story-4-task-1","AUTO","Sub-task","Add specific loading messages per operation","Derived from Phase 4: Contextual Messages (1 hour)","gh-74-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-74-epic-story-4-task-2","gh-74-epic-story-4-task-2","AUTO","Sub-task","Show estimated time for known operations","Derived from Phase 4: Contextual Messages (1 hour)","gh-74-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-74-epic-story-4-task-3","gh-74-epic-story-4-task-3","AUTO","Sub-task","Add cancel button for long operations","Derived from Phase 4: Contextual Messages (1 hour)","gh-74-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/74",""
"gh-73-epic","gh-73-epic","AUTO","Epic","[GH#73] Form Input Accessibility Improvements","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/73
Labels: [object Object], [object Object], [object Object]

# Form Input Accessibility Improvements

**Priority:** Medium  
**Type:** Accessibility Enhancement  
**Component:** CommanderSearch, CSVUpload  
**Effort:** Low (< 1 day)

## Problem

Form inputs rely on placeholder text and `aria-label` attributes without visible labels. While this works for screen readers, it's not optimal for all users, especially those with cognitive disabilities or low vision who benefit from persistent visible labels.

### Current Issues

- Primary commander search uses placeholder text that disappears on focus
- No persistent label visible to sighted users
- Search icon positioned inside input may reduce text space
- No clear/reset button visible when input has text
- Missing validation feedback or character limits

### Accessibility Impact

- **WCAG 2.1 Level AA:** Partially fails 3.3.2 (Labels or Instructions)
- Screen reader users: âœ… Works (aria-label present)
- Low vision users: âš ï¸ Suboptimal (no persistent label)
- Cognitive disabilities: âš ï¸ Context lost when placeholder disappears

## Screenshots

- [Commander search input](https://github.com/user-attachments/assets/45f1f1e9-f478-4aa9-a40f-083ef4c8b453)

## Current Implementation

```vue
<input
  type=""text""
  placeholder=""Atraxa, Grand Unifier...""
  aria-label=""Search primary commander""
  class=""...""
/>
```

## Proposed Solution

### Floating Label Pattern

Implement Material Design-style floating labels that:

1. Start as placeholder text when empty
2. Float above input on focus or when filled
3. Remain visible at all times after first interaction
4. Provide visual hierarchy and context

```vue
<template>
  <div class=""input-wrapper"">
    <input
      id=""commander-search""
      v-model=""searchText""
      type=""text""
      placeholder="" ""
      class=""peer""
      @focus=""handleFocus""
      @blur=""handleBlur""
    />
    <label for=""commander-search"" class=""floating-label""> Primary Commander </label>
    <button v-if=""searchText"" @click=""clearSearch"" class=""clear-button"" aria-label=""Clear search"">
      âœ•
    </button>
  </div>
</template>

<style scoped>
.input-wrapper {
  position: relative;
}

.floating-label {
  position: absolute;
  left: 2.5rem; /* After icon */
  top: 50%;
  transform: translateY(-50%);
  transition: all 0.2s;
  pointer-events: none;
  color: theme(""colors.slate.500"");
}

/* Float when focused or has value */
.peer:focus ~ .floating-label,
.peer:not(:placeholder-shown) ~ .floating-label {
  top: -0.5rem;
  left: 0.75rem;
  font-size: 0.75rem;
  color: theme(""colors.emerald.600"");
  background: white;
  padding: 0 0.25rem;
}
</style>
```

### Alternative: Visible Label Above Input

Simpler approach if floating labels seem too complex:

```vue
<div class=""field-group"">
  <label 
    for=""commander-search""
    class=""block text-sm font-medium text-slate-700 mb-1""
  >
    Primary Commander
  </label>
  <input
    id=""commander-search""
    v-model=""searchText""
    type=""text""
    placeholder=""Search for a commander...""
    class=""...""
  />
  <p class=""text-xs text-slate-500 mt-1"">
    Select the main deck commander.
  </p>
</div>
```

### Additional Enhancements

#### 1. Clear Button

```vue
<button
  v-if=""searchText""
  @click=""clearSearch""
  type=""button""
  class=""absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600""
  aria-label=""Clear search text""
>
  <svg class=""w-4 h-4""><!-- X icon --></svg>
</button>
```

#### 2. Search Suggestions Dropdown

```vue
<div
  v-if=""showSuggestions && suggestions.length""
  role=""listbox""
  class=""absolute top-full mt-1 w-full bg-white shadow-lg rounded-lg""
>
  <button
    v-for=""(suggestion, i) in suggestions""
    :key=""i""
    role=""option""
    @click=""selectSuggestion(suggestion)""
    class=""...""
  >
    {{ suggestion.name }}
  </button>
</div>
```

#### 3. Validation Feedback

```vue
<div v-if=""error"" class=""text-red-600 text-xs mt-1"" role=""alert"">
  {{ error }}
</div>

<div v-if=""success"" class=""text-emerald-600 text-xs mt-1"" role=""status"">
  {{ success }}
</div>
```

## Implementation Plan

### Phase 1: Visible Labels

1. Add visible labels above all inputs
2. Keep aria-labels for redundancy
3. Style labels consistently

### Phase 2: Clear Buttons

1. Add clear button to search inputs
2. Show only when input has value
3. Ensure keyboard accessible

### Phase 3: Floating Labels (Optional)

1. Implement CSS-only floating label
2. Add smooth transitions
3. Test across browsers

### Phase 4: Enhanced Feedback

1. Add validation messages
2. Implement inline help text
3. Show character counts where relevant

## Technical Details

### Files to Modify

- `src/components/CommanderSearch.vue` - Primary search input
- `src/components/CSVUpload.vue` - File input label
- Create shared `FormField.vue` component for consistency

### Reusable Component

```vue
<!-- src/components/core/FormField.vue -->
<script setup lang=""ts"">
interface Props {
  modelValue: string;
  label: string;
  placeholder?: string;
  error?: string;
  helpText?: string;
  clearable?: boolean;
}

const props = defineProps<Props>();
const emit = defineEmits<{
  ""update:modelValue"": [value: string];
  clear: [];
}>();
</script>

<template>
  <div class=""form-field"">
    <label :for=""id"" class=""block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"">
      {{ label }}
    </label>

    <div class=""relative"">
      <slot name=""icon"" />

      <input
        :id=""id""
        :value=""modelValue""
        :placeholder=""placeholder""
        @input=""emit('update:modelValue', $event.target.value)""
        class=""...""
      />

      <button
        v-if=""clearable && modelValue""
        @click=""emit('clear')""
        type=""button""
        class=""absolute right-3 top-1/2 -translate-y-1/2""
        aria-label=""Clear input""
      >
        âœ•
      </button>
    </div>

    <p v-if=""helpText"" class=""text-xs text-slate-500 mt-1"">
      {{ helpText }}
    </p>

    <p v-if=""error"" class=""text-xs text-red-600 mt-1"" role=""alert"">
      {{ error }}
    </p>
  </div>
</template>
```

### Usage Example

```vue
<FormField
  v-model=""commanderName""
  label=""Primary Commander""
  placeholder=""Atraxa, Grand Unifier...""
  help-text=""Select the main deck commander.""
  clearable
  @clear=""commanderName = ''""
>
  <template #icon>
    <MagnifyIcon class=""absolute left-3 top-1/2 -translate-y-1/2"" />
  </template>
</FormField>
```

## Acceptance Criteria

- [ ] All form inputs have visible labels
- [ ] Labels persist when input is focused or filled
- [ ] Clear buttons appear on all text inputs when filled
- [ ] Labels maintain contrast ratio of 4.5:1 minimum
- [ ] Labels properly associated with inputs (for/id)
- [ ] Screen reader announces label, value, and validation
- [ ] Keyboard navigation works for all interactions
- [ ] Help text provides additional context where needed
- [ ] Error messages are accessible (role=""alert"")
- [ ] Passes axe-core accessibility audit

## Testing Checklist

- [ ] Test with NVDA screen reader (Windows)
- [ ] Test with VoiceOver (macOS/iOS)
- [ ] Verify keyboard-only navigation
- [ ] Check color contrast with tools
- [ ] Test with 200% zoom
- [ ] Verify in high contrast mode
- [ ] Test with forms auto-fill

## WCAG Success Criteria

This enhancement addresses:

- **3.3.2 Labels or Instructions (Level A)** - Visible labels provided
- **2.4.6 Headings and Labels (Level AA)** - Descriptive labels
- **1.3.1 Info and Relationships (Level A)** - Proper form structure
- **4.1.2 Name, Role, Value (Level A)** - Semantic HTML

## Related Issues

- docs/issues/medium-priority/09-accessibility-improvements.md
- #TBD-button-states (consistent interaction patterns)

## References

- [WCAG 3.3.2 Labels or Instructions](https://www.w3.org/WAI/WCAG21/Understanding/labels-or-instructions.html)
- [Material Design Text Fields](https://material.io/components/text-fields)
- [Floating Labels Are Problematic](https://medium.com/simple-human/floating-labels-are-a-bad-idea-82edb64220f6)
- [Placeholders in Form Fields Are Harmful](https://www.nngroup.com/articles/form-design-placeholders/)


Acceptance Criteria:
  1. All form inputs have visible labels
  2. Labels persist when input is focused or filled
  3. Clear buttons appear on all text inputs when filled
  4. Labels maintain contrast ratio of 4.5:1 minimum
  5. Labels properly associated with inputs (for/id)
  6. Screen reader announces label, value, and validation
  7. Keyboard navigation works for all interactions
  8. Help text provides additional context where needed
  9. Error messages are accessible (role=""alert"")
  10. Passes axe-core accessibility audit","","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-73-epic-story-1","gh-73-epic-story-1","AUTO","Story","Phase 1: Visible Labels - Form Input Accessibility Improvements","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/73

1. Add visible labels above all inputs
2. Keep aria-labels for redundancy
3. Style labels consistently","gh-73-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-73-epic-story-1-task-1","gh-73-epic-story-1-task-1","AUTO","Sub-task","Add visible labels above all inputs","Derived from Phase 1: Visible Labels","gh-73-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73",""
"gh-73-epic-story-1-task-2","gh-73-epic-story-1-task-2","AUTO","Sub-task","Keep aria-labels for redundancy","Derived from Phase 1: Visible Labels","gh-73-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73",""
"gh-73-epic-story-1-task-3","gh-73-epic-story-1-task-3","AUTO","Sub-task","Style labels consistently","Derived from Phase 1: Visible Labels","gh-73-epic-story-1","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73",""
"gh-73-epic-story-2","gh-73-epic-story-2","AUTO","Story","Phase 2: Clear Buttons - Form Input Accessibility Improvements","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/73

1. Add clear button to search inputs
2. Show only when input has value
3. Ensure keyboard accessible","gh-73-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-73-epic-story-2-task-1","gh-73-epic-story-2-task-1","AUTO","Sub-task","Add clear button to search inputs","Derived from Phase 2: Clear Buttons","gh-73-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73",""
"gh-73-epic-story-2-task-2","gh-73-epic-story-2-task-2","AUTO","Sub-task","Show only when input has value","Derived from Phase 2: Clear Buttons","gh-73-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73",""
"gh-73-epic-story-2-task-3","gh-73-epic-story-2-task-3","AUTO","Sub-task","Ensure keyboard accessible","Derived from Phase 2: Clear Buttons","gh-73-epic-story-2","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73",""
"gh-73-epic-story-3","gh-73-epic-story-3","AUTO","Story","Phase 3: Floating Labels (Optional) - Form Input Accessibility Improvements","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/73

1. Implement CSS-only floating label
2. Add smooth transitions
3. Test across browsers","gh-73-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-73-epic-story-3-task-1","gh-73-epic-story-3-task-1","AUTO","Sub-task","Implement CSS-only floating label","Derived from Phase 3: Floating Labels (Optional)","gh-73-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73",""
"gh-73-epic-story-3-task-2","gh-73-epic-story-3-task-2","AUTO","Sub-task","Add smooth transitions","Derived from Phase 3: Floating Labels (Optional)","gh-73-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73",""
"gh-73-epic-story-3-task-3","gh-73-epic-story-3-task-3","AUTO","Sub-task","Test across browsers","Derived from Phase 3: Floating Labels (Optional)","gh-73-epic-story-3","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73",""
"gh-73-epic-story-4","gh-73-epic-story-4","AUTO","Story","Phase 4: Enhanced Feedback - Form Input Accessibility Improvements","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/73

1. Add validation messages
2. Implement inline help text
3. Show character counts where relevant","gh-73-epic","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73","1. All form inputs have visible labels | 2. Labels persist when input is focused or filled | 3. Clear buttons appear on all text inputs when filled | 4. Labels maintain contrast ratio of 4.5:1 minimum | 5. Labels properly associated with inputs (for/id) | 6. Screen reader announces label, value, and validation | 7. Keyboard navigation works for all interactions | 8. Help text provides additional context where needed | 9. Error messages are accessible (role=""alert"") | 10. Passes axe-core accessibility audit"
"gh-73-epic-story-4-task-1","gh-73-epic-story-4-task-1","AUTO","Sub-task","Add validation messages","Derived from Phase 4: Enhanced Feedback","gh-73-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73",""
"gh-73-epic-story-4-task-2","gh-73-epic-story-4-task-2","AUTO","Sub-task","Implement inline help text","Derived from Phase 4: Enhanced Feedback","gh-73-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73",""
"gh-73-epic-story-4-task-3","gh-73-epic-story-4-task-3","AUTO","Sub-task","Show character counts where relevant","Derived from Phase 4: Enhanced Feedback","gh-73-epic-story-4","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/73",""
"gh-72-epic","gh-72-epic","AUTO","Epic","[GH#72] Empty State Design","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/72
Labels: [object Object], [object Object], [object Object]

# Empty State Design

**Priority:** Medium  
**Type:** UX Enhancement  
**Component:** EdhrecReader, Dashboard  
**Effort:** Low (< 1 day)

## Problem

When no commander is selected, the interface shows filters and instructions but no visual placeholder for where results will appear. This leaves users uncertain about what to expect and doesn't communicate the value proposition effectively.

### Current Issues

- No indication of where commander data will appear
- Missing visual feedback about expected outcome
- Empty space below filters looks unfinished
- No guidance on popular commanders or next steps
- Opportunity to educate users about features

### User Impact

- **Medium:** New users unsure what the interface will show
- Reduced confidence in using the tool
- Missed opportunity to guide user behavior
- No examples of tool value until after first search

## Screenshots

- [Current empty state](https://github.com/user-attachments/assets/45f1f1e9-f478-4aa9-a40f-083ef4c8b453)

## Proposed Solution

### Empty State Component

Create visually appealing placeholder that:

1. Shows where content will appear
2. Provides helpful guidance
3. Suggests popular commanders
4. Illustrates the value proposition

### Design Options

#### Option A: Illustrated Placeholder

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚        [Magic Wand Icon]            â”‚
â”‚                                     â”‚
â”‚   Search for a commander above      â”‚
â”‚   to see EDHREC recommendations     â”‚
â”‚                                     â”‚
â”‚   Popular commanders:               â”‚
â”‚   â€¢ Atraxa, Grand Unifier          â”‚
â”‚   â€¢ The Ur-Dragon                   â”‚
â”‚   â€¢ Miirym, Sentinel Wyrm          â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Option B: Preview Cards (Skeleton)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [------] â”‚  â”‚ [------] â”‚  â”‚ [------] â”‚
â”‚ [------] â”‚  â”‚ [------] â”‚  â”‚ [------] â”‚
â”‚ [------] â”‚  â”‚ [------] â”‚  â”‚ [------] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     Results will appear here
```

#### Option C: Feature Showcase

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ¨ Compare EDHREC recommendations  â”‚
â”‚     with your personal collection   â”‚
â”‚                                     â”‚
â”‚  ðŸ“Š View card prices from Scryfall â”‚
â”‚                                     â”‚
â”‚  ðŸŽ¯ Filter by owned/unowned cards  â”‚
â”‚                                     â”‚
â”‚  Start by searching a commander â†‘  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Recommended Approach (Hybrid)

Combine elements from all options:

```vue
<template>
  <div class=""empty-state"">
    <div class=""illustration"">
      <svg><!-- Stylized card grid icon --></svg>
    </div>

    <h3>Find Your Next Commander Deck</h3>

    <p class=""description"">
      Search for a commander above to see EDHREC recommendations, Scryfall pricing, and highlight
      cards you already own.
    </p>

    <div class=""suggestions"">
      <h4>Popular Commanders</h4>
      <div class=""commander-chips"">
        <button @click=""selectCommander('Atraxa, Grand Unifier')"">Atraxa, Grand Unifier</button>
        <button @click=""selectCommander('The Ur-Dragon')"">The Ur-Dragon</button>
        <button @click=""selectCommander('Miirym, Sentinel Wyrm')"">Miirym, Sentinel Wyrm</button>
        <!-- More suggestions -->
      </div>
    </div>

    <div class=""features-hint"">
      <span>ðŸ’¡ Tip: Upload a CSV to highlight owned cards</span>
    </div>
  </div>
</template>
```

### Visual Design

**Colors:**

- Use muted slate tones (not distracting)
- Accent with emerald for interactive elements
- Subtle gradients for depth

**Typography:**

- Large heading (text-xl or text-2xl)
- Medium description (text-sm)
- Small hints (text-xs)

**Spacing:**

- Generous padding (p-12)
- Centered layout
- Adequate breathing room

**Iconography:**

- Stylized card deck illustration
- SVG icons for features
- Avoid generic ""no data"" icons

## Implementation Details

### New Component

```typescript
// src/components/EdhrecEmptyState.vue
<script setup lang=""ts"">
import { mdiMagicStaff, mdiCardsOutline } from '@mdi/js';

const emit = defineEmits<{
  'select-commander': [name: string];
}>();

const popularCommanders = [
  'Atraxa, Grand Unifier',
  'The Ur-Dragon',
  'Miirym, Sentinel Wyrm',
  'Prosper, Tome-Bound',
  'Korvold, Fae-Cursed King',
  'Muldrotha, the Gravetide'
];

const selectCommander = (name: string) => {
  emit('select-commander', name);
};
</script>

<template>
  <Card class=""py-12 text-center"">
    <div class=""flex flex-col items-center gap-6 max-w-2xl mx-auto"">
      <!-- Illustration -->
      <div class=""w-24 h-24 rounded-full bg-emerald-50 dark:bg-emerald-900/20 flex items-center justify-center"">
        <svg viewBox=""0 0 24 24"" class=""w-12 h-12 text-emerald-500"">
          <path :d=""mdiCardsOutline"" fill=""currentColor"" />
        </svg>
      </div>

      <!-- Heading -->
      <div>
        <h3 class=""text-2xl font-bold text-slate-900 dark:text-white mb-2"">
          Find Your Next Commander Deck
        </h3>
        <p class=""text-slate-600 dark:text-slate-300"">
          Search for a commander above to see EDHREC recommendations,
          live Scryfall pricing, and highlight cards you already own.
        </p>
      </div>

      <!-- Popular suggestions -->
      <div class=""w-full"">
        <p class=""text-xs font-semibold text-slate-500 uppercase tracking-wide mb-3"">
          Popular Commanders
        </p>
        <div class=""flex flex-wrap gap-2 justify-center"">
          <button
            v-for=""commander in popularCommanders""
            :key=""commander""
            @click=""selectCommander(commander)""
            class=""px-4 py-2 rounded-full border border-slate-200 text-sm font-medium text-slate-700 hover:border-emerald-400 hover:text-emerald-600 transition dark:border-slate-700 dark:text-slate-300""
          >
            {{ commander }}
          </button>
        </div>
      </div>

      <!-- Feature hint -->
      <div class=""flex items-center gap-2 text-xs text-slate-500"">
        <svg viewBox=""0 0 24 24"" class=""w-4 h-4"">
          <path :d=""mdiMagicStaff"" fill=""currentColor"" />
        </svg>
        <span>Tip: Upload a CSV to automatically highlight cards you own</span>
      </div>
    </div>
  </Card>
</template>
```

### Integration in EdhrecReader

```vue
<!-- src/components/EdhrecReader.vue -->
<template>
  <div>
    <!-- Commander search section -->
    <CommanderSearch />

    <!-- Empty state or results -->
    <EdhrecEmptyState v-if=""!hasCommander"" @select-commander=""handleCommanderSelection"" />

    <CardlistSection v-else :cardlists=""cardlists"" />
  </div>
</template>
```

## Acceptance Criteria

- [ ] Empty state shown when no commander selected
- [ ] Illustration is visually appealing and on-brand
- [ ] Popular commander suggestions are clickable
- [ ] Clicking suggestion auto-fills search and triggers query
- [ ] Empty state hidden once commander data loads
- [ ] Works in both light and dark modes
- [ ] Responsive on mobile (stacked layout)
- [ ] Smooth transition when data loads
- [ ] Copy is clear and helpful
- [ ] No layout shift when transitioning to results

## Variations for Different States

### No Commander Selected (Initial)

Show full empty state with suggestions

### Loading Commander Data

Show skeleton cards or loading spinner

### No Results Found

Show different message: ""No recommendations found for this commander""

### API Error

Show error state with retry button

## Related Issues

- #TBD-loading-states (skeleton screens)
- #TBD-information-density (affects layout)
- docs/issues/medium-priority/03-standardize-error-handling.md

## Inspiration Examples

- GitHub's empty repository state
- Notion's empty page illustrations
- Vercel's project empty state
- Linear's empty views

## References

- [Empty States - Laws of UX](https://lawsofux.com/empty-state/)
- [Material Design Empty States](https://material.io/design/communication/empty-states.html)
- [Empty State Best Practices](https://www.nngroup.com/articles/empty-state/)


Acceptance Criteria:
  1. Empty state shown when no commander selected
  2. Illustration is visually appealing and on-brand
  3. Popular commander suggestions are clickable
  4. Clicking suggestion auto-fills search and triggers query
  5. Empty state hidden once commander data loads
  6. Works in both light and dark modes
  7. Responsive on mobile (stacked layout)
  8. Smooth transition when data loads
  9. Copy is clear and helpful
  10. No layout shift when transitioning to results","","medium-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/72","1. Empty state shown when no commander selected | 2. Illustration is visually appealing and on-brand | 3. Popular commander suggestions are clickable | 4. Clicking suggestion auto-fills search and triggers query | 5. Empty state hidden once commander data loads | 6. Works in both light and dark modes | 7. Responsive on mobile (stacked layout) | 8. Smooth transition when data loads | 9. Copy is clear and helpful | 10. No layout shift when transitioning to results"
"gh-71-epic","gh-71-epic","AUTO","Epic","[GH#71] Information Density & Whitespace Balance","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/71
Labels: [object Object], [object Object], [object Object]

# Information Density & Whitespace Balance

**Priority:** High  
**Type:** UX Enhancement  
**Component:** Dashboard, Layout  
**Effort:** Medium (1-3 days)

## Problem

The interface has generous whitespace which aids readability but significantly reduces information density. The ""Find commanders"" section, dropdown filters, and legal notice consume substantial vertical space, requiring users to scroll extensively to see actual commander results and card data.

### Current Issues

- Excessive vertical scrolling required to reach primary content
- Desktop users with large screens see mostly empty space
- Filter dropdowns take full-width rows on desktop despite available horizontal space
- Legal notice dominates bottom of viewport on smaller screens
- Long time-to-value for primary task (viewing commander recommendations)
- Card padding (p-3 sm:p-4) is generous but limits content density

### User Impact

- **High:** Users must scroll multiple screens before seeing results
- Reduced efficiency for power users who want quick comparisons
- Desktop advantage not fully utilized
- Perceived as ""empty"" or lacking content

## Screenshots

- [Main interface showing whitespace](https://github.com/user-attachments/assets/45f1f1e9-f478-4aa9-a40f-083ef4c8b453)
- [Dark mode with spacing](https://github.com/user-attachments/assets/8b32ef9f-2f8c-4958-9829-501ce3b25d61)

## Proposed Solution

### 1. Compact Filter Layout

**Current:** Filters stack vertically in grid

```html
<div class=""grid grid-cols-4 gap-2"">
  <div>Bracket: [All â–¼]</div>
  <div>Budget: [Any â–¼]</div>
  <div>Page Type: [Commander â–¼]</div>
  <div>Companion: [None â–¼]</div>
</div>
```

**Proposed:** Single row with inline labels

```html
<div class=""flex flex-wrap gap-3 items-center"">
  <span class=""text-xs text-slate-500"">Filters:</span>
  <select>
    Bracket: All
  </select>
  <select>
    Budget: Any
  </select>
  <select>
    Page Type: Commander
  </select>
  <select>
    Companion: None
  </select>
</div>
```

### 2. Collapsible Legal Notice

**Current:** Always visible, 4-5 line paragraph + bullet list

**Proposed:**

- Collapsed by default: ""Independent hobby project Â· Learn more â–¼""
- Expand on click to show full disclaimer
- Move to footer section on desktop
- Consider moving to FAQ or About page

### 3. Density Mode Toggle

Add user preference for information density:

**Comfortable (Default):**

- Current spacing preserved
- Good for casual browsing
- Prioritizes readability

**Compact:**

- Reduced padding (p-2 instead of p-3/p-4)
- Tighter line-height
- Smaller font sizes (text-xs instead of text-sm)
- More cards visible per screen

**Cozy (Middle Ground):**

- Moderate spacing reduction
- Balance between comfort and density

```typescript
// Composable: useLayoutDensity.ts
export type Density = ""comfortable"" | ""cozy"" | ""compact"";

export const useLayoutDensity = () => {
  const density = ref<Density>(""comfortable"");

  const spacing = computed(() => {
    return {
      comfortable: ""p-4 gap-6"",
      cozy: ""p-3 gap-4"",
      compact: ""p-2 gap-3"",
    }[density.value];
  });

  return { density, spacing };
};
```

### 4. Multi-Column Layout on Desktop

**Current:** Single column max-width container (max-w-6xl)

**Proposed for wide screens (1280px+):**

- Sidebar with filters (fixed position)
- Main content area for cards (scrollable)
- Two-column card grid instead of single column

```html
<div class=""flex gap-6"">
  <aside class=""w-80 sticky top-0"">
    <!-- Filters, controls -->
  </aside>
  <main class=""flex-1"">
    <!-- Commander results -->
  </main>
</div>
```

### 5. Reduced Component Padding

**Current padding classes:**

- Cards: `p-3 sm:p-4`
- Sections: `gap-8`
- Container: `py-6`

**Proposed:**

- Cards: `p-2 sm:p-3`
- Sections: `gap-4 sm:gap-6`
- Container: `py-4 sm:py-6`

## Implementation Plan

### Phase 1: Quick Wins (< 4 hours)

1. Reduce padding on Card components
2. Make filter layout single row on desktop
3. Collapse legal notice by default
4. Adjust section gaps (gap-8 â†’ gap-4)

### Phase 2: Layout Improvements (1 day)

1. Implement collapsible legal notice component
2. Create multi-column layout for desktop
3. Optimize responsive breakpoints
4. Add sticky sidebar on large screens

### Phase 3: Density Mode (1-2 days)

1. Create `useLayoutDensity` composable
2. Add density toggle to toolbar
3. Apply density classes throughout
4. Store preference in localStorage
5. Add density to onboarding

## Technical Details

### Files to Modify

- `src/components/Dashboard.vue` - Main layout structure
- `src/components/Card.vue` - Base card padding
- `src/components/CommanderSearch.vue` - Filter layout
- `src/components/SiteNotice.vue` - Make collapsible
- `src/components/ToolkitHeader.vue` - Add density toggle
- `src/composables/useLayoutDensity.ts` - New composable

### CSS Approach

```vue
<!-- Card.vue -->
<script setup lang=""ts"">
import { useLayoutDensity } from ""@/composables/useLayoutDensity"";

const { spacing } = useLayoutDensity();
</script>

<template>
  <div :class=""['rounded-xl border bg-white', spacing]"">
    <slot />
  </div>
</template>
```

### Responsive Breakpoints

```css
/* Current: max-w-6xl single column */
.container {
  max-width: 72rem; /* 1152px */
}

/* Proposed: Multi-column on large screens */
@media (min-width: 1280px) {
  .layout-sidebar {
    display: flex;
    gap: 1.5rem;
  }

  .layout-sidebar aside {
    width: 20rem;
    position: sticky;
    top: 1rem;
  }
}
```

## Acceptance Criteria

- [ ] Filter row takes < 60px vertical space on desktop
- [ ] Legal notice collapsible, collapsed by default
- [ ] Sidebar layout available on screens > 1280px
- [ ] Density toggle in toolbar with 3 options
- [ ] User preference persisted in localStorage
- [ ] At least 30% more vertical content visible in compact mode
- [ ] No regressions in mobile usability
- [ ] Smooth transitions between density modes
- [ ] Documentation updated with density feature

## Measurements

### Current State (1280px width)

- Viewport height: ~800px visible
- Toolkit header: ~180px
- Find commanders card: ~400px
- Filters: ~60px
- Legal notice: ~200px
- **Cards visible:** 0 (need to scroll)

### Target State (Compact)

- Toolkit header: ~120px
- Find commanders: ~280px
- Filters (inline): ~40px
- Legal notice (collapsed): ~30px
- **Cards visible:** 2-3 above fold

## User Research Questions

Before implementation, consider testing:

- Do users prefer compact or comfortable by default?
- How often do users read the legal notice?
- Do power users want even more density?
- Is sidebar layout intuitive on desktop?

## Alternatives Considered

1. **Infinite scroll** - Future enhancement, doesn't solve initial density
2. **Pagination** - Adds navigation complexity
3. **Grid view toggle** - Could complement density mode
4. **Floating filters** - Considered for mobile
5. **Hide toolbar by default** - Already implemented (collapsed state)

## Related Issues

- #TBD-visual-hierarchy (affects toolbar density)
- #TBD-mobile-toolbar (density implications for mobile)
- #TBD-empty-states (affects perceived density)
- docs/issues/medium-priority/01-refactor-large-components.md

## References

- [Material Design Density](https://material.io/design/layout/applying-density.html)
- [Information Scent](https://www.nngroup.com/articles/information-scent/)
- [F-Pattern Layout](https://www.nngroup.com/articles/f-shaped-pattern-reading-web-content/)


Acceptance Criteria:
  1. Filter row takes < 60px vertical space on desktop
  2. Legal notice collapsible, collapsed by default
  3. Sidebar layout available on screens > 1280px
  4. Density toggle in toolbar with 3 options
  5. User preference persisted in localStorage
  6. At least 30% more vertical content visible in compact mode
  7. No regressions in mobile usability
  8. Smooth transitions between density modes
  9. Documentation updated with density feature","","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71","1. Filter row takes < 60px vertical space on desktop | 2. Legal notice collapsible, collapsed by default | 3. Sidebar layout available on screens > 1280px | 4. Density toggle in toolbar with 3 options | 5. User preference persisted in localStorage | 6. At least 30% more vertical content visible in compact mode | 7. No regressions in mobile usability | 8. Smooth transitions between density modes | 9. Documentation updated with density feature"
"gh-71-epic-story-1","gh-71-epic-story-1","AUTO","Story","Phase 1: Quick Wins (< 4 hours) - Information Density & Whitespace Balance","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/71

1. Reduce padding on Card components
2. Make filter layout single row on desktop
3. Collapse legal notice by default
4. Adjust section gaps (gap-8 â†’ gap-4)","gh-71-epic","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71","1. Filter row takes < 60px vertical space on desktop | 2. Legal notice collapsible, collapsed by default | 3. Sidebar layout available on screens > 1280px | 4. Density toggle in toolbar with 3 options | 5. User preference persisted in localStorage | 6. At least 30% more vertical content visible in compact mode | 7. No regressions in mobile usability | 8. Smooth transitions between density modes | 9. Documentation updated with density feature"
"gh-71-epic-story-1-task-1","gh-71-epic-story-1-task-1","AUTO","Sub-task","Reduce padding on Card components","Derived from Phase 1: Quick Wins (< 4 hours)","gh-71-epic-story-1","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71",""
"gh-71-epic-story-1-task-2","gh-71-epic-story-1-task-2","AUTO","Sub-task","Make filter layout single row on desktop","Derived from Phase 1: Quick Wins (< 4 hours)","gh-71-epic-story-1","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71",""
"gh-71-epic-story-1-task-3","gh-71-epic-story-1-task-3","AUTO","Sub-task","Collapse legal notice by default","Derived from Phase 1: Quick Wins (< 4 hours)","gh-71-epic-story-1","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71",""
"gh-71-epic-story-1-task-4","gh-71-epic-story-1-task-4","AUTO","Sub-task","Adjust section gaps (gap-8 â†’ gap-4)","Derived from Phase 1: Quick Wins (< 4 hours)","gh-71-epic-story-1","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71",""
"gh-71-epic-story-2","gh-71-epic-story-2","AUTO","Story","Phase 2: Layout Improvements (1 day) - Information Density & Whitespace Balance","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/71

1. Implement collapsible legal notice component
2. Create multi-column layout for desktop
3. Optimize responsive breakpoints
4. Add sticky sidebar on large screens","gh-71-epic","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71","1. Filter row takes < 60px vertical space on desktop | 2. Legal notice collapsible, collapsed by default | 3. Sidebar layout available on screens > 1280px | 4. Density toggle in toolbar with 3 options | 5. User preference persisted in localStorage | 6. At least 30% more vertical content visible in compact mode | 7. No regressions in mobile usability | 8. Smooth transitions between density modes | 9. Documentation updated with density feature"
"gh-71-epic-story-2-task-1","gh-71-epic-story-2-task-1","AUTO","Sub-task","Implement collapsible legal notice component","Derived from Phase 2: Layout Improvements (1 day)","gh-71-epic-story-2","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71",""
"gh-71-epic-story-2-task-2","gh-71-epic-story-2-task-2","AUTO","Sub-task","Create multi-column layout for desktop","Derived from Phase 2: Layout Improvements (1 day)","gh-71-epic-story-2","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71",""
"gh-71-epic-story-2-task-3","gh-71-epic-story-2-task-3","AUTO","Sub-task","Optimize responsive breakpoints","Derived from Phase 2: Layout Improvements (1 day)","gh-71-epic-story-2","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71",""
"gh-71-epic-story-2-task-4","gh-71-epic-story-2-task-4","AUTO","Sub-task","Add sticky sidebar on large screens","Derived from Phase 2: Layout Improvements (1 day)","gh-71-epic-story-2","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71",""
"gh-71-epic-story-3","gh-71-epic-story-3","AUTO","Story","Phase 3: Density Mode (1-2 days) - Information Density & Whitespace Balance","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/71

1. Create `useLayoutDensity` composable
2. Add density toggle to toolbar
3. Apply density classes throughout
4. Store preference in localStorage
5. Add density to onboarding","gh-71-epic","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71","1. Filter row takes < 60px vertical space on desktop | 2. Legal notice collapsible, collapsed by default | 3. Sidebar layout available on screens > 1280px | 4. Density toggle in toolbar with 3 options | 5. User preference persisted in localStorage | 6. At least 30% more vertical content visible in compact mode | 7. No regressions in mobile usability | 8. Smooth transitions between density modes | 9. Documentation updated with density feature"
"gh-71-epic-story-3-task-1","gh-71-epic-story-3-task-1","AUTO","Sub-task","Create `useLayoutDensity` composable","Derived from Phase 3: Density Mode (1-2 days)","gh-71-epic-story-3","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71",""
"gh-71-epic-story-3-task-2","gh-71-epic-story-3-task-2","AUTO","Sub-task","Add density toggle to toolbar","Derived from Phase 3: Density Mode (1-2 days)","gh-71-epic-story-3","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71",""
"gh-71-epic-story-3-task-3","gh-71-epic-story-3-task-3","AUTO","Sub-task","Apply density classes throughout","Derived from Phase 3: Density Mode (1-2 days)","gh-71-epic-story-3","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71",""
"gh-71-epic-story-3-task-4","gh-71-epic-story-3-task-4","AUTO","Sub-task","Store preference in localStorage","Derived from Phase 3: Density Mode (1-2 days)","gh-71-epic-story-3","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71",""
"gh-71-epic-story-3-task-5","gh-71-epic-story-3-task-5","AUTO","Sub-task","Add density to onboarding","Derived from Phase 3: Density Mode (1-2 days)","gh-71-epic-story-3","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/71",""
"gh-70-epic","gh-70-epic","AUTO","Epic","[GH#70] Visual Hierarchy in Toolkit Header","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/70
Labels: [object Object], [object Object], [object Object]

# Visual Hierarchy in Toolkit Header

**Priority:** High  
**Type:** UI Enhancement  
**Component:** ToolkitHeader  
**Effort:** Low (< 1 day)

## Problem

All buttons in the toolkit header have similar visual weight, making it difficult for users to distinguish between primary and secondary actions. While ""Upload CSV"" uses emerald accent color, other important controls blend together, requiring users to read every button to find what they need.

### Current Issues

- No clear primary action (everything looks equal)
- ""Upload CSV"" and ownership filters don't stand out enough
- Theme/background toggles given same prominence as core features
- Export buttons have same visual weight despite being contextual
- Cognitive load increases when scanning for specific controls

### User Impact

- **Medium-High:** Users take longer to find key features
- New users unsure what actions are most important
- Reduced efficiency in repeated workflows
- Features like CSV upload may be overlooked

## Screenshots

- [Current toolbar layout](https://github.com/user-attachments/assets/45f1f1e9-f478-4aa9-a40f-083ef4c8b453)
- [Dark mode toolbar](https://github.com/user-attachments/assets/8b32ef9f-2f8c-4958-9829-501ce3b25d61)

## Proposed Solution

### Button Hierarchy System

#### **Primary Actions** (Most important, high visual weight)

- **Upload CSV** - Core feature enabling main functionality
  - Large button (px-6 py-3)
  - High contrast emerald background
  - Icon + bold text
  - Elevated shadow

#### **Secondary Actions** (Important, medium visual weight)

- **Ownership Filters** (Owned, Unowned, Show All)
  - Medium size (px-4 py-2)
  - Outline style when inactive
  - Filled style when active
  - Clear visual feedback

#### **Tertiary Actions** (Utilities, low visual weight)

- **Theme Toggle, Background Toggle, Hide Toolbar**
  - Small size (px-3 py-1.5)
  - Ghost or minimal styling
  - Icons preferred over text
  - Grouped together visually

#### **Contextual Actions** (Only shown when relevant)

- **Export Buttons**
  - Disabled state when no data
  - Clear tooltip explaining why disabled
  - Secondary style when enabled

### Visual Design Changes

```vue
<!-- Current (all similar) -->
<button class=""px-3 py-1.5 border text-[0.7rem]"">Upload CSV</button>
<button class=""px-3 py-1.5 border text-[0.7rem]"">Dark</button>
<button class=""px-3 py-1.5 border text-[0.7rem]"">Hide BG</button>

<!-- Proposed (clear hierarchy) -->
<button class=""px-6 py-3 bg-emerald-600 text-white font-semibold shadow-lg"">
  <UploadIcon class=""w-5 h-5"" />
  Upload Collection
</button>

<div class=""flex gap-2"">
  <button class=""px-2 py-2 text-slate-500 hover:text-slate-700"">
    <ThemeIcon class=""w-4 h-4"" />
  </button>
  <button class=""px-2 py-2 text-slate-500 hover:text-slate-700"">
    <BackgroundIcon class=""w-4 h-4"" />
  </button>
</div>
```

### Layout Improvements

1. **Group Related Controls**

   ```
   [Title & Branding]                [Utilities]   [Primary Action]
   Commander Scout                   â˜¾ ðŸŽ¨ âœ•       [Upload CSV]

   [Description text explaining the tool]

   [Ownership Filters]               [Export]
   â—‹ Owned  â—‹ Unowned  â— Show All    Copy | Download
   ```

2. **Use Visual Separators**
   - Divider between utility buttons and primary action
   - Subtle borders around filter group
   - Card sections for logical grouping

3. **Size Differentiation**
   - Primary: Large (text-base, py-3)
   - Secondary: Medium (text-sm, py-2)
   - Tertiary: Small (text-xs, py-1.5)

4. **Color Strategy**
   - Primary: High saturation emerald (500-600)
   - Secondary: Medium contrast slate borders
   - Tertiary: Low contrast, ghosted appearance
   - Active states: Bold emerald

## Implementation Plan

### Phase 1: Button Sizing (Quick Win)

1. Increase ""Upload CSV"" button size
2. Reduce utility button sizes
3. Adjust padding and font sizes

### Phase 2: Color & Contrast

1. Make primary action more vibrant
2. Reduce contrast on utility buttons
3. Ensure active states are obvious

### Phase 3: Layout & Grouping

1. Add visual separators
2. Group related controls in `<div>` containers
3. Adjust spacing between groups (gap-4 vs gap-2)

### Phase 4: Responsive Behavior

1. Adjust hierarchy on mobile (hamburger menu)
2. Ensure primary action always visible
3. Progressive disclosure for secondary features

## Technical Details

### Files to Modify

- `src/components/ToolkitHeader.vue` - Main button layout
- Possibly extract button variants to shared components

### Tailwind Classes

```typescript
// Button variants
const buttonVariants = {
  primary:
    ""px-6 py-3 text-base font-bold bg-emerald-600 text-white shadow-lg hover:bg-emerald-700 transition"",
  secondary:
    ""px-4 py-2 text-sm font-semibold border-2 border-slate-300 hover:border-emerald-500 transition"",
  tertiary: ""px-2 py-1.5 text-xs text-slate-500 hover:text-slate-700 transition"",
  ghost:
    ""px-3 py-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-800 transition"",
};
```

### Design Tokens

Consider adding design token constants:

```typescript
// src/utils/designTokens.ts
export const BUTTON_SIZES = {
  lg: ""px-6 py-3 text-base"",
  md: ""px-4 py-2 text-sm"",
  sm: ""px-3 py-1.5 text-xs"",
  xs: ""px-2 py-1 text-xs"",
};

export const BUTTON_VARIANTS = {
  primary: ""bg-emerald-600 text-white font-bold shadow-lg"",
  secondary: ""border-2 border-slate-300 font-semibold"",
  tertiary: ""text-slate-500"",
  ghost: ""text-slate-400 hover:bg-slate-50"",
};
```

## Acceptance Criteria

- [ ] ""Upload CSV"" button is visually dominant (1.5-2x larger)
- [ ] Utility buttons (theme, hide) are smaller and less prominent
- [ ] Related controls are grouped with visual separation
- [ ] Active filter states are immediately obvious
- [ ] Disabled states are clearly distinguishable
- [ ] Hierarchy maintained in both light and dark modes
- [ ] Design system tokens documented
- [ ] A/B test shows improved task completion time (optional)

## Design Principles

1. **Visual Weight = Importance**
   - Size, color, contrast, shadow communicate priority

2. **Grouping = Relationship**
   - Proximity shows which controls are related

3. **Consistency = Learnability**
   - Same patterns used throughout interface

4. **Progressive Disclosure**
   - Show primary actions first, reveal details on interaction

## Alternatives Considered

1. **Tab-based toolbar** - Dismissed: Adds navigation complexity
2. **Dropdown menus for everything** - Dismissed: Hides important features
3. **Two-row toolbar** - Dismissed: Takes too much vertical space
4. **Context-sensitive toolbar** - Future enhancement, not initial solution

## Related Issues

- #TBD-mobile-toolbar (responsive design)
- #TBD-button-states (consistency)
- #TBD-information-density (overall layout)

## References

- [Material Design Button Hierarchy](https://material.io/components/buttons)
- [Nielsen Norman Group - Visual Hierarchy](https://www.nngroup.com/articles/visual-hierarchy-ux-definition/)
- [Apple HIG - Visual Design](https://developer.apple.com/design/human-interface-guidelines/foundations/layout)


Acceptance Criteria:
  1. ""Upload CSV"" button is visually dominant (1.5-2x larger)
  2. Utility buttons (theme, hide) are smaller and less prominent
  3. Related controls are grouped with visual separation
  4. Active filter states are immediately obvious
  5. Disabled states are clearly distinguishable
  6. Hierarchy maintained in both light and dark modes
  7. Design system tokens documented
  8. A/B test shows improved task completion time (optional)","","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70","1. ""Upload CSV"" button is visually dominant (1.5-2x larger) | 2. Utility buttons (theme, hide) are smaller and less prominent | 3. Related controls are grouped with visual separation | 4. Active filter states are immediately obvious | 5. Disabled states are clearly distinguishable | 6. Hierarchy maintained in both light and dark modes | 7. Design system tokens documented | 8. A/B test shows improved task completion time (optional)"
"gh-70-epic-story-1","gh-70-epic-story-1","AUTO","Story","Phase 1: Button Sizing (Quick Win) - Visual Hierarchy in Toolkit Header","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/70

1. Increase ""Upload CSV"" button size
2. Reduce utility button sizes
3. Adjust padding and font sizes","gh-70-epic","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70","1. ""Upload CSV"" button is visually dominant (1.5-2x larger) | 2. Utility buttons (theme, hide) are smaller and less prominent | 3. Related controls are grouped with visual separation | 4. Active filter states are immediately obvious | 5. Disabled states are clearly distinguishable | 6. Hierarchy maintained in both light and dark modes | 7. Design system tokens documented | 8. A/B test shows improved task completion time (optional)"
"gh-70-epic-story-1-task-1","gh-70-epic-story-1-task-1","AUTO","Sub-task","Increase ""Upload CSV"" button size","Derived from Phase 1: Button Sizing (Quick Win)","gh-70-epic-story-1","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70",""
"gh-70-epic-story-1-task-2","gh-70-epic-story-1-task-2","AUTO","Sub-task","Reduce utility button sizes","Derived from Phase 1: Button Sizing (Quick Win)","gh-70-epic-story-1","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70",""
"gh-70-epic-story-1-task-3","gh-70-epic-story-1-task-3","AUTO","Sub-task","Adjust padding and font sizes","Derived from Phase 1: Button Sizing (Quick Win)","gh-70-epic-story-1","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70",""
"gh-70-epic-story-2","gh-70-epic-story-2","AUTO","Story","Phase 2: Color & Contrast - Visual Hierarchy in Toolkit Header","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/70

1. Make primary action more vibrant
2. Reduce contrast on utility buttons
3. Ensure active states are obvious","gh-70-epic","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70","1. ""Upload CSV"" button is visually dominant (1.5-2x larger) | 2. Utility buttons (theme, hide) are smaller and less prominent | 3. Related controls are grouped with visual separation | 4. Active filter states are immediately obvious | 5. Disabled states are clearly distinguishable | 6. Hierarchy maintained in both light and dark modes | 7. Design system tokens documented | 8. A/B test shows improved task completion time (optional)"
"gh-70-epic-story-2-task-1","gh-70-epic-story-2-task-1","AUTO","Sub-task","Make primary action more vibrant","Derived from Phase 2: Color & Contrast","gh-70-epic-story-2","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70",""
"gh-70-epic-story-2-task-2","gh-70-epic-story-2-task-2","AUTO","Sub-task","Reduce contrast on utility buttons","Derived from Phase 2: Color & Contrast","gh-70-epic-story-2","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70",""
"gh-70-epic-story-2-task-3","gh-70-epic-story-2-task-3","AUTO","Sub-task","Ensure active states are obvious","Derived from Phase 2: Color & Contrast","gh-70-epic-story-2","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70",""
"gh-70-epic-story-3","gh-70-epic-story-3","AUTO","Story","Phase 3: Layout & Grouping - Visual Hierarchy in Toolkit Header","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/70

1. Add visual separators
2. Group related controls in `<div>` containers
3. Adjust spacing between groups (gap-4 vs gap-2)","gh-70-epic","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70","1. ""Upload CSV"" button is visually dominant (1.5-2x larger) | 2. Utility buttons (theme, hide) are smaller and less prominent | 3. Related controls are grouped with visual separation | 4. Active filter states are immediately obvious | 5. Disabled states are clearly distinguishable | 6. Hierarchy maintained in both light and dark modes | 7. Design system tokens documented | 8. A/B test shows improved task completion time (optional)"
"gh-70-epic-story-3-task-1","gh-70-epic-story-3-task-1","AUTO","Sub-task","Add visual separators","Derived from Phase 3: Layout & Grouping","gh-70-epic-story-3","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70",""
"gh-70-epic-story-3-task-2","gh-70-epic-story-3-task-2","AUTO","Sub-task","Group related controls in `<div>` containers","Derived from Phase 3: Layout & Grouping","gh-70-epic-story-3","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70",""
"gh-70-epic-story-3-task-3","gh-70-epic-story-3-task-3","AUTO","Sub-task","Adjust spacing between groups (gap-4 vs gap-2)","Derived from Phase 3: Layout & Grouping","gh-70-epic-story-3","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70",""
"gh-70-epic-story-4","gh-70-epic-story-4","AUTO","Story","Phase 4: Responsive Behavior - Visual Hierarchy in Toolkit Header","Parent GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/70

1. Adjust hierarchy on mobile (hamburger menu)
2. Ensure primary action always visible
3. Progressive disclosure for secondary features","gh-70-epic","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70","1. ""Upload CSV"" button is visually dominant (1.5-2x larger) | 2. Utility buttons (theme, hide) are smaller and less prominent | 3. Related controls are grouped with visual separation | 4. Active filter states are immediately obvious | 5. Disabled states are clearly distinguishable | 6. Hierarchy maintained in both light and dark modes | 7. Design system tokens documented | 8. A/B test shows improved task completion time (optional)"
"gh-70-epic-story-4-task-1","gh-70-epic-story-4-task-1","AUTO","Sub-task","Adjust hierarchy on mobile (hamburger menu)","Derived from Phase 4: Responsive Behavior","gh-70-epic-story-4","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70",""
"gh-70-epic-story-4-task-2","gh-70-epic-story-4-task-2","AUTO","Sub-task","Ensure primary action always visible","Derived from Phase 4: Responsive Behavior","gh-70-epic-story-4","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70",""
"gh-70-epic-story-4-task-3","gh-70-epic-story-4-task-3","AUTO","Sub-task","Progressive disclosure for secondary features","Derived from Phase 4: Responsive Behavior","gh-70-epic-story-4","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/70",""
"gh-69-epic","gh-69-epic","AUTO","Epic","[GH#69] Mobile Toolbar Responsiveness","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/69
Labels: [object Object], [object Object], [object Object]

# Mobile Toolbar Responsiveness

**Priority:** High  
**Type:** UX Enhancement  
**Component:** ToolkitHeader  
**Effort:** Medium (1-3 days)

## Problem

The toolkit header contains 6+ interactive elements (Hide, Dark/Light toggle, Hide BG, Upload CSV, plus filter buttons and export options) that become cramped and difficult to use on mobile screens (< 640px width).

### Current Issues

- Touch targets are smaller than the recommended 44Ã—44px minimum
- Buttons with text labels (""Hide BG"", ""Show All"") truncate or wrap awkwardly
- Horizontal space is insufficient for all controls
- Information overload in limited mobile viewport
- Toolbar can cause horizontal scrolling on narrow screens

### User Impact

- **High:** Mobile users struggle to tap small buttons accurately
- Frequently miss-tapping adjacent buttons
- Need to pinch-zoom to interact with toolbar
- Poor first impression on mobile devices
- Reduced accessibility for users with motor impairments

## Screenshots

- [Mobile cramped toolbar](https://github.com/user-attachments/assets/8b32ef9f-2f8c-4958-9829-501ce3b25d61)
- [Main interface desktop](https://github.com/user-attachments/assets/45f1f1e9-f478-4aa9-a40f-083ef4c8b453)

## Proposed Solution

### Mobile-First Redesign

1. **Responsive Hamburger Menu** (< 640px)
   - Replace toolbar with hamburger icon in top-right
   - Slide-out drawer or overlay menu for controls
   - Group related controls together
   - Use full-width buttons in menu (easy to tap)

2. **Icon-Only Buttons with Tooltips** (640px-1024px)
   - Remove text labels on medium screens
   - Keep icons only (moon/sun, palette, upload)
   - Add tooltips on hover/long-press
   - Maintain 44Ã—44px minimum tap targets

3. **Bottom Navigation Alternative**
   - Consider bottom sheet for mobile (familiar pattern)
   - Primary actions: Upload CSV, Theme, Filters
   - Swipe up to reveal, swipe down to dismiss
   - Persistent mini-bar when collapsed

4. **Consolidated Actions**
   - Group theme settings (dark mode + background) into submenu
   - Combine export options into single dropdown
   - Move ownership filters to dedicated section (not toolbar)

### Implementation Steps

1. Add new mobile breakpoint detection composable
2. Create `MobileToolbar.vue` component variant
3. Implement hamburger menu with slide-out drawer
4. Add touch-friendly button sizing (min 44px)
5. Test on physical devices (iOS Safari, Chrome Android)
6. Add gesture support (swipe to open/close)

### Responsive Breakpoint Strategy

```typescript
// Pseudocode
if (viewport < 640px) {
  // Mobile: Hamburger menu, bottom sheet, or minimal icons
  showMobileMenu = true;
} else if (viewport < 1024px) {
  // Tablet: Icon-only buttons with tooltips
  showIconsOnly = true;
} else {
  // Desktop: Full toolbar with labels
  showFullToolbar = true;
}
```

## Technical Considerations

### Files to Modify

- `src/components/ToolkitHeader.vue` - Make responsive or split into variants
- `src/components/Dashboard.vue` - Handle mobile menu state
- `tailwind.config.cjs` - Ensure breakpoints align
- Consider new `MobileToolbar.vue` component

### CSS/Tailwind Approach

```vue
<!-- Example pattern -->
<div class=""hidden md:flex gap-2"">
  <!-- Desktop buttons with labels -->
</div>
<div class=""flex md:hidden"">
  <!-- Mobile hamburger icon -->
</div>
```

### Touch Target Standards

- Minimum 44Ã—44px (iOS, Android)
- 48Ã—48px preferred (Material Design)
- Adequate spacing between targets (8px+)

## Acceptance Criteria

- [ ] All toolbar buttons meet 44Ã—44px minimum touch target on mobile
- [ ] No horizontal scrolling on any mobile screen size (320px+)
- [ ] Hamburger menu opens smoothly (< 200ms transition)
- [ ] All features accessible in mobile layout
- [ ] Toolbar tested on iOS Safari and Chrome Android
- [ ] Focus management works in mobile menu
- [ ] Swipe gesture optional enhancement implemented
- [ ] Visual regression tests updated for mobile variants

## Alternatives Considered

1. **Horizontal scroll toolbar** - Dismissed: Poor UX, not discoverable
2. **Multi-row toolbar** - Dismissed: Takes too much vertical space
3. **Accordion sections** - Considered: Could work for filters only
4. **Tab-based interface** - Dismissed: Adds complexity
5. **Floating action button (FAB)** - Considered: For primary action only

## Related Issues

- #TBD-visual-hierarchy (button prominence)
- #TBD-information-density (overall spacing)
- #TBD-mobile-ux (broader mobile improvements)
- docs/issues/medium-priority/09-accessibility-improvements.md (touch targets)

## References

- [Material Design Touch Targets](https://material.io/design/usability/accessibility.html#layout-and-typography)
- [iOS Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/adaptivity-and-layout/)
- [WCAG 2.5.5 Target Size](https://www.w3.org/WAI/WCAG21/Understanding/target-size.html)


Acceptance Criteria:
  1. All toolbar buttons meet 44Ã—44px minimum touch target on mobile
  2. No horizontal scrolling on any mobile screen size (320px+)
  3. Hamburger menu opens smoothly (< 200ms transition)
  4. All features accessible in mobile layout
  5. Toolbar tested on iOS Safari and Chrome Android
  6. Focus management works in mobile menu
  7. Swipe gesture optional enhancement implemented
  8. Visual regression tests updated for mobile variants","","high-priority;ui-ux;design","https://github.com/kmcgarry1/edhrec-compare/issues/69","1. All toolbar buttons meet 44Ã—44px minimum touch target on mobile | 2. No horizontal scrolling on any mobile screen size (320px+) | 3. Hamburger menu opens smoothly (< 200ms transition) | 4. All features accessible in mobile layout | 5. Toolbar tested on iOS Safari and Chrome Android | 6. Focus management works in mobile menu | 7. Swipe gesture optional enhancement implemented | 8. Visual regression tests updated for mobile variants"
"gh-37-epic","gh-37-epic","AUTO","Epic","[GH#37] ðŸ”— Implement URL state persistence with routing","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/37
Labels: [object Object], [object Object]

# ðŸ”— Implement URL state persistence with routing

**Labels:** `feature`, `medium-priority`

## Problem
- Selected commander not in URL
- Filters not in URL
- Can't share or bookmark specific views
- Browser back/forward doesn't work
- `vue-router` stub exists but unused

## Impact
- Poor UX - can't share decklists
- No deep linking
- Poor SEO
- Confusing stub in codebase

## Proposed Solution

### Option 1: Implement Full Routing
1. Remove `src/stubs/vue-router.ts`
2. Install actual `vue-router`
3. Create routes:
   - `/` - Home with onboarding
   - `/commander/:slug` - Specific commander view
   - `?bracket=X&modifier=Y` - Query params for filters

### Option 2: URL State Without Routing
Use URL query params without vue-router:
```typescript
// composables/useUrlState.ts
export function useUrlState() {
  const updateUrl = (params: Record<string, string>) => {
    const url = new URL(window.location.href);
    Object.entries(params).forEach(([key, value]) => {
      url.searchParams.set(key, value);
    });
    window.history.pushState({}, '', url);
  };
  
  const readUrl = () => {
    const params = new URLSearchParams(window.location.search);
    return Object.fromEntries(params);
  };
  
  return { updateUrl, readUrl };
}
```

### Option 3: Remove Router Stub
If routing not needed, clean up the stub to avoid confusion.

## Recommended: Option 1
Full routing provides best UX and is most maintainable.

## Implementation Steps
1. Install vue-router
2. Create router configuration
3. Update App.vue to use router-view
4. Sync state with URL
5. Add tests for routing
6. Update documentation

## Success Criteria
- Can share URL with specific commander/filters
- Browser back/forward works
- Bookmarks work
- Deep linking works","","medium-priority;feature","https://github.com/kmcgarry1/edhrec-compare/issues/37",""
"gh-34-epic","gh-34-epic","AUTO","Epic","[GH#34] âš¡ Add virtual scrolling for large card lists","GitHub issue: https://github.com/kmcgarry1/edhrec-compare/issues/34
Labels: [object Object], [object Object]

# âš¡ Add virtual scrolling for large card lists

**Labels:** `performance`, `medium-priority`

## Problem
Card tables render all rows at once, which can cause performance issues with large decklists (100+ cards).

## Impact
- Slow rendering with large card lists
- Increased memory usage
- Poor UX with many cards
- Browser can become unresponsive

## Current Implementation
```vue
<!-- EdhrecReader.vue -->
<CardTable :rows=""getTableRows(cardlist)"" />
```

Renders all rows immediately.

## Proposed Solution
Implement virtual scrolling using one of:

### Option 1: vue-virtual-scroller
```bash
npm install vue-virtual-scroller
```

```vue
<RecycleScroller
  :items=""getTableRows(cardlist)""
  :item-size=""60""
  key-field=""id""
>
  <template #default=""{ item }"">
    <ScryfallCardRow :card=""item.card"" :have=""item.have"" />
  </template>
</RecycleScroller>
```

### Option 2: @tanstack/vue-virtual
More modern, smaller bundle

### Option 3: Custom Implementation
For learning/control

## Implementation Steps
1. Choose virtual scroll library
2. Update `CardTable.vue` to support virtual scrolling
3. Test with large datasets (200+ cards)
4. Ensure mobile responsiveness maintained
5. Update E2E tests if needed

## Performance Targets
- Smooth 60fps scrolling with 500+ items
- Initial render < 100ms
- Memory usage < 50MB for 500 cards

## References
- [vue-virtual-scroller](https://github.com/Akryum/vue-virtual-scroller)
- [TanStack Virtual](https://tanstack.com/virtual/latest)","","medium-priority;performance","https://github.com/kmcgarry1/edhrec-compare/issues/34",""